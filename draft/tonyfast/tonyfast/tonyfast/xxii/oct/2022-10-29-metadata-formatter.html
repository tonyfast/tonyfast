<!DOCTYPE html>
<html lang="en">
 <head>
  <meta charset="utf-8">
  <meta content="width=device-width, initial-scale=1.0" name="viewport">
  <title>
   Notebook
  </title>
  <meta content="automatically exporting rdf data during interactive computing." name="description">
  <meta content="light" name="color-scheme">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.1.10/require.min.js">
  </script>
  <style type="text/css">
   /* # accessible css configurations

we define these high level variables to allow for configuration during use and testing.
we are not sure what the preferred default values are for these any accessible notebooks features.
the variables specify critical degrees of freedom in the notebook style.

## notebook interface specific css variables

*/

:root {
    --nb-focus-width: 3px;
    --nb-accent-color: auto;
    --nb-background-color-dark: #2b2a33;
    --nb-background-color-light: #FFFFFF;
    --nb-margin: 5%;
    --nb-font-size: 16px;
    --nb-font-family: serif;
    --nb-line-height: 1.5;
    --nb-scrolled-height: 600px;
}

/* map css variables to css properties on the `body` elements.
this mapping turns out css variables into user interfaces. */

body {
    font-size: var(--nb-font-size);
    font-family: var(--nb-font-family);
    accent-color: var(--nb-accent-color);
    margin-left: var(--nb-margin);
    margin-right: var(--nb-margin);
    line-height: var(--nb-line-height);
    width: calc(100% - 2*var(--nb-margin));
}

/* ## notebook settings

the notebook settings interface connects configurable css features to the user.
we use dialog elements to represents an element that should be hidden by default.
it turns out there are two ways to layout `dialog` elements. 
they can be used as modals or block elements.
we extract this dual purpose to provide both configurations to the user.

*/

dialog form>* {
    display: block;
}


/* ## wcag accessibility guidelines as a feature

flexibility is the future of assistive interfaces.
it is not in the purvey of privileged developers and inaccessible systems to decide what priority accessibility is.
it is the fucking priority.

in this implementation, we want to satisfy broad user needs by making a lot of features configurable.
one configurable feature is the accessibility priority. 
experienced developers may need less assistive features as they spend more time with an interface.

### buttons sizes

WCAG 2.1 defines a huge stinking AAA hit size for buttons. its beautiful.

/* satisfy AAA 2.5.5 */

.wcag-aaa button,
.wcag-aaa input[type=checkbox] {
    min-height: 44px;
    min-width: 44px;
}

.wcag-aaa a {
    font-size: max(44px, var(--nb-font-size));
}

/* WCAG 2.2 clarified a AA button size that is used to style checkboxes and buttons. */
/* satisfy AA 2.5.8 minimum target requirement */
.wcag-aa button,
.wcag-aa input[type=checkbox] {
    min-height: 24px;
    min-width: 24px;
}

.wcag-aa a {
    font-size: max(24px, var(--nb-font-size));
}

/* remove the color styling for AAA */
.wcag-aaa .highlight pre code span[class] {
    color: unset;
}

/* ### native textareas for AAA priority.


our AAA priority choices often ensure that third party libraries can not compromise the accessibility of notebook.
the design decisions are focused native elements so that the assistive technology users have consistent expectations and outcomes.

*/

.markdown textarea[name=source]+[role=group],
.wcag-a textarea[name=source],
.wcag-aa textarea[name=source],
.wcag-aaa .markdown textarea[name=source],
/* this group selector is very ambiguous */
.wcag-aaa textarea[name=source]+[role=group] {
    display: none;
}

/* line height cant change pre elements based on browser presets */
pre {
    line-height: unset;
}

/* this is only needed for the lsit template variant */
ol#cells {
    margin: unset;
    padding: unset;
}

li.cell {
    list-style-type: none;
}

/* ## notebook components layout */

td[role="none"]:not([hidden]),
th[role="none"]:not([hidden]) {
    display: unset;
    text-align: unset;
}

table {
    border-spacing: unset;
}

#cells,
#cells .cell,
#cells>tbody {
    display: flex;
    flex-direction: column;
}

ol[reversed]#cells,
[reversed]#cells tbody {
    flex-direction: column-reverse;
}

/* hide the visual output area when there are no outputs. 
assistive technologies will recieve an audible notification that there are not outputs. */

fieldset[data-outputs="0"] {
    display: none;
}

/* ## modifications to html defaults 

### focus 

there nothing to be said about this topic that [sara soueidan](https://www.sarasoueidan.com/blog/focus-indicators/) hasn't said.
we start with her [universal focus recommendation](https://www.sarasoueidan.com/blog/focus-indicators/#a-%E2%80%98universal%E2%80%99-focus-indicator).

*/



.cell:focus-within,
:focus-visible {
    outline: max(var(--nb-focus-width), 1px) solid;
    box-shadow: 0 0 0 calc(2 * max(var(--nb-focus-width), 1px));
}


/* on firefox, the input and output become interactive when there is overflow. chrome fixed this recently find reference.*/
textarea[name=source] {
    min-width: 0;
}

td.nb-outputs,
td.nb-source {
    overflow-x: auto;
}

.no-overflow td.nb-source {
    overflow-x: visible;
}

.no-overflow td.nb-outputs {
    min-width: 100%;
    width: max-content;
}

#nb-settings li::marker,
summary[inert]::marker {
    content: "";
}

/* ### inheriting styles */

input,
select,
button {
    font-family: inherit;
    font-size: inherit;
}

textarea {
    font-family: monospace;
    font-size: inherit;
    line-height: inherit;
    overflow: auto;
    color: unset;
}

textarea[name=source] {
    box-sizing: border-box;
    width: 100%;
    resize: vertical;
    white-space: pre;
}


/* align checkboxes with buttons */
input[type="checkbox"] {
    vertical-align: middle;
}

/* ## custom class selectors */

#nb-dialogs details:not([open])~dialog:not([open]):not(:focus-within):not(:active),
/* legend:not(:focus-within):not(:active), */
details.log:not([open])+table,
.visually-hidden:not(:focus-within):not(:active),
.visually-hide {
    clip: rect(0 0 0 0);
    clip-path: inset(50%);
    height: 1px;
    overflow: hidden;
    position: absolute;
    white-space: nowrap;
    width: 1px;
}

.nb-outputs.nb-scrolled {
    max-height: var(--nb-scrolled-height);
    overflow-y: auto;
}

.nb-outputs.nb-collapsed {
    display: none;
}
  </style>
  <style id="nb-light-theme" media="screen" type="text/css">
   /** accessible pygments github-light-high-contrast generated by __main__**/
pre { line-height: 125%; }
td.linenos .normal { color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px; }
span.linenos { color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px; }
td.linenos .special { color: #000000; background-color: #ffffc0; padding-left: 5px; padding-right: 5px; }
span.linenos.special { color: #000000; background-color: #ffffc0; padding-left: 5px; padding-right: 5px; }
.hll { background-color: #0969da4a }
.c { color: #66707b } /* Comment */
.err { color: #a0111f } /* Error */
.k { color: #a0111f } /* Keyword */
.l { color: #702c00 } /* Literal */
.n { color: #622cbc } /* Name */
.o { color: #024c1a } /* Operator */
.p { color: #24292f } /* Punctuation */
.ch { color: #66707b } /* Comment.Hashbang */
.cm { color: #66707b } /* Comment.Multiline */
.cp { color: #66707b } /* Comment.Preproc */
.cpf { color: #66707b } /* Comment.PreprocFile */
.c1 { color: #66707b } /* Comment.Single */
.cs { color: #66707b } /* Comment.Special */
.gd { color: #023b95 } /* Generic.Deleted */
.ge { font-style: italic } /* Generic.Emph */
.gr { color: #a0111f } /* Generic.Error */
.gh { color: #023b95 } /* Generic.Heading */
.gs { font-weight: bold } /* Generic.Strong */
.gu { color: #023b95 } /* Generic.Subheading */
.kc { color: #023b95 } /* Keyword.Constant */
.kd { color: #a0111f } /* Keyword.Declaration */
.kn { color: #a0111f } /* Keyword.Namespace */
.kp { color: #a0111f } /* Keyword.Pseudo */
.kr { color: #a0111f } /* Keyword.Reserved */
.kt { color: #a0111f } /* Keyword.Type */
.ld { color: #702c00 } /* Literal.Date */
.m { color: #702c00 } /* Literal.Number */
.s { color: #023b95 } /* Literal.String */
.na { color: #702c00 } /* Name.Attribute */
.nb { color: #702c00 } /* Name.Builtin */
.nc { color: #023b95 } /* Name.Class */
.no { color: #023b95 } /* Name.Constant */
.nd { color: #702c00 } /* Name.Decorator */
.ni { color: #024c1a } /* Name.Entity */
.ne { color: #622cbc } /* Name.Exception */
.nf { color: #023b95 } /* Name.Function */
.nl { color: #702c00 } /* Name.Label */
.nn { color: #24292f } /* Name.Namespace */
.nx { color: #622cbc } /* Name.Other */
.py { color: #023b95 } /* Name.Property */
.nt { color: #024c1a } /* Name.Tag */
.nv { color: #702c00 } /* Name.Variable */
.ow { color: #622cbc } /* Operator.Word */
.pm { color: #24292f } /* Punctuation.Marker */
.w { color: #24292f } /* Text.Whitespace */
.mb { color: #702c00 } /* Literal.Number.Bin */
.mf { color: #702c00 } /* Literal.Number.Float */
.mh { color: #702c00 } /* Literal.Number.Hex */
.mi { color: #702c00 } /* Literal.Number.Integer */
.mo { color: #702c00 } /* Literal.Number.Oct */
.sa { color: #023b95 } /* Literal.String.Affix */
.sb { color: #023b95 } /* Literal.String.Backtick */
.sc { color: #023b95 } /* Literal.String.Char */
.dl { color: #023b95 } /* Literal.String.Delimiter */
.sd { color: #023b95 } /* Literal.String.Doc */
.s2 { color: #023b95 } /* Literal.String.Double */
.se { color: #023b95 } /* Literal.String.Escape */
.sh { color: #023b95 } /* Literal.String.Heredoc */
.si { color: #023b95 } /* Literal.String.Interpol */
.sx { color: #023b95 } /* Literal.String.Other */
.sr { color: #023b95 } /* Literal.String.Regex */
.s1 { color: #023b95 } /* Literal.String.Single */
.ss { color: #023b95 } /* Literal.String.Symbol */
.bp { color: #702c00 } /* Name.Builtin.Pseudo */
.fm { color: #023b95 } /* Name.Function.Magic */
.vc { color: #702c00 } /* Name.Variable.Class */
.vg { color: #702c00 } /* Name.Variable.Global */
.vi { color: #702c00 } /* Name.Variable.Instance */
.vm { color: #702c00 } /* Name.Variable.Magic */
.il { color: #702c00 } /* Literal.Number.Integer.Long */
  </style>
  <style id="nb-dark-theme" media="not  screen" type="text/css">
   /** accessible pygments github-dark-high-contrast generated by __main__**/
pre { line-height: 125%; }
td.linenos .normal { color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px; }
span.linenos { color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px; }
td.linenos .special { color: #000000; background-color: #ffffc0; padding-left: 5px; padding-right: 5px; }
span.linenos.special { color: #000000; background-color: #ffffc0; padding-left: 5px; padding-right: 5px; }
.hll { background-color: #58a6ff70 }
.c { color: #d9dee3 } /* Comment */
.err { color: #ff9492 } /* Error */
.k { color: #ff9492 } /* Keyword */
.l { color: #ffb757 } /* Literal */
.n { color: #dbb7ff } /* Name */
.o { color: #72f088 } /* Operator */
.p { color: #C9D1D9 } /* Punctuation */
.ch { color: #d9dee3 } /* Comment.Hashbang */
.cm { color: #d9dee3 } /* Comment.Multiline */
.cp { color: #d9dee3 } /* Comment.Preproc */
.cpf { color: #d9dee3 } /* Comment.PreprocFile */
.c1 { color: #d9dee3 } /* Comment.Single */
.cs { color: #d9dee3 } /* Comment.Special */
.gd { color: #91cbff } /* Generic.Deleted */
.ge { font-style: italic } /* Generic.Emph */
.gr { color: #ff9492 } /* Generic.Error */
.gh { color: #91cbff } /* Generic.Heading */
.gs { font-weight: bold } /* Generic.Strong */
.gu { color: #91cbff } /* Generic.Subheading */
.kc { color: #91cbff } /* Keyword.Constant */
.kd { color: #ff9492 } /* Keyword.Declaration */
.kn { color: #ff9492 } /* Keyword.Namespace */
.kp { color: #ff9492 } /* Keyword.Pseudo */
.kr { color: #ff9492 } /* Keyword.Reserved */
.kt { color: #ff9492 } /* Keyword.Type */
.ld { color: #ffb757 } /* Literal.Date */
.m { color: #ffb757 } /* Literal.Number */
.s { color: #91cbff } /* Literal.String */
.na { color: #ffb757 } /* Name.Attribute */
.nb { color: #ffb757 } /* Name.Builtin */
.nc { color: #91cbff } /* Name.Class */
.no { color: #91cbff } /* Name.Constant */
.nd { color: #ffb757 } /* Name.Decorator */
.ni { color: #72f088 } /* Name.Entity */
.ne { color: #dbb7ff } /* Name.Exception */
.nf { color: #91cbff } /* Name.Function */
.nl { color: #ffb757 } /* Name.Label */
.nn { color: #C9D1D9 } /* Name.Namespace */
.nx { color: #dbb7ff } /* Name.Other */
.py { color: #91cbff } /* Name.Property */
.nt { color: #72f088 } /* Name.Tag */
.nv { color: #ffb757 } /* Name.Variable */
.ow { color: #dbb7ff } /* Operator.Word */
.pm { color: #C9D1D9 } /* Punctuation.Marker */
.w { color: #C9D1D9 } /* Text.Whitespace */
.mb { color: #ffb757 } /* Literal.Number.Bin */
.mf { color: #ffb757 } /* Literal.Number.Float */
.mh { color: #ffb757 } /* Literal.Number.Hex */
.mi { color: #ffb757 } /* Literal.Number.Integer */
.mo { color: #ffb757 } /* Literal.Number.Oct */
.sa { color: #91cbff } /* Literal.String.Affix */
.sb { color: #91cbff } /* Literal.String.Backtick */
.sc { color: #91cbff } /* Literal.String.Char */
.dl { color: #91cbff } /* Literal.String.Delimiter */
.sd { color: #91cbff } /* Literal.String.Doc */
.s2 { color: #91cbff } /* Literal.String.Double */
.se { color: #91cbff } /* Literal.String.Escape */
.sh { color: #91cbff } /* Literal.String.Heredoc */
.si { color: #91cbff } /* Literal.String.Interpol */
.sx { color: #91cbff } /* Literal.String.Other */
.sr { color: #91cbff } /* Literal.String.Regex */
.s1 { color: #91cbff } /* Literal.String.Single */
.ss { color: #91cbff } /* Literal.String.Symbol */
.bp { color: #ffb757 } /* Name.Builtin.Pseudo */
.fm { color: #91cbff } /* Name.Function.Magic */
.vc { color: #ffb757 } /* Name.Variable.Class */
.vg { color: #ffb757 } /* Name.Variable.Global */
.vi { color: #ffb757 } /* Name.Variable.Instance */
.vm { color: #ffb757 } /* Name.Variable.Magic */
.il { color: #ffb757 } /* Literal.Number.Integer.Long */
  </style>
  <!-- Load mathjax -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/latest.js?config=TeX-AMS_CHTML-full,Safe">
  </script>
  <!-- MathJax configuration -->
  <script type="text/x-mathjax-config">
   init_mathjax = function() {
        if (window.MathJax) {
        // MathJax loaded
            MathJax.Hub.Config({
                TeX: {
                    equationNumbers: {
                    autoNumber: "AMS",
                    useLabelIds: true
                    }
                },
                tex2jax: {
                    inlineMath: [ ['$','$'], ["\\(","\\)"] ],
                    displayMath: [ ['$$','$$'], ["\\[","\\]"] ],
                    processEscapes: true,
                    processEnvironments: true
                },
                displayAlign: 'center',
                CommonHTML: {
                    linebreaks: {
                    automatic: true
                    }
                }
            });

            MathJax.Hub.Queue(["Typeset", MathJax.Hub]);
        }
    }
    init_mathjax();
  </script>
  <!-- End of mathjax configuration -->
  <script type="module">
   document.addEventListener("DOMContentLoaded", async () => {
    const diagrams = document.querySelectorAll(".jp-Mermaid > pre.mermaid");
    // do not load mermaidjs if not needed
    if (!diagrams.length) {
      return;
    }
    const mermaid = (await import("https://cdnjs.cloudflare.com/ajax/libs/mermaid/10.7.0/mermaid.esm.min.mjs")).default;
    const parser = new DOMParser();

    mermaid.initialize({
      maxTextSize: 100000,
      maxEdges: 100000,
      startOnLoad: false,
      fontFamily: window
        .getComputedStyle(document.body)
        .getPropertyValue("--jp-ui-font-family"),
      theme: document.querySelector("body[data-jp-theme-light='true']")
        ? "default"
        : "dark",
    });

    let _nextMermaidId = 0;

    function makeMermaidImage(svg) {
      const img = document.createElement("img");
      const doc = parser.parseFromString(svg, "image/svg+xml");
      const svgEl = doc.querySelector("svg");
      const { maxWidth } = svgEl?.style || {};
      const firstTitle = doc.querySelector("title");
      const firstDesc = doc.querySelector("desc");

      img.setAttribute("src", `data:image/svg+xml,${encodeURIComponent(svg)}`);
      if (maxWidth) {
        img.width = parseInt(maxWidth);
      }
      if (firstTitle) {
        img.setAttribute("alt", firstTitle.textContent);
      }
      if (firstDesc) {
        const caption = document.createElement("figcaption");
        caption.className = "sr-only";
        caption.textContent = firstDesc.textContent;
        return [img, caption];
      }
      return [img];
    }

    async function makeMermaidError(text) {
      let errorMessage = "";
      try {
        await mermaid.parse(text);
      } catch (err) {
        errorMessage = `${err}`;
      }

      const result = document.createElement("details");
      result.className = 'jp-RenderedMermaid-Details';
      const summary = document.createElement("summary");
      summary.className = 'jp-RenderedMermaid-Summary';
      const pre = document.createElement("pre");
      const code = document.createElement("code");
      code.innerText = text;
      pre.appendChild(code);
      summary.appendChild(pre);
      result.appendChild(summary);

      const warning = document.createElement("pre");
      warning.innerText = errorMessage;
      result.appendChild(warning);
      return [result];
    }

    async function renderOneMarmaid(src) {
      const id = `jp-mermaid-${_nextMermaidId++}`;
      const parent = src.parentNode;
      let raw = src.textContent.trim();
      const el = document.createElement("div");
      el.style.visibility = "hidden";
      document.body.appendChild(el);
      let results = null;
      let output = null;
      try {
        let { svg } = await mermaid.render(id, raw, el);
        svg = cleanMermaidSvg(svg);
        results = makeMermaidImage(svg);
        output = document.createElement("figure");
        results.map(output.appendChild, output);
      } catch (err) {
        parent.classList.add("jp-mod-warning");
        results = await makeMermaidError(raw);
        output = results[0];
      } finally {
        el.remove();
      }
      parent.classList.add("jp-RenderedMermaid");
      parent.appendChild(output);
    }


    /**
     * Post-process to ensure mermaid diagrams contain only valid SVG and XHTML.
     */
    function cleanMermaidSvg(svg) {
      return svg.replace(RE_VOID_ELEMENT, replaceVoidElement);
    }


    /**
     * A regular expression for all void elements, which may include attributes and
     * a slash.
     *
     * @see https://developer.mozilla.org/en-US/docs/Glossary/Void_element
     *
     * Of these, only `<br>` is generated by Mermaid in place of `\n`,
     * but _any_ "malformed" tag will break the SVG rendering entirely.
     */
    const RE_VOID_ELEMENT =
      /<\s*(area|base|br|col|embed|hr|img|input|link|meta|param|source|track|wbr)\s*([^>]*?)\s*>/gi;

    /**
     * Ensure a void element is closed with a slash, preserving any attributes.
     */
    function replaceVoidElement(match, tag, rest) {
      rest = rest.trim();
      if (!rest.endsWith('/')) {
        rest = `${rest} /`;
      }
      return `<${tag} ${rest}>`;
    }

    void Promise.all([...diagrams].map(renderOneMarmaid));
  });
  </script>
  <style>
   .jp-Mermaid:not(.jp-RenderedMermaid) {
    display: none;
  }

  .jp-RenderedMermaid {
    overflow: auto;
    display: flex;
  }

  .jp-RenderedMermaid.jp-mod-warning {
    width: auto;
    padding: 0.5em;
    margin-top: 0.5em;
    border: var(--jp-border-width) solid var(--jp-warn-color2);
    border-radius: var(--jp-border-radius);
    color: var(--jp-ui-font-color1);
    font-size: var(--jp-ui-font-size1);
    white-space: pre-wrap;
    word-wrap: break-word;
  }

  .jp-RenderedMermaid figure {
    margin: 0;
    overflow: auto;
    max-width: 100%;
  }

  .jp-RenderedMermaid img {
    max-width: 100%;
  }

  .jp-RenderedMermaid-Details > pre {
    margin-top: 1em;
  }

  .jp-RenderedMermaid-Summary {
    color: var(--jp-warn-color2);
  }

  .jp-RenderedMermaid:not(.jp-mod-warning) pre {
    display: none;
  }

  .jp-RenderedMermaid-Summary > pre {
    display: inline-block;
    white-space: normal;
  }
  </style>
  <!-- End of mermaid configuration -->
 </head>
 <body class="wcag-aa">
  <header>
   <a href="#1" id="TOP">
    skip to main content
   </a>
   <br>
   <button accesskey="," aria-controls="nb-settings" onclick="openDialog()">
    settings
   </button>
   <details>
    <summary>
     site navigation
    </summary>
    <nav>
     <ol>
      <li>
       <a href="../xxiv/2024-02-21-build-docs-pd.html">
        build the site docs
       </a>
      </li>
      <li>
       <a href="../xxiv/2024-02-20-multiindex-html.html">
        proper html tables with multiple indexes
       </a>
      </li>
      <li>
       <a href="../xxiv/2024-02-15-pandas-table-names.html">
        a study of pandas dataframes with different levels
       </a>
      </li>
      <li>
       <a href="../xxiv/2024-02-05-aiohttp-pandas-accessor.html">
        adding an http attribrute to pandas series
       </a>
      </li>
      <li>
       <a href="../xxiv/2024-01-25-mast-a11y-notebooks.html">
        transforming mast notebooks into nbconvert templates.
       </a>
      </li>
      <li>
       <a href="../xxiv/2024-01-20-colgroup-schema.html">
        semantic representation of columns based on schema
       </a>
      </li>
      <li>
       <a href="../xxiv/2024-01-05-docx-to-data.html">
        convertin a docx into a structured dataframe
       </a>
      </li>
      <li>
       <a href="../xxiii/2023-12-20-interactive-html-validation.html">
        interactive w3c validation
       </a>
      </li>
      <li>
       <a href="../xxiii/2023-12-15-a11y-testing-dimensions.html">
        slicing and dicing accessibility violations with exception groups
       </a>
      </li>
      <li>
       <a href="../xxiii/2023-12-13-jupyter-community-call.html">
        It's the Community Call Y'all
       </a>
      </li>
      <li>
       <a href="../xxiii/2023-12-08-vnu-validator-exceptions.html">
        generating higher resolution exceptions for the vnu validator
       </a>
      </li>
      <li>
       <a href="../xxiii/2023-12-03-axe-rules-topology.html">
        axe testing codes as dataframes and exceptions
       </a>
      </li>
      <li>
       <a href="../xxiii/2023-11-14-w3c-validator.html">
        running the w3c validator
       </a>
      </li>
      <li>
       <a href="../xxiii/2023-08-24-semantically-meaningful-displays.html">
        semantically meaningful display outputs for notebooks
       </a>
      </li>
      <li>
       <a href="../xxiii/2023-08-23-semantic-lits.html">
        semantically meaningful lists
       </a>
      </li>
      <li>
       <a href="../xxiii/2023-08-10-semantic-code-blocks.html">
        accessibile semantics for python code
       </a>
      </li>
      <li>
       <a href="../xxiii/2023-08-03-pandas-accessors.html">
        None
       </a>
      </li>
      <li>
       <a href="../xxiii/2023-07-17-accessible-string-representations.html">
        the string is a samp
       </a>
      </li>
      <li>
       <a href="../xxiii/2023-06-26-dataframe-diagrams-figure-semantics.html">
        a semantic dataframe
       </a>
      </li>
      <li>
       <a href="../xxiii/2023-06-21-v7-aom.html">
        jupyter notebook v7 remediations
       </a>
      </li>
      <li>
       <a href="../xxiii/2023-03-18-ally-talk.html">
        A Crash Course in Digital Accessibility
       </a>
      </li>
      <li>
       <a href="../xxiii/2023-03-18-pycascades-ally-talk.html">
        A Crash Course in Digital Accessibility
       </a>
      </li>
      <li>
       <a href="../xxiii/2023-03-04-computational-notebooks-history.html">
        a sprint through history toward computional notebooks
       </a>
      </li>
      <li>
       <a href="../xxiii/2023-02-28-community-demo.html">
        None
       </a>
      </li>
      <li>
       <a href="../xxiii/2023-02-19-semantic.html">
        semantic notebook structure
       </a>
      </li>
      <li>
       <a href="2023-02-05-pipings.html">
        pipes are common sugar
       </a>
      </li>
      <li>
       <a href="../xxiii/2023-01-24-lite-build.html">
        including development builds in jupyter lite
       </a>
      </li>
      <li>
       <a href="../xxiii/2023-01-24-whoosh-search.html">
        None
       </a>
      </li>
      <li>
       <a href="../xxiii/2023-01-24-system-dependency-graphs.html">
        None
       </a>
      </li>
      <li>
       <a href="../xxiii/2023-01-18-voila-pidgy-integration.html">
        None
       </a>
      </li>
      <li>
       <a href="../xxiii/2023-01-16-inspector-hack.html">
        None
       </a>
      </li>
      <li>
       <a href="../xxiii/2023-01-14-links-in-markdown-tokens.html">
        where do all the good links go?
       </a>
      </li>
      <li>
       <a href="../xxiii/2023-01-12-tree-sitter.html">
        getting start with tree sitter
       </a>
      </li>
      <li>
       <a href="../xxiii/2023-01-12-giscus-comments.html">
        adding giscus comments to this blog
       </a>
      </li>
      <li>
       <a href="../xxiii/2023-01-11-extensible-metadata.html">
        extensible metadata in the notebook format
       </a>
      </li>
      <li>
       <a href="../xxiii/2023-01-11-duckdb-search.html">
        full text search for notebooks and files using duckdb
       </a>
      </li>
      <li>
       <a href="../xxiii/2023-01-10-rara-gtfo.html">
        restart and run all or it didn't happen
       </a>
      </li>
      <li>
       <a href="../xxiii/2023-01-09-notebooks-states.html">
        three states of python in a notebook
       </a>
      </li>
      <li>
       <a href="../xxiii/2023-01-07-pidgy-voila.html">
        None
       </a>
      </li>
      <li>
       <a href="../xxiii/2023-01-04-tfoot-dataframe.html">
        None
       </a>
      </li>
      <li>
       <a href="../xxiii/2023-01-04-using-diagrams.html">
        diagrams in jupyter and mkdocs
       </a>
      </li>
      <li>
       <a href="../xxiii/2023-01-02-accessible-dataframes-basic-indexes.html">
        None
       </a>
      </li>
      <li>
       <a href="../xxiii/2023-01-01-strawberry-server.html">
        WIP: strawberry jupyter server
       </a>
      </li>
      <li>
       <a href="2022-12-31-jupyter-config-files.html">
        configuration files
       </a>
      </li>
      <li>
       <a href="2022-12-31-markdownish-notebook.html">
        a template for exporting markdownish notebooks
       </a>
      </li>
      <li>
       <a href="2022-12-30-typer-magic.html">
        None
       </a>
      </li>
      <li>
       <a href="2022-12-23-mkdocs-plugin.html">
        None
       </a>
      </li>
      <li>
       <a href="2022-12-22-pyproject-analysis.html">
        None
       </a>
      </li>
      <li>
       <a href="2022-12-21-lite-build.html">
        None
       </a>
      </li>
      <li>
       <a href="2022-12-20-pyscript-nbconvert.html">
        None
       </a>
      </li>
      <li>
       <a href="2022-12-19-integrating-typer.html">
        None
       </a>
      </li>
      <li>
       <a href="2022-12-18-mkdocs-task.html">
        None
       </a>
      </li>
      <li>
       <a href="2022-12-17-find-dependencies-in-content.html">
        automating blog posts to work with jupyter-lite
       </a>
      </li>
      <li>
       <a href="2022-12-16-issue-activity-graphql.html">
        retreiving my issue activity
       </a>
      </li>
      <li>
       <a href="2022-12-15-html-tags-study.html">
        all the tags i could be using
       </a>
      </li>
      <li>
       <a href="2022-12-13-github-api-stats.html">
        extracting info from the github statistics api
       </a>
      </li>
      <li>
       <a href="2022-12-09-pyproject-analysis.html">
        None
       </a>
      </li>
      <li>
       <a href="2022-12-05-markdown-to-doctest.html">
        None
       </a>
      </li>
      <li>
       <a href="2022-11-26-package-mimic-and-rel-imports.html">
        None
       </a>
      </li>
      <li>
       <a href="2022-11-23-better-dask-shape.html">
        None
       </a>
      </li>
      <li>
       <a href="2022-11-17-assignment-expression-display.html">
        None
       </a>
      </li>
      <li>
       <a href="2022-11-17-assignment-expression-display.html">
        None
       </a>
      </li>
      <li>
       <a href="2022-11-12-pluggy-experiments.html">
        None
       </a>
      </li>
      <li>
       <a href="2022-11-12-async-import.html">
        asynchronous imports in python
       </a>
      </li>
      <li>
       <a href="2022-10-29-metadata-formatter.html">
        None
       </a>
      </li>
      <li>
       <a href="2022-10-27-axe-core-playwright-python.html">
        invoking axe-core from python playwright
       </a>
      </li>
      <li>
       <a href="2022-10-25-static-notebook-tags.html">
        post processing html accessibility
       </a>
      </li>
      <li>
       <a href="2022-10-21-pidgy-displays.html">
        literate computing - interactive literate programming
       </a>
      </li>
      <li>
       <a href="2022-10-21-markdown-future.html">
        when markdown and python collide
       </a>
      </li>
      <li>
       <a href="2022-10-20-meeting-link-widgets.html">
        making meeting links
       </a>
      </li>
      <li>
       <a href="2022-10-19-mobius-text.html">
        turn some text into a mobius surface
       </a>
      </li>
      <li>
       <a href="2022-10-05-dask-search.html">
        searching notebooks
       </a>
      </li>
      <li>
       <a href="../colormap-dataframes/2021-10-11-colorizing.html">
        None
       </a>
      </li>
     </ol>
    </nav>
   </details>
   <section aria-labelledby="nb-summary-label">
    <details>
     <summary aria-describedby="nb-ct-total nb-cells-label nb-ct-code nb-state nb-ct-loc nb-loc-label
nb-ct-outputs nb-outputs-label" id="nb-summary-label">
      notebook summary
     </summary>
     <button aria-controls="nb-metadata" onclick="openDialog()">
      show metadata
     </button>
     <dl aria-labelledby="nb-summary-label">
      <dt>
       description
      </dt>
      <dd id>
       automatically exporting rdf data during interactive computing.
      </dd>
      <dt>
       cells
      </dt>
      <dd id="nb-ct-total">
       33 total
      </dd>
      <dd id="nb-ct-code">
       14 code
      </dd>
      <dd>
      </dd>
      <dt>
       state
      </dt>
      <dd id="nb-state">
       executed in order
      </dd>
      <dt>
       language
      </dt>
      <dd id="nb-lang">
       python
      </dd>
      <dt id="nb-loc-label">
       lines of code
      </dt>
      <dd id="nb-ct-loc">
       163
      </dd>
      <dt>
       outputs
      </dt>
      <dd id="nb-ct-outputs">
       5
      </dd>
     </dl>
    </details>
   </section>
   <section aria-labelledby="nb-toc">
    <details open>
     <summary id="toc">
      <span id="nb-toc">
       table of contents
      </span>
     </summary>
     <a id="nb-toc-start">
     </a>
     <nav>
      <ol>
       <li>
        <ol>
         <li>
          <a href="#custom-metadata-formatter">
           custom metadata formatter
          </a>
         </li>
         <li>
          <a href="#custom-display-formatter">
           custom display formatter
          </a>
         </li>
         <li>
          <ol>
           <li>
            <a href="#None">
             some data for the graph
            </a>
           </li>
           <li>
            <ol>
             <li>
              <a href="#None">
               dataframes
              </a>
             </li>
             <li>
              <a href="#None">
               string or url
              </a>
             </li>
            </ol>
           </li>
          </ol>
         </li>
         <li>
          <a href="#looking-at-the-metadata-graph">
           looking at the metadata graph
          </a>
         </li>
        </ol>
       </li>
      </ol>
     </nav>
     <li>
      <a href="#things-we-capture">
       things we capture
      </a>
     </li>
     <li>
      <a href="#things-we-can-capture-in-the-graph">
       things we can capture in the graph.
      </a>
     </li>
    </details>
   </section>
   <dialog id="nb-metadata">
    <form method="dialog">
     <button formmethod="dialog">
      Close
     </button>
     {"kernelspec": {"display_name": "Python [conda env:root] *", "language": "python", "name": "conda-root-py"}, "language_info": {"codemirror_mode": {"name": "ipython", "version": 3}, "file_extension": ".py", "mimetype": "text/x-python", "name": "python", "nbconvert_exporter": "python", "pygments_lexer": "ipython3", "version": "3.9.13"}, "description": "automatically exporting rdf data during interactive computing."}
    </form>
   </dialog>
  </header>
  <main>
   <table id="cells" role="none">
    <colgroup>
     <col class="nb-index">
     <col class="nb-execution_count">
     <col class="nb-cell_type">
     <col class="nb-toolbar">
     <col class="nb-started_at">
     <col class="nb-completed_at">
     <col class="nb-source">
     <col class="nb-loc">
     <col class="nb-metadata">
     <col class="nb-outputs">
    </colgroup>
    <tbody aria-labelledby="nb-notebook-label nb-cells-label" role="list">
     <tr hidden role="listitem">
      <th role="none" scope="col">
       index
      </th>
      <th role="none" scope="col">
       execution_count
      </th>
      <th role="none" scope="col">
       cell_type
      </th>
      <th role="none" scope="col">
       toolbar
      </th>
      <th role="none" scope="col">
       started_at
      </th>
      <th role="none" scope="col">
       completed_at
      </th>
      <th role="none" scope="col">
       source
      </th>
      <th role="none" scope="col">
       loc
      </th>
      <th role="none" scope="col">
       metadata
      </th>
      <th role="none" scope="col">
       outputs
      </th>
     </tr>
     <tr aria-labelledby="nb-cell-label 1 cell-1-cell_type" class="cell markdown" data-index="1" data-loc="1" role="listitem">
      <th class="nb-anchor" role="none" scope="row">
       <a accesskey="1" aria-describedby="nb-markdown-label nb-cell-label " aria-labelledby="nb-cell-label 1" class="nb-anchor visually-hidden" href="#1" id="1">
        1
       </a>
      </th>
      <td class="nb-execution_count" hidden role="none">
       <label class="nb-execution_count" id="cell-1-source-label">
        <span>
         In
        </span>
        <span aria-hidden="true">
         [
        </span>
        <span>
        </span>
        <span aria-hidden="true">
         ]
        </span>
       </label>
      </td>
      <td class="nb-cell_type" hidden role="none">
       <label id="cell-1-cell_type">
        markdown
       </label>
      </td>
      <td class="nb-toolbar" hidden role="none">
       <form aria-labelledby="cell-1-source-label" class="nb-toolbar" hidden id="cell-1" name="cell-1">
        <fieldset>
         <legend>
          actions
         </legend>
         <button type="submit">
          Run Cell
         </button>
        </fieldset>
       </form>
      </td>
      <td class="nb-start" hidden id="cell-1-start" role="none">
      </td>
      <td class="nb-end" hidden id="cell-1-end" role="none">
      </td>
      <td class="nb-source" hidden role="none">
       <textarea aria-labelledby="cell-1-source-label nb-source-label" class="nb-source" form="cell-1" id="cell-1-source" name="source" readonly rows="1"># inferring linked data from `IPython` run times.</textarea>
       <div aria-labelledby="nb-source-label" aria-roledescription="highlighted" role="group">
        <div class="highlight">
         <pre><span></span><code><span class="gh"># inferring linked data from `IPython` run times.</span>
</code></pre>
        </div>
       </div>
      </td>
      <td class="nb-metadata" hidden role="none">
       <button aria-controls="cell-1-metadata" aria-describedby="nb-metadata-desc" class="nb-metadata" form="cell-1" name="metadata" onclick="openDialog()">
        metadata
       </button>
       <dialog id="cell-1-metadata">
        <form>
         <button formmethod="dialog">
          Close
         </button>
         <pre><code>
        {'data': {'text/html': '<h1 id="inferring-linked-data-from-ipython-run-times"><a href="#inferring-linked-data-from-ipython-run-times">inferring linked data from IPython run times.</a></h1>\n'}}
        </code></pre>
        </form>
       </dialog>
      </td>
      <td class="nb-loc" hidden id="cell-1-loc" role="none">
       1
      </td>
      <td class="nb-outputs" role="none">
       <h1 id="inferring-linked-data-from-ipython-run-times">
        <a href="#inferring-linked-data-from-ipython-run-times">
         inferring linked data from IPython run times.
        </a>
       </h1>
      </td>
     </tr>
     <tr aria-labelledby="nb-cell-label 2 cell-2-cell_type" class="cell markdown" data-index="2" data-loc="4" role="listitem">
      <th class="nb-anchor" role="none" scope="row">
       <a accesskey="2" aria-describedby="nb-markdown-label nb-cell-label " aria-labelledby="nb-cell-label 2" class="nb-anchor visually-hidden" href="#2" id="2">
        2
       </a>
      </th>
      <td class="nb-execution_count" hidden role="none">
       <label class="nb-execution_count" id="cell-2-source-label">
        <span>
         In
        </span>
        <span aria-hidden="true">
         [
        </span>
        <span>
        </span>
        <span aria-hidden="true">
         ]
        </span>
       </label>
      </td>
      <td class="nb-cell_type" hidden role="none">
       <label id="cell-2-cell_type">
        markdown
       </label>
      </td>
      <td class="nb-toolbar" hidden role="none">
       <form aria-labelledby="cell-2-source-label" class="nb-toolbar" hidden id="cell-2" name="cell-2">
        <fieldset>
         <legend>
          actions
         </legend>
         <button type="submit">
          Run Cell
         </button>
        </fieldset>
       </form>
      </td>
      <td class="nb-start" hidden id="cell-2-start" role="none">
      </td>
      <td class="nb-end" hidden id="cell-2-end" role="none">
      </td>
      <td class="nb-source" hidden role="none">
       <textarea aria-labelledby="cell-2-source-label nb-source-label" class="nb-source" form="cell-2" id="cell-2-source" name="source" readonly rows="4">automatically exporting rdf data during interactive computing.

we'll modify `IPython`s display formatter to include a system that describes
python objects as `json` linked data.</textarea>
       <div aria-labelledby="nb-source-label" aria-roledescription="highlighted" role="group">
        <div class="highlight">
         <pre><span></span><code>automatically exporting rdf data during interactive computing.

we'll modify <span class="sb">`IPython`</span>s display formatter to include a system that describes
python objects as <span class="sb">`json`</span> linked data.
</code></pre>
        </div>
       </div>
      </td>
      <td class="nb-metadata" hidden role="none">
       <button aria-controls="cell-2-metadata" aria-describedby="nb-metadata-desc" class="nb-metadata" form="cell-2" name="metadata" onclick="openDialog()">
        metadata
       </button>
       <dialog id="cell-2-metadata">
        <form>
         <button formmethod="dialog">
          Close
         </button>
         <pre><code>
        {'data': {'text/html': "<p>automatically exporting rdf data during interactive computing.</p>\n<p>we'll modify <code>IPython</code>s display formatter to include a system that describes\npython objects as <code>json</code> linked data.</p>\n"}}
        </code></pre>
        </form>
       </dialog>
      </td>
      <td class="nb-loc" hidden id="cell-2-loc" role="none">
       4
      </td>
      <td class="nb-outputs" role="none">
       <p>
        automatically exporting rdf data during interactive computing.
       </p>
       <p>
        we'll modify
        <code>
         IPython
        </code>
        s display formatter to include a system that describes
python objects as
        <code>
         json
        </code>
        linked data.
       </p>
      </td>
     </tr>
     <tr aria-labelledby="nb-cell-label 3 cell-3-cell_type" class="cell code" data-index="3" data-loc="11" role="listitem">
      <th class="nb-anchor" role="none" scope="row">
       <a accesskey="3" aria-describedby="nb-code-label nb-cell-label cell-3-loc nb-loc-label
    cell-3-outputs-len" aria-labelledby="nb-cell-label 3" class="nb-anchor visually-hidden" href="#3" id="3">
        3
       </a>
      </th>
      <td class="nb-execution_count" hidden role="none">
       <label class="nb-execution_count" id="cell-3-source-label">
        <span>
         In
        </span>
        <span aria-hidden="true">
         [
        </span>
        <span>
         1
        </span>
        <span aria-hidden="true">
         ]
        </span>
       </label>
      </td>
      <td class="nb-cell_type" hidden role="none">
       <label id="cell-3-cell_type">
        code
       </label>
      </td>
      <td class="nb-toolbar" hidden role="none">
       <form aria-labelledby="cell-3-source-label" class="nb-toolbar" hidden id="cell-3" name="cell-3">
        <fieldset>
         <legend>
          actions
         </legend>
         <button type="submit">
          Run Cell
         </button>
        </fieldset>
       </form>
      </td>
      <td class="nb-start" hidden id="cell-3-start" role="none">
      </td>
      <td class="nb-end" hidden id="cell-3-end" role="none">
      </td>
      <td class="nb-source" role="none">
       <textarea aria-labelledby="cell-3-source-label nb-source-label" class="nb-source" form="cell-3" id="cell-3-source" name="source" readonly rows="11">    from functools import singledispatch, singledispatchmethod
    import types, gc, re, sys
    from IPython.core.formatters import DisplayFormatter, BaseFormatter, catch_format_error, JSONFormatter
    from traitlets import ObjectName, Unicode, Instance, List, Any
    from IPython import get_ipython
    from pathlib import Path
    
    TYPE, ID, GRAPH, CONTAINER, NEST, CONTEXT = "@type @id @graph @container @nest @context".split()
    MAIN = __name__ == "__main__"
    ACTIVE = "__file__" not in locals() and MAIN
    shell = get_ipython()</textarea>
       <div aria-labelledby="nb-source-label" aria-roledescription="highlighted" role="group">
        <div class="highlight">
         <pre><span></span><code>    <span class="kn">from</span> <span class="nn">functools</span> <span class="kn">import</span> <span class="n">singledispatch</span><span class="p">,</span> <span class="n">singledispatchmethod</span>
    <span class="kn">import</span> <span class="nn">types</span><span class="o">,</span> <span class="nn">gc</span><span class="o">,</span> <span class="nn">re</span><span class="o">,</span> <span class="nn">sys</span>
    <span class="kn">from</span> <span class="nn">IPython.core.formatters</span> <span class="kn">import</span> <span class="n">DisplayFormatter</span><span class="p">,</span> <span class="n">BaseFormatter</span><span class="p">,</span> <span class="n">catch_format_error</span><span class="p">,</span> <span class="n">JSONFormatter</span>
    <span class="kn">from</span> <span class="nn">traitlets</span> <span class="kn">import</span> <span class="n">ObjectName</span><span class="p">,</span> <span class="n">Unicode</span><span class="p">,</span> <span class="n">Instance</span><span class="p">,</span> <span class="n">List</span><span class="p">,</span> <span class="n">Any</span>
    <span class="kn">from</span> <span class="nn">IPython</span> <span class="kn">import</span> <span class="n">get_ipython</span>
    <span class="kn">from</span> <span class="nn">pathlib</span> <span class="kn">import</span> <span class="n">Path</span>
    
    <span class="n">TYPE</span><span class="p">,</span> <span class="n">ID</span><span class="p">,</span> <span class="n">GRAPH</span><span class="p">,</span> <span class="n">CONTAINER</span><span class="p">,</span> <span class="n">NEST</span><span class="p">,</span> <span class="n">CONTEXT</span> <span class="o">=</span> <span class="s2">"@type @id @graph @container @nest @context"</span><span class="o">.</span><span class="n">split</span><span class="p">()</span>
    <span class="n">MAIN</span> <span class="o">=</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">"__main__"</span>
    <span class="n">ACTIVE</span> <span class="o">=</span> <span class="s2">"__file__"</span> <span class="ow">not</span> <span class="ow">in</span> <span class="nb">locals</span><span class="p">()</span> <span class="ow">and</span> <span class="n">MAIN</span>
    <span class="n">shell</span> <span class="o">=</span> <span class="n">get_ipython</span><span class="p">()</span>
</code></pre>
        </div>
       </div>
      </td>
      <td class="nb-metadata" hidden role="none">
       <button aria-controls="cell-3-metadata" aria-describedby="nb-metadata-desc" class="nb-metadata" form="cell-3" name="metadata" onclick="openDialog()">
        metadata
       </button>
       <dialog id="cell-3-metadata">
        <form>
         <button formmethod="dialog">
          Close
         </button>
         <pre><code>
        {'tags': ['imports', 'constants']}
        </code></pre>
        </form>
       </dialog>
      </td>
      <td class="nb-loc" hidden id="cell-3-loc" role="none">
       11
      </td>
      <td class="nb-outputs" hidden role="none">
       <span class="nb-outputs visually-hidden" id="cell-3-outputs-len">
        0 outputs.
       </span>
       <fieldset class="nb-outputs" data-outputs="0">
        <legend aria-describedby="nb-outputs-desc" hidden id="cell-3-outputs-label">
         <span>
          Out
         </span>
         <span aria-hidden="true">
          [
         </span>
         <span>
          1
         </span>
         <span aria-hidden="true">
          ]
         </span>
        </legend>
       </fieldset>
      </td>
     </tr>
     <tr aria-labelledby="nb-cell-label 4 cell-4-cell_type" class="cell markdown" data-index="4" data-loc="7" role="listitem">
      <th class="nb-anchor" role="none" scope="row">
       <a accesskey="4" aria-describedby="nb-markdown-label nb-cell-label " aria-labelledby="nb-cell-label 4" class="nb-anchor visually-hidden" href="#4" id="4">
        4
       </a>
      </th>
      <td class="nb-execution_count" hidden role="none">
       <label class="nb-execution_count" id="cell-4-source-label">
        <span>
         In
        </span>
        <span aria-hidden="true">
         [
        </span>
        <span>
        </span>
        <span aria-hidden="true">
         ]
        </span>
       </label>
      </td>
      <td class="nb-cell_type" hidden role="none">
       <label id="cell-4-cell_type">
        markdown
       </label>
      </td>
      <td class="nb-toolbar" hidden role="none">
       <form aria-labelledby="cell-4-source-label" class="nb-toolbar" hidden id="cell-4" name="cell-4">
        <fieldset>
         <legend>
          actions
         </legend>
         <button type="submit">
          Run Cell
         </button>
        </fieldset>
       </form>
      </td>
      <td class="nb-start" hidden id="cell-4-start" role="none">
      </td>
      <td class="nb-end" hidden id="cell-4-end" role="none">
      </td>
      <td class="nb-source" hidden role="none">
       <textarea aria-labelledby="cell-4-source-label nb-source-label" class="nb-source" form="cell-4" id="cell-4-source" name="source" readonly rows="7">a `MetadataFormatter` for including linked data in `IPython` reprs.
this class carries machinery to generate:

* ids for python types and objects as urns `MetadataFormatter.get_id`
* linked data representations of python objects with `MetadataFormatter.get_graph`

`MetadataFormatter.for_type, MetadataFormatter.get_id.register, MetadataFormatter.get_graph.register` extra the expression of the linked data graphs.</textarea>
       <div aria-labelledby="nb-source-label" aria-roledescription="highlighted" role="group">
        <div class="highlight">
         <pre><span></span><code>a <span class="sb">`MetadataFormatter`</span> for including linked data in <span class="sb">`IPython`</span> reprs.
this class carries machinery to generate:

<span class="k">*</span><span class="w"> </span>ids for python types and objects as urns <span class="sb">`MetadataFormatter.get_id`</span>
<span class="k">*</span><span class="w"> </span>linked data representations of python objects with <span class="sb">`MetadataFormatter.get_graph`</span>

<span class="sb">`MetadataFormatter.for_type, MetadataFormatter.get_id.register, MetadataFormatter.get_graph.register`</span> extra the expression of the linked data graphs.
</code></pre>
        </div>
       </div>
      </td>
      <td class="nb-metadata" hidden role="none">
       <button aria-controls="cell-4-metadata" aria-describedby="nb-metadata-desc" class="nb-metadata" form="cell-4" name="metadata" onclick="openDialog()">
        metadata
       </button>
       <dialog id="cell-4-metadata">
        <form>
         <button formmethod="dialog">
          Close
         </button>
         <pre><code>
        {'data': {'text/html': '<p>a <code>MetadataFormatter</code> for including linked data in <code>IPython</code> reprs.\nthis class carries machinery to generate:</p>\n<ul>\n<li>ids for python types and objects as urns <code>MetadataFormatter.get_id</code></li>\n<li>linked data representations of python objects with <code>MetadataFormatter.get_graph</code></li>\n</ul>\n<p><code>MetadataFormatter.for_type, MetadataFormatter.get_id.register, MetadataFormatter.get_graph.register</code> extra the expression of the linked data graphs.</p>\n'}}
        </code></pre>
        </form>
       </dialog>
      </td>
      <td class="nb-loc" hidden id="cell-4-loc" role="none">
       7
      </td>
      <td class="nb-outputs" role="none">
       <p>
        a
        <code>
         MetadataFormatter
        </code>
        for including linked data in
        <code>
         IPython
        </code>
        reprs.
this class carries machinery to generate:
       </p>
       <ul>
        <li>
         ids for python types and objects as urns
         <code>
          MetadataFormatter.get_id
         </code>
        </li>
        <li>
         linked data representations of python objects with
         <code>
          MetadataFormatter.get_graph
         </code>
        </li>
       </ul>
       <p>
        <code>
         MetadataFormatter.for_type, MetadataFormatter.get_id.register, MetadataFormatter.get_graph.register
        </code>
        extra the expression of the linked data graphs.
       </p>
      </td>
     </tr>
     <tr aria-labelledby="nb-cell-label 5 cell-5-cell_type" class="cell markdown" data-index="5" data-loc="1" role="listitem">
      <th class="nb-anchor" role="none" scope="row">
       <a accesskey="5" aria-describedby="nb-markdown-label nb-cell-label " aria-labelledby="nb-cell-label 5" class="nb-anchor visually-hidden" href="#5" id="5">
        5
       </a>
      </th>
      <td class="nb-execution_count" hidden role="none">
       <label class="nb-execution_count" id="cell-5-source-label">
        <span>
         In
        </span>
        <span aria-hidden="true">
         [
        </span>
        <span>
        </span>
        <span aria-hidden="true">
         ]
        </span>
       </label>
      </td>
      <td class="nb-cell_type" hidden role="none">
       <label id="cell-5-cell_type">
        markdown
       </label>
      </td>
      <td class="nb-toolbar" hidden role="none">
       <form aria-labelledby="cell-5-source-label" class="nb-toolbar" hidden id="cell-5" name="cell-5">
        <fieldset>
         <legend>
          actions
         </legend>
         <button type="submit">
          Run Cell
         </button>
        </fieldset>
       </form>
      </td>
      <td class="nb-start" hidden id="cell-5-start" role="none">
      </td>
      <td class="nb-end" hidden id="cell-5-end" role="none">
      </td>
      <td class="nb-source" hidden role="none">
       <textarea aria-labelledby="cell-5-source-label nb-source-label" class="nb-source" form="cell-5" id="cell-5-source" name="source" readonly rows="1">## custom metadata formatter</textarea>
       <div aria-labelledby="nb-source-label" aria-roledescription="highlighted" role="group">
        <div class="highlight">
         <pre><span></span><code><span class="gu">## custom metadata formatter</span>
</code></pre>
        </div>
       </div>
      </td>
      <td class="nb-metadata" hidden role="none">
       <button aria-controls="cell-5-metadata" aria-describedby="nb-metadata-desc" class="nb-metadata" form="cell-5" name="metadata" onclick="openDialog()">
        metadata
       </button>
       <dialog id="cell-5-metadata">
        <form>
         <button formmethod="dialog">
          Close
         </button>
         <pre><code>
        {'data': {'text/html': '<h2 id="custom-metadata-formatter"><a href="#custom-metadata-formatter">custom metadata formatter</a></h2>\n'}}
        </code></pre>
        </form>
       </dialog>
      </td>
      <td class="nb-loc" hidden id="cell-5-loc" role="none">
       1
      </td>
      <td class="nb-outputs" role="none">
       <h2 id="custom-metadata-formatter">
        <a href="#custom-metadata-formatter">
         custom metadata formatter
        </a>
       </h2>
      </td>
     </tr>
     <tr aria-labelledby="nb-cell-label 6 cell-6-cell_type" class="cell code" data-index="6" data-loc="58" role="listitem">
      <th class="nb-anchor" role="none" scope="row">
       <a accesskey="6" aria-describedby="nb-code-label nb-cell-label cell-6-loc nb-loc-label
    cell-6-outputs-len" aria-labelledby="nb-cell-label 6" class="nb-anchor visually-hidden" href="#6" id="6">
        6
       </a>
      </th>
      <td class="nb-execution_count" hidden role="none">
       <label class="nb-execution_count" id="cell-6-source-label">
        <span>
         In
        </span>
        <span aria-hidden="true">
         [
        </span>
        <span>
         2
        </span>
        <span aria-hidden="true">
         ]
        </span>
       </label>
      </td>
      <td class="nb-cell_type" hidden role="none">
       <label id="cell-6-cell_type">
        code
       </label>
      </td>
      <td class="nb-toolbar" hidden role="none">
       <form aria-labelledby="cell-6-source-label" class="nb-toolbar" hidden id="cell-6" name="cell-6">
        <fieldset>
         <legend>
          actions
         </legend>
         <button type="submit">
          Run Cell
         </button>
        </fieldset>
       </form>
      </td>
      <td class="nb-start" hidden id="cell-6-start" role="none">
      </td>
      <td class="nb-end" hidden id="cell-6-end" role="none">
      </td>
      <td class="nb-source" role="none">
       <textarea aria-labelledby="cell-6-source-label nb-source-label" class="nb-source" form="cell-6" id="cell-6-source" name="source" readonly rows="58">    class MetadataFormatter(BaseFormatter):
        graph, format_type,  = List(), Unicode('application/ld+json') 
        _return_type, print_method = (list, dict), ObjectName('_repr_metadata_')
        
        @singledispatchmethod
        def get_id(self, object): return next(self.get_object(object), None)
        
        @singledispatchmethod
        def get_graph(self, object):
            data = {TYPE: self.get_id(type(object))}
            id = self.get_id(object)
            if id: 
                data.setdefault(ID, id)
                if isinstance(id, list): return [{ID: x, **data} for x in id]
            return data
        
        def get_object(self, object, filter=None):
            if isinstance(filter, str): filter = re.compile(filter)
            for referrer in (x for x in gc.get_referrers(object) if isinstance(x, dict)):
                yield from self.get_object_from_ns(referrer, object, filter=filter)

        def get_object_from_ns(self, ns, object, filter=None):
            weakref = ns.get("__weakref__")
            parent = None
            if weakref: parent = self.get_id(weakref.__objclass__)
            else:
                parent = ns.get("__module__", ns.get("__name__"))
                if parent: parent += ":"
                
            if not parent and ns is sys.modules:
                return object.__name__

            for k in (k for k, v in ns.items() if v is object and not k.startswith("_")): 
                name = F"{parent or 'noparent'}#{k}"
                if filter is not None and not filter.match(name): continue
                yield name

        def get_session_cell_id(self):
            data = get_ipython().kernel.get_parent()
            return data["metadata"]["cellId"], data["header"]["session"]
   
        def set_metadata(self, object=None, **kwargs):
            ids = dict(zip(("cell:id", "session:id"), self.get_session_cell_id()))
            node = {} if object is None else self.get_graph(object)
            if isinstance(node, dict): node = [node]
            for node in node:
                self.graph.append({**ids, **node, **kwargs})
                
            
        def __call__(self, object):
            explicit = super().__call__(object)
            if explicit:
                if isinstance(explicit, dict): self.set_metadata(**explicit)
                else: 
                    for e in explicit: self.set_metadata(**w)
            else: self.set_metadata(object)
            try: return self.graph[:]
            finally: self.graph.clear()</textarea>
       <div aria-labelledby="nb-source-label" aria-roledescription="highlighted" role="group">
        <div class="highlight">
         <pre><span></span><code>    <span class="k">class</span> <span class="nc">MetadataFormatter</span><span class="p">(</span><span class="n">BaseFormatter</span><span class="p">):</span>
        <span class="n">graph</span><span class="p">,</span> <span class="n">format_type</span><span class="p">,</span>  <span class="o">=</span> <span class="n">List</span><span class="p">(),</span> <span class="n">Unicode</span><span class="p">(</span><span class="s1">'application/ld+json'</span><span class="p">)</span> 
        <span class="n">_return_type</span><span class="p">,</span> <span class="n">print_method</span> <span class="o">=</span> <span class="p">(</span><span class="nb">list</span><span class="p">,</span> <span class="nb">dict</span><span class="p">),</span> <span class="n">ObjectName</span><span class="p">(</span><span class="s1">'_repr_metadata_'</span><span class="p">)</span>
        
        <span class="nd">@singledispatchmethod</span>
        <span class="k">def</span> <span class="nf">get_id</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">object</span><span class="p">):</span> <span class="k">return</span> <span class="nb">next</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_object</span><span class="p">(</span><span class="nb">object</span><span class="p">),</span> <span class="kc">None</span><span class="p">)</span>
        
        <span class="nd">@singledispatchmethod</span>
        <span class="k">def</span> <span class="nf">get_graph</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">object</span><span class="p">):</span>
            <span class="n">data</span> <span class="o">=</span> <span class="p">{</span><span class="n">TYPE</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_id</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="nb">object</span><span class="p">))}</span>
            <span class="nb">id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_id</span><span class="p">(</span><span class="nb">object</span><span class="p">)</span>
            <span class="k">if</span> <span class="nb">id</span><span class="p">:</span> 
                <span class="n">data</span><span class="o">.</span><span class="n">setdefault</span><span class="p">(</span><span class="n">ID</span><span class="p">,</span> <span class="nb">id</span><span class="p">)</span>
                <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="nb">id</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span> <span class="k">return</span> <span class="p">[{</span><span class="n">ID</span><span class="p">:</span> <span class="n">x</span><span class="p">,</span> <span class="o">**</span><span class="n">data</span><span class="p">}</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">id</span><span class="p">]</span>
            <span class="k">return</span> <span class="n">data</span>
        
        <span class="k">def</span> <span class="nf">get_object</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">object</span><span class="p">,</span> <span class="nb">filter</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="nb">filter</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span> <span class="nb">filter</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="nb">filter</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">referrer</span> <span class="ow">in</span> <span class="p">(</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">gc</span><span class="o">.</span><span class="n">get_referrers</span><span class="p">(</span><span class="nb">object</span><span class="p">)</span> <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="nb">dict</span><span class="p">)):</span>
                <span class="k">yield from</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_object_from_ns</span><span class="p">(</span><span class="n">referrer</span><span class="p">,</span> <span class="nb">object</span><span class="p">,</span> <span class="nb">filter</span><span class="o">=</span><span class="nb">filter</span><span class="p">)</span>

        <span class="k">def</span> <span class="nf">get_object_from_ns</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ns</span><span class="p">,</span> <span class="nb">object</span><span class="p">,</span> <span class="nb">filter</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
            <span class="n">weakref</span> <span class="o">=</span> <span class="n">ns</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">"__weakref__"</span><span class="p">)</span>
            <span class="n">parent</span> <span class="o">=</span> <span class="kc">None</span>
            <span class="k">if</span> <span class="n">weakref</span><span class="p">:</span> <span class="n">parent</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_id</span><span class="p">(</span><span class="n">weakref</span><span class="o">.</span><span class="vm">__objclass__</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">parent</span> <span class="o">=</span> <span class="n">ns</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">"__module__"</span><span class="p">,</span> <span class="n">ns</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">"__name__"</span><span class="p">))</span>
                <span class="k">if</span> <span class="n">parent</span><span class="p">:</span> <span class="n">parent</span> <span class="o">+=</span> <span class="s2">":"</span>
                
            <span class="k">if</span> <span class="ow">not</span> <span class="n">parent</span> <span class="ow">and</span> <span class="n">ns</span> <span class="ow">is</span> <span class="n">sys</span><span class="o">.</span><span class="n">modules</span><span class="p">:</span>
                <span class="k">return</span> <span class="nb">object</span><span class="o">.</span><span class="vm">__name__</span>

            <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="p">(</span><span class="n">k</span> <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">ns</span><span class="o">.</span><span class="n">items</span><span class="p">()</span> <span class="k">if</span> <span class="n">v</span> <span class="ow">is</span> <span class="nb">object</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">k</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">"_"</span><span class="p">)):</span> 
                <span class="n">name</span> <span class="o">=</span> <span class="sa">F</span><span class="s2">"</span><span class="si">{</span><span class="n">parent</span><span class="w"> </span><span class="ow">or</span><span class="w"> </span><span class="s1">'noparent'</span><span class="si">}</span><span class="s2">#</span><span class="si">{</span><span class="n">k</span><span class="si">}</span><span class="s2">"</span>
                <span class="k">if</span> <span class="nb">filter</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="ow">not</span> <span class="nb">filter</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="n">name</span><span class="p">):</span> <span class="k">continue</span>
                <span class="k">yield</span> <span class="n">name</span>

        <span class="k">def</span> <span class="nf">get_session_cell_id</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
            <span class="n">data</span> <span class="o">=</span> <span class="n">get_ipython</span><span class="p">()</span><span class="o">.</span><span class="n">kernel</span><span class="o">.</span><span class="n">get_parent</span><span class="p">()</span>
            <span class="k">return</span> <span class="n">data</span><span class="p">[</span><span class="s2">"metadata"</span><span class="p">][</span><span class="s2">"cellId"</span><span class="p">],</span> <span class="n">data</span><span class="p">[</span><span class="s2">"header"</span><span class="p">][</span><span class="s2">"session"</span><span class="p">]</span>
   
        <span class="k">def</span> <span class="nf">set_metadata</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">object</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
            <span class="n">ids</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="nb">zip</span><span class="p">((</span><span class="s2">"cell:id"</span><span class="p">,</span> <span class="s2">"session:id"</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_session_cell_id</span><span class="p">()))</span>
            <span class="n">node</span> <span class="o">=</span> <span class="p">{}</span> <span class="k">if</span> <span class="nb">object</span> <span class="ow">is</span> <span class="kc">None</span> <span class="k">else</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_graph</span><span class="p">(</span><span class="nb">object</span><span class="p">)</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">node</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span> <span class="n">node</span> <span class="o">=</span> <span class="p">[</span><span class="n">node</span><span class="p">]</span>
            <span class="k">for</span> <span class="n">node</span> <span class="ow">in</span> <span class="n">node</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">graph</span><span class="o">.</span><span class="n">append</span><span class="p">({</span><span class="o">**</span><span class="n">ids</span><span class="p">,</span> <span class="o">**</span><span class="n">node</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">})</span>
                
            
        <span class="k">def</span> <span class="fm">__call__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">object</span><span class="p">):</span>
            <span class="n">explicit</span> <span class="o">=</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__call__</span><span class="p">(</span><span class="nb">object</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">explicit</span><span class="p">:</span>
                <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">explicit</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span> <span class="bp">self</span><span class="o">.</span><span class="n">set_metadata</span><span class="p">(</span><span class="o">**</span><span class="n">explicit</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span> 
                    <span class="k">for</span> <span class="n">e</span> <span class="ow">in</span> <span class="n">explicit</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">set_metadata</span><span class="p">(</span><span class="o">**</span><span class="n">w</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">set_metadata</span><span class="p">(</span><span class="nb">object</span><span class="p">)</span>
            <span class="k">try</span><span class="p">:</span> <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">graph</span><span class="p">[:]</span>
            <span class="k">finally</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">graph</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
</code></pre>
        </div>
       </div>
      </td>
      <td class="nb-metadata" hidden role="none">
       <button aria-controls="cell-6-metadata" aria-describedby="nb-metadata-desc" class="nb-metadata" form="cell-6" name="metadata" onclick="openDialog()">
        metadata
       </button>
       <dialog id="cell-6-metadata">
        <form>
         <button formmethod="dialog">
          Close
         </button>
         <pre><code>
        {}
        </code></pre>
        </form>
       </dialog>
      </td>
      <td class="nb-loc" hidden id="cell-6-loc" role="none">
       58
      </td>
      <td class="nb-outputs" hidden role="none">
       <span class="nb-outputs visually-hidden" id="cell-6-outputs-len">
        0 outputs.
       </span>
       <fieldset class="nb-outputs" data-outputs="0">
        <legend aria-describedby="nb-outputs-desc" hidden id="cell-6-outputs-label">
         <span>
          Out
         </span>
         <span aria-hidden="true">
          [
         </span>
         <span>
          2
         </span>
         <span aria-hidden="true">
          ]
         </span>
        </legend>
       </fieldset>
      </td>
     </tr>
     <tr aria-labelledby="nb-cell-label 7 cell-7-cell_type" class="cell markdown" data-index="7" data-loc="1" role="listitem">
      <th class="nb-anchor" role="none" scope="row">
       <a accesskey="7" aria-describedby="nb-markdown-label nb-cell-label " aria-labelledby="nb-cell-label 7" class="nb-anchor visually-hidden" href="#7" id="7">
        7
       </a>
      </th>
      <td class="nb-execution_count" hidden role="none">
       <label class="nb-execution_count" id="cell-7-source-label">
        <span>
         In
        </span>
        <span aria-hidden="true">
         [
        </span>
        <span>
        </span>
        <span aria-hidden="true">
         ]
        </span>
       </label>
      </td>
      <td class="nb-cell_type" hidden role="none">
       <label id="cell-7-cell_type">
        markdown
       </label>
      </td>
      <td class="nb-toolbar" hidden role="none">
       <form aria-labelledby="cell-7-source-label" class="nb-toolbar" hidden id="cell-7" name="cell-7">
        <fieldset>
         <legend>
          actions
         </legend>
         <button type="submit">
          Run Cell
         </button>
        </fieldset>
       </form>
      </td>
      <td class="nb-start" hidden id="cell-7-start" role="none">
      </td>
      <td class="nb-end" hidden id="cell-7-end" role="none">
      </td>
      <td class="nb-source" hidden role="none">
       <textarea aria-labelledby="cell-7-source-label nb-source-label" class="nb-source" form="cell-7" id="cell-7-source" name="source" readonly rows="1">## custom display formatter</textarea>
       <div aria-labelledby="nb-source-label" aria-roledescription="highlighted" role="group">
        <div class="highlight">
         <pre><span></span><code><span class="gu">## custom display formatter</span>
</code></pre>
        </div>
       </div>
      </td>
      <td class="nb-metadata" hidden role="none">
       <button aria-controls="cell-7-metadata" aria-describedby="nb-metadata-desc" class="nb-metadata" form="cell-7" name="metadata" onclick="openDialog()">
        metadata
       </button>
       <dialog id="cell-7-metadata">
        <form>
         <button formmethod="dialog">
          Close
         </button>
         <pre><code>
        {'data': {'text/html': '<h2 id="custom-display-formatter"><a href="#custom-display-formatter">custom display formatter</a></h2>\n'}}
        </code></pre>
        </form>
       </dialog>
      </td>
      <td class="nb-loc" hidden id="cell-7-loc" role="none">
       1
      </td>
      <td class="nb-outputs" role="none">
       <h2 id="custom-display-formatter">
        <a href="#custom-display-formatter">
         custom display formatter
        </a>
       </h2>
      </td>
     </tr>
     <tr aria-labelledby="nb-cell-label 8 cell-8-cell_type" class="cell markdown" data-index="8" data-loc="1" role="listitem">
      <th class="nb-anchor" role="none" scope="row">
       <a accesskey="8" aria-describedby="nb-markdown-label nb-cell-label " aria-labelledby="nb-cell-label 8" class="nb-anchor visually-hidden" href="#8" id="8">
        8
       </a>
      </th>
      <td class="nb-execution_count" hidden role="none">
       <label class="nb-execution_count" id="cell-8-source-label">
        <span>
         In
        </span>
        <span aria-hidden="true">
         [
        </span>
        <span>
        </span>
        <span aria-hidden="true">
         ]
        </span>
       </label>
      </td>
      <td class="nb-cell_type" hidden role="none">
       <label id="cell-8-cell_type">
        markdown
       </label>
      </td>
      <td class="nb-toolbar" hidden role="none">
       <form aria-labelledby="cell-8-source-label" class="nb-toolbar" hidden id="cell-8" name="cell-8">
        <fieldset>
         <legend>
          actions
         </legend>
         <button type="submit">
          Run Cell
         </button>
        </fieldset>
       </form>
      </td>
      <td class="nb-start" hidden id="cell-8-start" role="none">
      </td>
      <td class="nb-end" hidden id="cell-8-end" role="none">
      </td>
      <td class="nb-source" hidden role="none">
       <textarea aria-labelledby="cell-8-source-label nb-source-label" class="nb-source" form="cell-8" id="cell-8-source" name="source" readonly rows="1">the `LinkedDataFormatter` customizes how `IPython`s normal `DisplayFormatter` expresses metadata.</textarea>
       <div aria-labelledby="nb-source-label" aria-roledescription="highlighted" role="group">
        <div class="highlight">
         <pre><span></span><code>the <span class="sb">`LinkedDataFormatter`</span> customizes how <span class="sb">`IPython`</span>s normal <span class="sb">`DisplayFormatter`</span> expresses metadata.
</code></pre>
        </div>
       </div>
      </td>
      <td class="nb-metadata" hidden role="none">
       <button aria-controls="cell-8-metadata" aria-describedby="nb-metadata-desc" class="nb-metadata" form="cell-8" name="metadata" onclick="openDialog()">
        metadata
       </button>
       <dialog id="cell-8-metadata">
        <form>
         <button formmethod="dialog">
          Close
         </button>
         <pre><code>
        {'data': {'text/html': '<p>the <code>LinkedDataFormatter</code> customizes how <code>IPython</code>s normal <code>DisplayFormatter</code> expresses metadata.</p>\n'}}
        </code></pre>
        </form>
       </dialog>
      </td>
      <td class="nb-loc" hidden id="cell-8-loc" role="none">
       1
      </td>
      <td class="nb-outputs" role="none">
       <p>
        the
        <code>
         LinkedDataFormatter
        </code>
        customizes how
        <code>
         IPython
        </code>
        s normal
        <code>
         DisplayFormatter
        </code>
        expresses metadata.
       </p>
      </td>
     </tr>
     <tr aria-labelledby="nb-cell-label 9 cell-9-cell_type" class="cell code" data-index="9" data-loc="14" role="listitem">
      <th class="nb-anchor" role="none" scope="row">
       <a accesskey="9" aria-describedby="nb-code-label nb-cell-label cell-9-loc nb-loc-label
    cell-9-outputs-len" aria-labelledby="nb-cell-label 9" class="nb-anchor visually-hidden" href="#9" id="9">
        9
       </a>
      </th>
      <td class="nb-execution_count" hidden role="none">
       <label class="nb-execution_count" id="cell-9-source-label">
        <span>
         In
        </span>
        <span aria-hidden="true">
         [
        </span>
        <span>
         3
        </span>
        <span aria-hidden="true">
         ]
        </span>
       </label>
      </td>
      <td class="nb-cell_type" hidden role="none">
       <label id="cell-9-cell_type">
        code
       </label>
      </td>
      <td class="nb-toolbar" hidden role="none">
       <form aria-labelledby="cell-9-source-label" class="nb-toolbar" hidden id="cell-9" name="cell-9">
        <fieldset>
         <legend>
          actions
         </legend>
         <button type="submit">
          Run Cell
         </button>
        </fieldset>
       </form>
      </td>
      <td class="nb-start" hidden id="cell-9-start" role="none">
      </td>
      <td class="nb-end" hidden id="cell-9-end" role="none">
      </td>
      <td class="nb-source" role="none">
       <textarea aria-labelledby="cell-9-source-label nb-source-label" class="nb-source" form="cell-9" id="cell-9-source" name="source" readonly rows="14">    class LinkedDataFormatter(DisplayFormatter):
        metadata_formatter = Instance(MetadataFormatter, args=())
        def format(self, object, include=None, exclude=None):
            data, meta = super().format(object, include, exclude)
            g = self.metadata_formatter(object)
            if g: meta[GRAPH] = g
            return data, meta
        
    def load_ipython_extension(shell=get_ipython()):
        shell.display_formatter = LinkedDataFormatter(**shell.display_formatter._trait_values)
        shell.user_ns["set_metadata"] = shell.display_formatter.metadata_formatter.set_metadata
            
    def unload_ipython_extension(shell=get_ipython()):
        shell.display_formatter = DisplayFormatter(**shell.display_formatter._trait_values)
</textarea>
       <div aria-labelledby="nb-source-label" aria-roledescription="highlighted" role="group">
        <div class="highlight">
         <pre><span></span><code>    <span class="k">class</span> <span class="nc">LinkedDataFormatter</span><span class="p">(</span><span class="n">DisplayFormatter</span><span class="p">):</span>
        <span class="n">metadata_formatter</span> <span class="o">=</span> <span class="n">Instance</span><span class="p">(</span><span class="n">MetadataFormatter</span><span class="p">,</span> <span class="n">args</span><span class="o">=</span><span class="p">())</span>
        <span class="k">def</span> <span class="nf">format</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">object</span><span class="p">,</span> <span class="n">include</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">exclude</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
            <span class="n">data</span><span class="p">,</span> <span class="n">meta</span> <span class="o">=</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="nb">object</span><span class="p">,</span> <span class="n">include</span><span class="p">,</span> <span class="n">exclude</span><span class="p">)</span>
            <span class="n">g</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">metadata_formatter</span><span class="p">(</span><span class="nb">object</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">g</span><span class="p">:</span> <span class="n">meta</span><span class="p">[</span><span class="n">GRAPH</span><span class="p">]</span> <span class="o">=</span> <span class="n">g</span>
            <span class="k">return</span> <span class="n">data</span><span class="p">,</span> <span class="n">meta</span>
        
    <span class="k">def</span> <span class="nf">load_ipython_extension</span><span class="p">(</span><span class="n">shell</span><span class="o">=</span><span class="n">get_ipython</span><span class="p">()):</span>
        <span class="n">shell</span><span class="o">.</span><span class="n">display_formatter</span> <span class="o">=</span> <span class="n">LinkedDataFormatter</span><span class="p">(</span><span class="o">**</span><span class="n">shell</span><span class="o">.</span><span class="n">display_formatter</span><span class="o">.</span><span class="n">_trait_values</span><span class="p">)</span>
        <span class="n">shell</span><span class="o">.</span><span class="n">user_ns</span><span class="p">[</span><span class="s2">"set_metadata"</span><span class="p">]</span> <span class="o">=</span> <span class="n">shell</span><span class="o">.</span><span class="n">display_formatter</span><span class="o">.</span><span class="n">metadata_formatter</span><span class="o">.</span><span class="n">set_metadata</span>
            
    <span class="k">def</span> <span class="nf">unload_ipython_extension</span><span class="p">(</span><span class="n">shell</span><span class="o">=</span><span class="n">get_ipython</span><span class="p">()):</span>
        <span class="n">shell</span><span class="o">.</span><span class="n">display_formatter</span> <span class="o">=</span> <span class="n">DisplayFormatter</span><span class="p">(</span><span class="o">**</span><span class="n">shell</span><span class="o">.</span><span class="n">display_formatter</span><span class="o">.</span><span class="n">_trait_values</span><span class="p">)</span>
</code></pre>
        </div>
       </div>
      </td>
      <td class="nb-metadata" hidden role="none">
       <button aria-controls="cell-9-metadata" aria-describedby="nb-metadata-desc" class="nb-metadata" form="cell-9" name="metadata" onclick="openDialog()">
        metadata
       </button>
       <dialog id="cell-9-metadata">
        <form>
         <button formmethod="dialog">
          Close
         </button>
         <pre><code>
        {}
        </code></pre>
        </form>
       </dialog>
      </td>
      <td class="nb-loc" hidden id="cell-9-loc" role="none">
       14
      </td>
      <td class="nb-outputs" hidden role="none">
       <span class="nb-outputs visually-hidden" id="cell-9-outputs-len">
        0 outputs.
       </span>
       <fieldset class="nb-outputs" data-outputs="0">
        <legend aria-describedby="nb-outputs-desc" hidden id="cell-9-outputs-label">
         <span>
          Out
         </span>
         <span aria-hidden="true">
          [
         </span>
         <span>
          3
         </span>
         <span aria-hidden="true">
          ]
         </span>
        </legend>
       </fieldset>
      </td>
     </tr>
     <tr aria-labelledby="nb-cell-label 10 cell-10-cell_type" class="cell markdown" data-index="10" data-loc="1" role="listitem">
      <th class="nb-anchor" role="none" scope="row">
       <a aria-describedby="nb-markdown-label nb-cell-label " aria-labelledby="nb-cell-label 10" class="nb-anchor visually-hidden" href="#10" id="10">
        10
       </a>
      </th>
      <td class="nb-execution_count" hidden role="none">
       <label class="nb-execution_count" id="cell-10-source-label">
        <span>
         In
        </span>
        <span aria-hidden="true">
         [
        </span>
        <span>
        </span>
        <span aria-hidden="true">
         ]
        </span>
       </label>
      </td>
      <td class="nb-cell_type" hidden role="none">
       <label id="cell-10-cell_type">
        markdown
       </label>
      </td>
      <td class="nb-toolbar" hidden role="none">
       <form aria-labelledby="cell-10-source-label" class="nb-toolbar" hidden id="cell-10" name="cell-10">
        <fieldset>
         <legend>
          actions
         </legend>
         <button type="submit">
          Run Cell
         </button>
        </fieldset>
       </form>
      </td>
      <td class="nb-start" hidden id="cell-10-start" role="none">
      </td>
      <td class="nb-end" hidden id="cell-10-end" role="none">
      </td>
      <td class="nb-source" hidden role="none">
       <textarea aria-labelledby="cell-10-source-label nb-source-label" class="nb-source" form="cell-10" id="cell-10-source" name="source" readonly rows="1">extend how the graph is generated for tuples and strings as examples.</textarea>
       <div aria-labelledby="nb-source-label" aria-roledescription="highlighted" role="group">
        <div class="highlight">
         <pre><span></span><code>extend how the graph is generated for tuples and strings as examples.
</code></pre>
        </div>
       </div>
      </td>
      <td class="nb-metadata" hidden role="none">
       <button aria-controls="cell-10-metadata" aria-describedby="nb-metadata-desc" class="nb-metadata" form="cell-10" name="metadata" onclick="openDialog()">
        metadata
       </button>
       <dialog id="cell-10-metadata">
        <form>
         <button formmethod="dialog">
          Close
         </button>
         <pre><code>
        {'data': {'text/html': '<p>extend how the graph is generated for tuples and strings as examples.</p>\n'}}
        </code></pre>
        </form>
       </dialog>
      </td>
      <td class="nb-loc" hidden id="cell-10-loc" role="none">
       1
      </td>
      <td class="nb-outputs" role="none">
       <p>
        extend how the graph is generated for tuples and strings as examples.
       </p>
      </td>
     </tr>
     <tr aria-labelledby="nb-cell-label 11 cell-11-cell_type" class="cell code" data-index="11" data-loc="2" role="listitem">
      <th class="nb-anchor" role="none" scope="row">
       <a aria-describedby="nb-code-label nb-cell-label cell-11-loc nb-loc-label
    cell-11-outputs-len" aria-labelledby="nb-cell-label 11" class="nb-anchor visually-hidden" href="#11" id="11">
        11
       </a>
      </th>
      <td class="nb-execution_count" hidden role="none">
       <label class="nb-execution_count" id="cell-11-source-label">
        <span>
         In
        </span>
        <span aria-hidden="true">
         [
        </span>
        <span>
         4
        </span>
        <span aria-hidden="true">
         ]
        </span>
       </label>
      </td>
      <td class="nb-cell_type" hidden role="none">
       <label id="cell-11-cell_type">
        code
       </label>
      </td>
      <td class="nb-toolbar" hidden role="none">
       <form aria-labelledby="cell-11-source-label" class="nb-toolbar" hidden id="cell-11" name="cell-11">
        <fieldset>
         <legend>
          actions
         </legend>
         <button type="submit">
          Run Cell
         </button>
        </fieldset>
       </form>
      </td>
      <td class="nb-start" hidden id="cell-11-start" role="none">
      </td>
      <td class="nb-end" hidden id="cell-11-end" role="none">
      </td>
      <td class="nb-source" role="none">
       <textarea aria-labelledby="cell-11-source-label nb-source-label" class="nb-source" form="cell-11" id="cell-11-source" name="source" readonly rows="2">    @MetadataFormatter.get_graph.register(tuple)
    def get_graph_tuple(self, object): return list(map(self.get_graph, object))</textarea>
       <div aria-labelledby="nb-source-label" aria-roledescription="highlighted" role="group">
        <div class="highlight">
         <pre><span></span><code>    <span class="nd">@MetadataFormatter</span><span class="o">.</span><span class="n">get_graph</span><span class="o">.</span><span class="n">register</span><span class="p">(</span><span class="nb">tuple</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">get_graph_tuple</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">object</span><span class="p">):</span> <span class="k">return</span> <span class="nb">list</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_graph</span><span class="p">,</span> <span class="nb">object</span><span class="p">))</span>
</code></pre>
        </div>
       </div>
      </td>
      <td class="nb-metadata" hidden role="none">
       <button aria-controls="cell-11-metadata" aria-describedby="nb-metadata-desc" class="nb-metadata" form="cell-11" name="metadata" onclick="openDialog()">
        metadata
       </button>
       <dialog id="cell-11-metadata">
        <form>
         <button formmethod="dialog">
          Close
         </button>
         <pre><code>
        {}
        </code></pre>
        </form>
       </dialog>
      </td>
      <td class="nb-loc" hidden id="cell-11-loc" role="none">
       2
      </td>
      <td class="nb-outputs" hidden role="none">
       <span class="nb-outputs visually-hidden" id="cell-11-outputs-len">
        0 outputs.
       </span>
       <fieldset class="nb-outputs" data-outputs="0">
        <legend aria-describedby="nb-outputs-desc" hidden id="cell-11-outputs-label">
         <span>
          Out
         </span>
         <span aria-hidden="true">
          [
         </span>
         <span>
          4
         </span>
         <span aria-hidden="true">
          ]
         </span>
        </legend>
       </fieldset>
      </td>
     </tr>
     <tr aria-labelledby="nb-cell-label 12 cell-12-cell_type" class="cell markdown" data-index="12" data-loc="1" role="listitem">
      <th class="nb-anchor" role="none" scope="row">
       <a aria-describedby="nb-markdown-label nb-cell-label " aria-labelledby="nb-cell-label 12" class="nb-anchor visually-hidden" href="#12" id="12">
        12
       </a>
      </th>
      <td class="nb-execution_count" hidden role="none">
       <label class="nb-execution_count" id="cell-12-source-label">
        <span>
         In
        </span>
        <span aria-hidden="true">
         [
        </span>
        <span>
        </span>
        <span aria-hidden="true">
         ]
        </span>
       </label>
      </td>
      <td class="nb-cell_type" hidden role="none">
       <label id="cell-12-cell_type">
        markdown
       </label>
      </td>
      <td class="nb-toolbar" hidden role="none">
       <form aria-labelledby="cell-12-source-label" class="nb-toolbar" hidden id="cell-12" name="cell-12">
        <fieldset>
         <legend>
          actions
         </legend>
         <button type="submit">
          Run Cell
         </button>
        </fieldset>
       </form>
      </td>
      <td class="nb-start" hidden id="cell-12-start" role="none">
      </td>
      <td class="nb-end" hidden id="cell-12-end" role="none">
      </td>
      <td class="nb-source" hidden role="none">
       <textarea aria-labelledby="cell-12-source-label nb-source-label" class="nb-source" form="cell-12" id="cell-12-source" name="source" readonly rows="1">register a different id for modules. we use their namespaces for expansion later.</textarea>
       <div aria-labelledby="nb-source-label" aria-roledescription="highlighted" role="group">
        <div class="highlight">
         <pre><span></span><code>register a different id for modules. we use their namespaces for expansion later.
</code></pre>
        </div>
       </div>
      </td>
      <td class="nb-metadata" hidden role="none">
       <button aria-controls="cell-12-metadata" aria-describedby="nb-metadata-desc" class="nb-metadata" form="cell-12" name="metadata" onclick="openDialog()">
        metadata
       </button>
       <dialog id="cell-12-metadata">
        <form>
         <button formmethod="dialog">
          Close
         </button>
         <pre><code>
        {'data': {'text/html': '<p>register a different id for modules. we use their namespaces for expansion later.</p>\n'}}
        </code></pre>
        </form>
       </dialog>
      </td>
      <td class="nb-loc" hidden id="cell-12-loc" role="none">
       1
      </td>
      <td class="nb-outputs" role="none">
       <p>
        register a different id for modules. we use their namespaces for expansion later.
       </p>
      </td>
     </tr>
     <tr aria-labelledby="nb-cell-label 13 cell-13-cell_type" class="cell code" data-index="13" data-loc="2" role="listitem">
      <th class="nb-anchor" role="none" scope="row">
       <a aria-describedby="nb-code-label nb-cell-label cell-13-loc nb-loc-label
    cell-13-outputs-len" aria-labelledby="nb-cell-label 13" class="nb-anchor visually-hidden" href="#13" id="13">
        13
       </a>
      </th>
      <td class="nb-execution_count" hidden role="none">
       <label class="nb-execution_count" id="cell-13-source-label">
        <span>
         In
        </span>
        <span aria-hidden="true">
         [
        </span>
        <span>
         5
        </span>
        <span aria-hidden="true">
         ]
        </span>
       </label>
      </td>
      <td class="nb-cell_type" hidden role="none">
       <label id="cell-13-cell_type">
        code
       </label>
      </td>
      <td class="nb-toolbar" hidden role="none">
       <form aria-labelledby="cell-13-source-label" class="nb-toolbar" hidden id="cell-13" name="cell-13">
        <fieldset>
         <legend>
          actions
         </legend>
         <button type="submit">
          Run Cell
         </button>
        </fieldset>
       </form>
      </td>
      <td class="nb-start" hidden id="cell-13-start" role="none">
      </td>
      <td class="nb-end" hidden id="cell-13-end" role="none">
      </td>
      <td class="nb-source" role="none">
       <textarea aria-labelledby="cell-13-source-label nb-source-label" class="nb-source" form="cell-13" id="cell-13-source" name="source" readonly rows="2">    @MetadataFormatter.get_id.register(types.ModuleType)
    def get_name(self, object): return object.__name__</textarea>
       <div aria-labelledby="nb-source-label" aria-roledescription="highlighted" role="group">
        <div class="highlight">
         <pre><span></span><code>    <span class="nd">@MetadataFormatter</span><span class="o">.</span><span class="n">get_id</span><span class="o">.</span><span class="n">register</span><span class="p">(</span><span class="n">types</span><span class="o">.</span><span class="n">ModuleType</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">get_name</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">object</span><span class="p">):</span> <span class="k">return</span> <span class="nb">object</span><span class="o">.</span><span class="vm">__name__</span>
</code></pre>
        </div>
       </div>
      </td>
      <td class="nb-metadata" hidden role="none">
       <button aria-controls="cell-13-metadata" aria-describedby="nb-metadata-desc" class="nb-metadata" form="cell-13" name="metadata" onclick="openDialog()">
        metadata
       </button>
       <dialog id="cell-13-metadata">
        <form>
         <button formmethod="dialog">
          Close
         </button>
         <pre><code>
        {}
        </code></pre>
        </form>
       </dialog>
      </td>
      <td class="nb-loc" hidden id="cell-13-loc" role="none">
       2
      </td>
      <td class="nb-outputs" hidden role="none">
       <span class="nb-outputs visually-hidden" id="cell-13-outputs-len">
        0 outputs.
       </span>
       <fieldset class="nb-outputs" data-outputs="0">
        <legend aria-describedby="nb-outputs-desc" hidden id="cell-13-outputs-label">
         <span>
          Out
         </span>
         <span aria-hidden="true">
          [
         </span>
         <span>
          5
         </span>
         <span aria-hidden="true">
          ]
         </span>
        </legend>
       </fieldset>
      </td>
     </tr>
     <tr aria-labelledby="nb-cell-label 14 cell-14-cell_type" class="cell markdown" data-index="14" data-loc="1" role="listitem">
      <th class="nb-anchor" role="none" scope="row">
       <a aria-describedby="nb-markdown-label nb-cell-label " aria-labelledby="nb-cell-label 14" class="nb-anchor visually-hidden" href="#14" id="14">
        14
       </a>
      </th>
      <td class="nb-execution_count" hidden role="none">
       <label class="nb-execution_count" id="cell-14-source-label">
        <span>
         In
        </span>
        <span aria-hidden="true">
         [
        </span>
        <span>
        </span>
        <span aria-hidden="true">
         ]
        </span>
       </label>
      </td>
      <td class="nb-cell_type" hidden role="none">
       <label id="cell-14-cell_type">
        markdown
       </label>
      </td>
      <td class="nb-toolbar" hidden role="none">
       <form aria-labelledby="cell-14-source-label" class="nb-toolbar" hidden id="cell-14" name="cell-14">
        <fieldset>
         <legend>
          actions
         </legend>
         <button type="submit">
          Run Cell
         </button>
        </fieldset>
       </form>
      </td>
      <td class="nb-start" hidden id="cell-14-start" role="none">
      </td>
      <td class="nb-end" hidden id="cell-14-end" role="none">
      </td>
      <td class="nb-source" hidden role="none">
       <textarea aria-labelledby="cell-14-source-label nb-source-label" class="nb-source" form="cell-14" id="cell-14-source" name="source" readonly rows="1">activate the display formatter</textarea>
       <div aria-labelledby="nb-source-label" aria-roledescription="highlighted" role="group">
        <div class="highlight">
         <pre><span></span><code>activate the display formatter
</code></pre>
        </div>
       </div>
      </td>
      <td class="nb-metadata" hidden role="none">
       <button aria-controls="cell-14-metadata" aria-describedby="nb-metadata-desc" class="nb-metadata" form="cell-14" name="metadata" onclick="openDialog()">
        metadata
       </button>
       <dialog id="cell-14-metadata">
        <form>
         <button formmethod="dialog">
          Close
         </button>
         <pre><code>
        {'data': {'text/html': '<p>activate the display formatter</p>\n'}}
        </code></pre>
        </form>
       </dialog>
      </td>
      <td class="nb-loc" hidden id="cell-14-loc" role="none">
       1
      </td>
      <td class="nb-outputs" role="none">
       <p>
        activate the display formatter
       </p>
      </td>
     </tr>
     <tr aria-labelledby="nb-cell-label 15 cell-15-cell_type" class="cell code" data-index="15" data-loc="1" role="listitem">
      <th class="nb-anchor" role="none" scope="row">
       <a aria-describedby="nb-code-label nb-cell-label cell-15-loc nb-loc-label
    cell-15-outputs-len" aria-labelledby="nb-cell-label 15" class="nb-anchor visually-hidden" href="#15" id="15">
        15
       </a>
      </th>
      <td class="nb-execution_count" hidden role="none">
       <label class="nb-execution_count" id="cell-15-source-label">
        <span>
         In
        </span>
        <span aria-hidden="true">
         [
        </span>
        <span>
         6
        </span>
        <span aria-hidden="true">
         ]
        </span>
       </label>
      </td>
      <td class="nb-cell_type" hidden role="none">
       <label id="cell-15-cell_type">
        code
       </label>
      </td>
      <td class="nb-toolbar" hidden role="none">
       <form aria-labelledby="cell-15-source-label" class="nb-toolbar" hidden id="cell-15" name="cell-15">
        <fieldset>
         <legend>
          actions
         </legend>
         <button type="submit">
          Run Cell
         </button>
        </fieldset>
       </form>
      </td>
      <td class="nb-start" hidden id="cell-15-start" role="none">
      </td>
      <td class="nb-end" hidden id="cell-15-end" role="none">
      </td>
      <td class="nb-source" role="none">
       <textarea aria-labelledby="cell-15-source-label nb-source-label" class="nb-source" form="cell-15" id="cell-15-source" name="source" readonly rows="1">    ACTIVE and load_ipython_extension()</textarea>
       <div aria-labelledby="nb-source-label" aria-roledescription="highlighted" role="group">
        <div class="highlight">
         <pre><span></span><code>    <span class="n">ACTIVE</span> <span class="ow">and</span> <span class="n">load_ipython_extension</span><span class="p">()</span>
</code></pre>
        </div>
       </div>
      </td>
      <td class="nb-metadata" hidden role="none">
       <button aria-controls="cell-15-metadata" aria-describedby="nb-metadata-desc" class="nb-metadata" form="cell-15" name="metadata" onclick="openDialog()">
        metadata
       </button>
       <dialog id="cell-15-metadata">
        <form>
         <button formmethod="dialog">
          Close
         </button>
         <pre><code>
        {}
        </code></pre>
        </form>
       </dialog>
      </td>
      <td class="nb-loc" hidden id="cell-15-loc" role="none">
       1
      </td>
      <td class="nb-outputs" hidden role="none">
       <span class="nb-outputs visually-hidden" id="cell-15-outputs-len">
        0 outputs.
       </span>
       <fieldset class="nb-outputs" data-outputs="0">
        <legend aria-describedby="nb-outputs-desc" hidden id="cell-15-outputs-label">
         <span>
          Out
         </span>
         <span aria-hidden="true">
          [
         </span>
         <span>
          6
         </span>
         <span aria-hidden="true">
          ]
         </span>
        </legend>
       </fieldset>
      </td>
     </tr>
     <tr aria-labelledby="nb-cell-label 16 cell-16-cell_type" class="cell markdown" data-index="16" data-loc="1" role="listitem">
      <th class="nb-anchor" role="none" scope="row">
       <a aria-describedby="nb-markdown-label nb-cell-label " aria-labelledby="nb-cell-label 16" class="nb-anchor visually-hidden" href="#16" id="16">
        16
       </a>
      </th>
      <td class="nb-execution_count" hidden role="none">
       <label class="nb-execution_count" id="cell-16-source-label">
        <span>
         In
        </span>
        <span aria-hidden="true">
         [
        </span>
        <span>
        </span>
        <span aria-hidden="true">
         ]
        </span>
       </label>
      </td>
      <td class="nb-cell_type" hidden role="none">
       <label id="cell-16-cell_type">
        markdown
       </label>
      </td>
      <td class="nb-toolbar" hidden role="none">
       <form aria-labelledby="cell-16-source-label" class="nb-toolbar" hidden id="cell-16" name="cell-16">
        <fieldset>
         <legend>
          actions
         </legend>
         <button type="submit">
          Run Cell
         </button>
        </fieldset>
       </form>
      </td>
      <td class="nb-start" hidden id="cell-16-start" role="none">
      </td>
      <td class="nb-end" hidden id="cell-16-end" role="none">
      </td>
      <td class="nb-source" hidden role="none">
       <textarea aria-labelledby="cell-16-source-label nb-source-label" class="nb-source" form="cell-16" id="cell-16-source" name="source" readonly rows="1">### some data for the graph</textarea>
       <div aria-labelledby="nb-source-label" aria-roledescription="highlighted" role="group">
        <div class="highlight">
         <pre><span></span><code><span class="gu">### some data for the graph</span>
</code></pre>
        </div>
       </div>
      </td>
      <td class="nb-metadata" hidden role="none">
       <button aria-controls="cell-16-metadata" aria-describedby="nb-metadata-desc" class="nb-metadata" form="cell-16" name="metadata" onclick="openDialog()">
        metadata
       </button>
       <dialog id="cell-16-metadata">
        <form>
         <button formmethod="dialog">
          Close
         </button>
         <pre><code>
        {'data': {'text/html': '<h3><a href="#some-data-for-the-graph">some data for the graph</a></h3>\n'}}
        </code></pre>
        </form>
       </dialog>
      </td>
      <td class="nb-loc" hidden id="cell-16-loc" role="none">
       1
      </td>
      <td class="nb-outputs" role="none">
       <h3>
        <a href="#some-data-for-the-graph">
         some data for the graph
        </a>
       </h3>
      </td>
     </tr>
     <tr aria-labelledby="nb-cell-label 17 cell-17-cell_type" class="cell markdown" data-index="17" data-loc="1" role="listitem">
      <th class="nb-anchor" role="none" scope="row">
       <a aria-describedby="nb-markdown-label nb-cell-label " aria-labelledby="nb-cell-label 17" class="nb-anchor visually-hidden" href="#17" id="17">
        17
       </a>
      </th>
      <td class="nb-execution_count" hidden role="none">
       <label class="nb-execution_count" id="cell-17-source-label">
        <span>
         In
        </span>
        <span aria-hidden="true">
         [
        </span>
        <span>
        </span>
        <span aria-hidden="true">
         ]
        </span>
       </label>
      </td>
      <td class="nb-cell_type" hidden role="none">
       <label id="cell-17-cell_type">
        markdown
       </label>
      </td>
      <td class="nb-toolbar" hidden role="none">
       <form aria-labelledby="cell-17-source-label" class="nb-toolbar" hidden id="cell-17" name="cell-17">
        <fieldset>
         <legend>
          actions
         </legend>
         <button type="submit">
          Run Cell
         </button>
        </fieldset>
       </form>
      </td>
      <td class="nb-start" hidden id="cell-17-start" role="none">
      </td>
      <td class="nb-end" hidden id="cell-17-end" role="none">
      </td>
      <td class="nb-source" hidden role="none">
       <textarea aria-labelledby="cell-17-source-label nb-source-label" class="nb-source" form="cell-17" id="cell-17-source" name="source" readonly rows="1">#### dataframes</textarea>
       <div aria-labelledby="nb-source-label" aria-roledescription="highlighted" role="group">
        <div class="highlight">
         <pre><span></span><code><span class="gu">#### dataframes</span>
</code></pre>
        </div>
       </div>
      </td>
      <td class="nb-metadata" hidden role="none">
       <button aria-controls="cell-17-metadata" aria-describedby="nb-metadata-desc" class="nb-metadata" form="cell-17" name="metadata" onclick="openDialog()">
        metadata
       </button>
       <dialog id="cell-17-metadata">
        <form>
         <button formmethod="dialog">
          Close
         </button>
         <pre><code>
        {'data': {'text/html': '<h4><a href="#dataframes">dataframes</a></h4>\n'}}
        </code></pre>
        </form>
       </dialog>
      </td>
      <td class="nb-loc" hidden id="cell-17-loc" role="none">
       1
      </td>
      <td class="nb-outputs" role="none">
       <h4>
        <a href="#dataframes">
         dataframes
        </a>
       </h4>
      </td>
     </tr>
     <tr aria-labelledby="nb-cell-label 18 cell-18-cell_type" class="cell markdown" data-index="18" data-loc="1" role="listitem">
      <th class="nb-anchor" role="none" scope="row">
       <a aria-describedby="nb-markdown-label nb-cell-label " aria-labelledby="nb-cell-label 18" class="nb-anchor visually-hidden" href="#18" id="18">
        18
       </a>
      </th>
      <td class="nb-execution_count" hidden role="none">
       <label class="nb-execution_count" id="cell-18-source-label">
        <span>
         In
        </span>
        <span aria-hidden="true">
         [
        </span>
        <span>
        </span>
        <span aria-hidden="true">
         ]
        </span>
       </label>
      </td>
      <td class="nb-cell_type" hidden role="none">
       <label id="cell-18-cell_type">
        markdown
       </label>
      </td>
      <td class="nb-toolbar" hidden role="none">
       <form aria-labelledby="cell-18-source-label" class="nb-toolbar" hidden id="cell-18" name="cell-18">
        <fieldset>
         <legend>
          actions
         </legend>
         <button type="submit">
          Run Cell
         </button>
        </fieldset>
       </form>
      </td>
      <td class="nb-start" hidden id="cell-18-start" role="none">
      </td>
      <td class="nb-end" hidden id="cell-18-end" role="none">
      </td>
      <td class="nb-source" hidden role="none">
       <textarea aria-labelledby="cell-18-source-label nb-source-label" class="nb-source" form="cell-18" id="cell-18-source" name="source" readonly rows="1">create a custom graph expression for `pandas.DataFrame`s</textarea>
       <div aria-labelledby="nb-source-label" aria-roledescription="highlighted" role="group">
        <div class="highlight">
         <pre><span></span><code>create a custom graph expression for <span class="sb">`pandas.DataFrame`</span>s
</code></pre>
        </div>
       </div>
      </td>
      <td class="nb-metadata" hidden role="none">
       <button aria-controls="cell-18-metadata" aria-describedby="nb-metadata-desc" class="nb-metadata" form="cell-18" name="metadata" onclick="openDialog()">
        metadata
       </button>
       <dialog id="cell-18-metadata">
        <form>
         <button formmethod="dialog">
          Close
         </button>
         <pre><code>
        {'data': {'text/html': '<p>create a custom graph expression for <code>pandas.DataFrame</code>s</p>\n'}}
        </code></pre>
        </form>
       </dialog>
      </td>
      <td class="nb-loc" hidden id="cell-18-loc" role="none">
       1
      </td>
      <td class="nb-outputs" role="none">
       <p>
        create a custom graph expression for
        <code>
         pandas.DataFrame
        </code>
        s
       </p>
      </td>
     </tr>
     <tr aria-labelledby="nb-cell-label 19 cell-19-cell_type" class="cell code" data-index="19" data-loc="5" role="listitem">
      <th class="nb-anchor" role="none" scope="row">
       <a aria-describedby="nb-code-label nb-cell-label cell-19-loc nb-loc-label
    cell-19-outputs-len" aria-labelledby="nb-cell-label 19" class="nb-anchor visually-hidden" href="#19" id="19">
        19
       </a>
      </th>
      <td class="nb-execution_count" hidden role="none">
       <label class="nb-execution_count" id="cell-19-source-label">
        <span>
         In
        </span>
        <span aria-hidden="true">
         [
        </span>
        <span>
         7
        </span>
        <span aria-hidden="true">
         ]
        </span>
       </label>
      </td>
      <td class="nb-cell_type" hidden role="none">
       <label id="cell-19-cell_type">
        code
       </label>
      </td>
      <td class="nb-toolbar" hidden role="none">
       <form aria-labelledby="cell-19-source-label" class="nb-toolbar" hidden id="cell-19" name="cell-19">
        <fieldset>
         <legend>
          actions
         </legend>
         <button type="submit">
          Run Cell
         </button>
        </fieldset>
       </form>
      </td>
      <td class="nb-start" hidden id="cell-19-start" role="none">
      </td>
      <td class="nb-end" hidden id="cell-19-end" role="none">
      </td>
      <td class="nb-source" role="none">
       <textarea aria-labelledby="cell-19-source-label nb-source-label" class="nb-source" form="cell-19" id="cell-19-source" name="source" readonly rows="5">    import pandas

    if ACTIVE:
        shell.display_formatter.metadata_formatter.get_graph.register(pandas.DataFrame
        )(lambda s, x: {ID: s.get_id(x), TYPE: s.get_id(type(x)), "pandas.DataFrame:shape": list(x.shape)})</textarea>
       <div aria-labelledby="nb-source-label" aria-roledescription="highlighted" role="group">
        <div class="highlight">
         <pre><span></span><code>    <span class="kn">import</span> <span class="nn">pandas</span>

    <span class="k">if</span> <span class="n">ACTIVE</span><span class="p">:</span>
        <span class="n">shell</span><span class="o">.</span><span class="n">display_formatter</span><span class="o">.</span><span class="n">metadata_formatter</span><span class="o">.</span><span class="n">get_graph</span><span class="o">.</span><span class="n">register</span><span class="p">(</span><span class="n">pandas</span><span class="o">.</span><span class="n">DataFrame</span>
        <span class="p">)(</span><span class="k">lambda</span> <span class="n">s</span><span class="p">,</span> <span class="n">x</span><span class="p">:</span> <span class="p">{</span><span class="n">ID</span><span class="p">:</span> <span class="n">s</span><span class="o">.</span><span class="n">get_id</span><span class="p">(</span><span class="n">x</span><span class="p">),</span> <span class="n">TYPE</span><span class="p">:</span> <span class="n">s</span><span class="o">.</span><span class="n">get_id</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">x</span><span class="p">)),</span> <span class="s2">"pandas.DataFrame:shape"</span><span class="p">:</span> <span class="nb">list</span><span class="p">(</span><span class="n">x</span><span class="o">.</span><span class="n">shape</span><span class="p">)})</span>
</code></pre>
        </div>
       </div>
      </td>
      <td class="nb-metadata" hidden role="none">
       <button aria-controls="cell-19-metadata" aria-describedby="nb-metadata-desc" class="nb-metadata" form="cell-19" name="metadata" onclick="openDialog()">
        metadata
       </button>
       <dialog id="cell-19-metadata">
        <form>
         <button formmethod="dialog">
          Close
         </button>
         <pre><code>
        {}
        </code></pre>
        </form>
       </dialog>
      </td>
      <td class="nb-loc" hidden id="cell-19-loc" role="none">
       5
      </td>
      <td class="nb-outputs" hidden role="none">
       <span class="nb-outputs visually-hidden" id="cell-19-outputs-len">
        0 outputs.
       </span>
       <fieldset class="nb-outputs" data-outputs="0">
        <legend aria-describedby="nb-outputs-desc" hidden id="cell-19-outputs-label">
         <span>
          Out
         </span>
         <span aria-hidden="true">
          [
         </span>
         <span>
          7
         </span>
         <span aria-hidden="true">
          ]
         </span>
        </legend>
       </fieldset>
      </td>
     </tr>
     <tr aria-labelledby="nb-cell-label 20 cell-20-cell_type" class="cell code" data-index="20" data-loc="4" role="listitem">
      <th class="nb-anchor" role="none" scope="row">
       <a aria-describedby="nb-code-label nb-cell-label cell-20-loc nb-loc-label
    cell-20-outputs-len" aria-labelledby="nb-cell-label 20" class="nb-anchor visually-hidden" href="#20" id="20">
        20
       </a>
      </th>
      <td class="nb-execution_count" hidden role="none">
       <label class="nb-execution_count" id="cell-20-source-label">
        <span>
         In
        </span>
        <span aria-hidden="true">
         [
        </span>
        <span>
         8
        </span>
        <span aria-hidden="true">
         ]
        </span>
       </label>
      </td>
      <td class="nb-cell_type" hidden role="none">
       <label id="cell-20-cell_type">
        code
       </label>
      </td>
      <td class="nb-toolbar" hidden role="none">
       <form aria-labelledby="cell-20-source-label" class="nb-toolbar" hidden id="cell-20" name="cell-20">
        <fieldset>
         <legend>
          actions
         </legend>
         <button type="submit">
          Run Cell
         </button>
        </fieldset>
       </form>
      </td>
      <td class="nb-start" hidden id="cell-20-start" role="none">
      </td>
      <td class="nb-end" hidden id="cell-20-end" role="none">
      </td>
      <td class="nb-source" role="none">
       <textarea aria-labelledby="cell-20-source-label nb-source-label" class="nb-source" form="cell-20" id="cell-20-source" name="source" readonly rows="4">    if ACTIVE:
        import pandas
        df = pandas.DataFrame()
        display((df, pandas, pandas.DataFrame))</textarea>
       <div aria-labelledby="nb-source-label" aria-roledescription="highlighted" role="group">
        <div class="highlight">
         <pre><span></span><code>    <span class="k">if</span> <span class="n">ACTIVE</span><span class="p">:</span>
        <span class="kn">import</span> <span class="nn">pandas</span>
        <span class="n">df</span> <span class="o">=</span> <span class="n">pandas</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">()</span>
        <span class="n">display</span><span class="p">((</span><span class="n">df</span><span class="p">,</span> <span class="n">pandas</span><span class="p">,</span> <span class="n">pandas</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">))</span>
</code></pre>
        </div>
       </div>
      </td>
      <td class="nb-metadata" hidden role="none">
       <button aria-controls="cell-20-metadata" aria-describedby="nb-metadata-desc" class="nb-metadata" form="cell-20" name="metadata" onclick="openDialog()">
        metadata
       </button>
       <dialog id="cell-20-metadata">
        <form>
         <button formmethod="dialog">
          Close
         </button>
         <pre><code>
        {}
        </code></pre>
        </form>
       </dialog>
      </td>
      <td class="nb-loc" hidden id="cell-20-loc" role="none">
       4
      </td>
      <td class="nb-outputs" role="none">
       <span class="nb-outputs visually-hidden" id="cell-20-outputs-len">
        1 outputs.
       </span>
       <fieldset class="nb-outputs" data-outputs="1">
        <legend aria-describedby="nb-outputs-desc" hidden id="cell-20-outputs-label">
         <span>
          Out
         </span>
         <span aria-hidden="true">
          [
         </span>
         <span>
          8
         </span>
         <span aria-hidden="true">
          ]
         </span>
        </legend>
        <pre class="plain">(Empty DataFrame
 Columns: []
 Index: [],
 &lt;module 'pandas' from '/home/tbone/mambaforge/lib/python3.9/site-packages/pandas/__init__.py'&gt;,
 pandas.core.frame.DataFrame)</pre>
       </fieldset>
      </td>
     </tr>
     <tr aria-labelledby="nb-cell-label 21 cell-21-cell_type" class="cell markdown" data-index="21" data-loc="1" role="listitem">
      <th class="nb-anchor" role="none" scope="row">
       <a aria-describedby="nb-markdown-label nb-cell-label " aria-labelledby="nb-cell-label 21" class="nb-anchor visually-hidden" href="#21" id="21">
        21
       </a>
      </th>
      <td class="nb-execution_count" hidden role="none">
       <label class="nb-execution_count" id="cell-21-source-label">
        <span>
         In
        </span>
        <span aria-hidden="true">
         [
        </span>
        <span>
        </span>
        <span aria-hidden="true">
         ]
        </span>
       </label>
      </td>
      <td class="nb-cell_type" hidden role="none">
       <label id="cell-21-cell_type">
        markdown
       </label>
      </td>
      <td class="nb-toolbar" hidden role="none">
       <form aria-labelledby="cell-21-source-label" class="nb-toolbar" hidden id="cell-21" name="cell-21">
        <fieldset>
         <legend>
          actions
         </legend>
         <button type="submit">
          Run Cell
         </button>
        </fieldset>
       </form>
      </td>
      <td class="nb-start" hidden id="cell-21-start" role="none">
      </td>
      <td class="nb-end" hidden id="cell-21-end" role="none">
      </td>
      <td class="nb-source" hidden role="none">
       <textarea aria-labelledby="cell-21-source-label nb-source-label" class="nb-source" form="cell-21" id="cell-21-source" name="source" readonly rows="1">#### string or url</textarea>
       <div aria-labelledby="nb-source-label" aria-roledescription="highlighted" role="group">
        <div class="highlight">
         <pre><span></span><code><span class="gu">#### string or url</span>
</code></pre>
        </div>
       </div>
      </td>
      <td class="nb-metadata" hidden role="none">
       <button aria-controls="cell-21-metadata" aria-describedby="nb-metadata-desc" class="nb-metadata" form="cell-21" name="metadata" onclick="openDialog()">
        metadata
       </button>
       <dialog id="cell-21-metadata">
        <form>
         <button formmethod="dialog">
          Close
         </button>
         <pre><code>
        {'data': {'text/html': '<h4><a href="#string-or-url">string or url</a></h4>\n'}}
        </code></pre>
        </form>
       </dialog>
      </td>
      <td class="nb-loc" hidden id="cell-21-loc" role="none">
       1
      </td>
      <td class="nb-outputs" role="none">
       <h4>
        <a href="#string-or-url">
         string or url
        </a>
       </h4>
      </td>
     </tr>
     <tr aria-labelledby="nb-cell-label 22 cell-22-cell_type" class="cell markdown" data-index="22" data-loc="4" role="listitem">
      <th class="nb-anchor" role="none" scope="row">
       <a aria-describedby="nb-markdown-label nb-cell-label " aria-labelledby="nb-cell-label 22" class="nb-anchor visually-hidden" href="#22" id="22">
        22
       </a>
      </th>
      <td class="nb-execution_count" hidden role="none">
       <label class="nb-execution_count" id="cell-22-source-label">
        <span>
         In
        </span>
        <span aria-hidden="true">
         [
        </span>
        <span>
        </span>
        <span aria-hidden="true">
         ]
        </span>
       </label>
      </td>
      <td class="nb-cell_type" hidden role="none">
       <label id="cell-22-cell_type">
        markdown
       </label>
      </td>
      <td class="nb-toolbar" hidden role="none">
       <form aria-labelledby="cell-22-source-label" class="nb-toolbar" hidden id="cell-22" name="cell-22">
        <fieldset>
         <legend>
          actions
         </legend>
         <button type="submit">
          Run Cell
         </button>
        </fieldset>
       </form>
      </td>
      <td class="nb-start" hidden id="cell-22-start" role="none">
      </td>
      <td class="nb-end" hidden id="cell-22-end" role="none">
      </td>
      <td class="nb-source" hidden role="none">
       <textarea aria-labelledby="cell-22-source-label nb-source-label" class="nb-source" form="cell-22" id="cell-22-source" name="source" readonly rows="4">if there is a url hidden in a string we can elevate that as metadata
thereby linked it to a cell.

for example, this work revists https://nbviewer.org/gist/tonyfast/16d3bc82d69890949212b46040bd86e1 so we'll include that in the graph.</textarea>
       <div aria-labelledby="nb-source-label" aria-roledescription="highlighted" role="group">
        <div class="highlight">
         <pre><span></span><code>if there is a url hidden in a string we can elevate that as metadata
thereby linked it to a cell.

for example, this work revists https://nbviewer.org/gist/tonyfast/16d3bc82d69890949212b46040bd86e1 so we'll include that in the graph.
</code></pre>
        </div>
       </div>
      </td>
      <td class="nb-metadata" hidden role="none">
       <button aria-controls="cell-22-metadata" aria-describedby="nb-metadata-desc" class="nb-metadata" form="cell-22" name="metadata" onclick="openDialog()">
        metadata
       </button>
       <dialog id="cell-22-metadata">
        <form>
         <button formmethod="dialog">
          Close
         </button>
         <pre><code>
        {'data': {'text/html': '<p>if there is a url hidden in a string we can elevate that as metadata\nthereby linked it to a cell.</p>\n<p>for example, this work revists <a href="https://nbviewer.org/gist/tonyfast/16d3bc82d69890949212b46040bd86e1">https://nbviewer.org/gist/tonyfast/16d3bc82d69890949212b46040bd86e1</a> so we\'ll include that in the graph.</p>\n'}}
        </code></pre>
        </form>
       </dialog>
      </td>
      <td class="nb-loc" hidden id="cell-22-loc" role="none">
       4
      </td>
      <td class="nb-outputs" role="none">
       <p>
        if there is a url hidden in a string we can elevate that as metadata
thereby linked it to a cell.
       </p>
       <p>
        for example, this work revists
        <a href="https://nbviewer.org/gist/tonyfast/16d3bc82d69890949212b46040bd86e1">
         https://nbviewer.org/gist/tonyfast/16d3bc82d69890949212b46040bd86e1
        </a>
        so we'll include that in the graph.
       </p>
      </td>
     </tr>
     <tr aria-labelledby="nb-cell-label 23 cell-23-cell_type" class="cell code" data-index="23" data-loc="7" role="listitem">
      <th class="nb-anchor" role="none" scope="row">
       <a aria-describedby="nb-code-label nb-cell-label cell-23-loc nb-loc-label
    cell-23-outputs-len" aria-labelledby="nb-cell-label 23" class="nb-anchor visually-hidden" href="#23" id="23">
        23
       </a>
      </th>
      <td class="nb-execution_count" hidden role="none">
       <label class="nb-execution_count" id="cell-23-source-label">
        <span>
         In
        </span>
        <span aria-hidden="true">
         [
        </span>
        <span>
         9
        </span>
        <span aria-hidden="true">
         ]
        </span>
       </label>
      </td>
      <td class="nb-cell_type" hidden role="none">
       <label id="cell-23-cell_type">
        code
       </label>
      </td>
      <td class="nb-toolbar" hidden role="none">
       <form aria-labelledby="cell-23-source-label" class="nb-toolbar" hidden id="cell-23" name="cell-23">
        <fieldset>
         <legend>
          actions
         </legend>
         <button type="submit">
          Run Cell
         </button>
        </fieldset>
       </form>
      </td>
      <td class="nb-start" hidden id="cell-23-start" role="none">
      </td>
      <td class="nb-end" hidden id="cell-23-end" role="none">
      </td>
      <td class="nb-source" role="none">
       <textarea aria-labelledby="cell-23-source-label nb-source-label" class="nb-source" form="cell-23" id="cell-23-source" name="source" readonly rows="7">    @MetadataFormatter.get_id.register(str)
    def get_graph_str(self, object): 
        from urllib.parse import urlparse
        parsed = urlparse(object)
        if parsed.scheme:
            return object
    "https://nbviewer.org/gist/tonyfast/16d3bc82d69890949212b46040bd86e1"</textarea>
       <div aria-labelledby="nb-source-label" aria-roledescription="highlighted" role="group">
        <div class="highlight">
         <pre><span></span><code>    <span class="nd">@MetadataFormatter</span><span class="o">.</span><span class="n">get_id</span><span class="o">.</span><span class="n">register</span><span class="p">(</span><span class="nb">str</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">get_graph_str</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">object</span><span class="p">):</span> 
        <span class="kn">from</span> <span class="nn">urllib.parse</span> <span class="kn">import</span> <span class="n">urlparse</span>
        <span class="n">parsed</span> <span class="o">=</span> <span class="n">urlparse</span><span class="p">(</span><span class="nb">object</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">parsed</span><span class="o">.</span><span class="n">scheme</span><span class="p">:</span>
            <span class="k">return</span> <span class="nb">object</span>
    <span class="s2">"https://nbviewer.org/gist/tonyfast/16d3bc82d69890949212b46040bd86e1"</span>
</code></pre>
        </div>
       </div>
      </td>
      <td class="nb-metadata" hidden role="none">
       <button aria-controls="cell-23-metadata" aria-describedby="nb-metadata-desc" class="nb-metadata" form="cell-23" name="metadata" onclick="openDialog()">
        metadata
       </button>
       <dialog id="cell-23-metadata">
        <form>
         <button formmethod="dialog">
          Close
         </button>
         <pre><code>
        {}
        </code></pre>
        </form>
       </dialog>
      </td>
      <td class="nb-loc" hidden id="cell-23-loc" role="none">
       7
      </td>
      <td class="nb-outputs" role="none">
       <span class="nb-outputs visually-hidden" id="cell-23-outputs-len">
        1 outputs.
       </span>
       <fieldset class="nb-outputs" data-outputs="1">
        <legend aria-describedby="nb-outputs-desc" hidden id="cell-23-outputs-label">
         <span>
          Out
         </span>
         <span aria-hidden="true">
          [
         </span>
         <span>
          9
         </span>
         <span aria-hidden="true">
          ]
         </span>
        </legend>
        <pre class="plain">'https://nbviewer.org/gist/tonyfast/16d3bc82d69890949212b46040bd86e1'</pre>
       </fieldset>
      </td>
     </tr>
     <tr aria-labelledby="nb-cell-label 24 cell-24-cell_type" class="cell markdown" data-index="24" data-loc="6" role="listitem">
      <th class="nb-anchor" role="none" scope="row">
       <a aria-describedby="nb-markdown-label nb-cell-label " aria-labelledby="nb-cell-label 24" class="nb-anchor visually-hidden" href="#24" id="24">
        24
       </a>
      </th>
      <td class="nb-execution_count" hidden role="none">
       <label class="nb-execution_count" id="cell-24-source-label">
        <span>
         In
        </span>
        <span aria-hidden="true">
         [
        </span>
        <span>
        </span>
        <span aria-hidden="true">
         ]
        </span>
       </label>
      </td>
      <td class="nb-cell_type" hidden role="none">
       <label id="cell-24-cell_type">
        markdown
       </label>
      </td>
      <td class="nb-toolbar" hidden role="none">
       <form aria-labelledby="cell-24-source-label" class="nb-toolbar" hidden id="cell-24" name="cell-24">
        <fieldset>
         <legend>
          actions
         </legend>
         <button type="submit">
          Run Cell
         </button>
        </fieldset>
       </form>
      </td>
      <td class="nb-start" hidden id="cell-24-start" role="none">
      </td>
      <td class="nb-end" hidden id="cell-24-end" role="none">
      </td>
      <td class="nb-source" hidden role="none">
       <textarea aria-labelledby="cell-24-source-label nb-source-label" class="nb-source" form="cell-24" id="cell-24-source" name="source" readonly rows="6">## looking at the metadata graph

our choice of "@id" and "@type" are jsonld conventions.
through these conventions we can surface the metadata by creating
a `jsonld` context. we can ensure a consistent structure of the notebook
and thereby context.</textarea>
       <div aria-labelledby="nb-source-label" aria-roledescription="highlighted" role="group">
        <div class="highlight">
         <pre><span></span><code><span class="gu">## looking at the metadata graph</span>

our choice of "@id" and "@type" are jsonld conventions.
through these conventions we can surface the metadata by creating
a <span class="sb">`jsonld`</span> context. we can ensure a consistent structure of the notebook
and thereby context.
</code></pre>
        </div>
       </div>
      </td>
      <td class="nb-metadata" hidden role="none">
       <button aria-controls="cell-24-metadata" aria-describedby="nb-metadata-desc" class="nb-metadata" form="cell-24" name="metadata" onclick="openDialog()">
        metadata
       </button>
       <dialog id="cell-24-metadata">
        <form>
         <button formmethod="dialog">
          Close
         </button>
         <pre><code>
        {'data': {'text/html': '<h2 id="looking-at-the-metadata-graph"><a href="#looking-at-the-metadata-graph">looking at the metadata graph</a></h2>\n<p>our choice of "@id" and "@type" are jsonld conventions.\nthrough these conventions we can surface the metadata by creating\na <code>jsonld</code> context. we can ensure a consistent structure of the notebook\nand thereby context.</p>\n'}}
        </code></pre>
        </form>
       </dialog>
      </td>
      <td class="nb-loc" hidden id="cell-24-loc" role="none">
       6
      </td>
      <td class="nb-outputs" role="none">
       <h2 id="looking-at-the-metadata-graph">
        <a href="#looking-at-the-metadata-graph">
         looking at the metadata graph
        </a>
       </h2>
       <p>
        our choice of "@id" and "@type" are jsonld conventions.
through these conventions we can surface the metadata by creating
a
        <code>
         jsonld
        </code>
        context. we can ensure a consistent structure of the notebook
and thereby context.
       </p>
      </td>
     </tr>
     <tr aria-labelledby="nb-cell-label 25 cell-25-cell_type" class="cell code" data-index="25" data-loc="18" role="listitem">
      <th class="nb-anchor" role="none" scope="row">
       <a aria-describedby="nb-code-label nb-cell-label cell-25-loc nb-loc-label
    cell-25-outputs-len" aria-labelledby="nb-cell-label 25" class="nb-anchor visually-hidden" href="#25" id="25">
        25
       </a>
      </th>
      <td class="nb-execution_count" hidden role="none">
       <label class="nb-execution_count" id="cell-25-source-label">
        <span>
         In
        </span>
        <span aria-hidden="true">
         [
        </span>
        <span>
         10
        </span>
        <span aria-hidden="true">
         ]
        </span>
       </label>
      </td>
      <td class="nb-cell_type" hidden role="none">
       <label id="cell-25-cell_type">
        code
       </label>
      </td>
      <td class="nb-toolbar" hidden role="none">
       <form aria-labelledby="cell-25-source-label" class="nb-toolbar" hidden id="cell-25" name="cell-25">
        <fieldset>
         <legend>
          actions
         </legend>
         <button type="submit">
          Run Cell
         </button>
        </fieldset>
       </form>
      </td>
      <td class="nb-start" hidden id="cell-25-start" role="none">
      </td>
      <td class="nb-end" hidden id="cell-25-end" role="none">
      </td>
      <td class="nb-source" role="none">
       <textarea aria-labelledby="cell-25-source-label nb-source-label" class="nb-source" form="cell-25" id="cell-25-source" name="source" readonly rows="18">    ctx = {
        "cells": {
            ID: "nb:cell", CONTAINER: "@list", 
            CONTEXT: {
                "outputs": {CONTEXT: {"metadata": NEST}, ID: "cell:metadata"},
                "id": {ID: "cell:id", TYPE: ID},
                "cell_type": "cell:type",
                "metadata": {
                    ID: "cell:metadata",
                    CONTAINER: GRAPH,
                    CONTEXT: {
                        "tags": "rdf:name"
                    }
                },
                
            }
        },
        "@version": 1.1}</textarea>
       <div aria-labelledby="nb-source-label" aria-roledescription="highlighted" role="group">
        <div class="highlight">
         <pre><span></span><code>    <span class="n">ctx</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s2">"cells"</span><span class="p">:</span> <span class="p">{</span>
            <span class="n">ID</span><span class="p">:</span> <span class="s2">"nb:cell"</span><span class="p">,</span> <span class="n">CONTAINER</span><span class="p">:</span> <span class="s2">"@list"</span><span class="p">,</span> 
            <span class="n">CONTEXT</span><span class="p">:</span> <span class="p">{</span>
                <span class="s2">"outputs"</span><span class="p">:</span> <span class="p">{</span><span class="n">CONTEXT</span><span class="p">:</span> <span class="p">{</span><span class="s2">"metadata"</span><span class="p">:</span> <span class="n">NEST</span><span class="p">},</span> <span class="n">ID</span><span class="p">:</span> <span class="s2">"cell:metadata"</span><span class="p">},</span>
                <span class="s2">"id"</span><span class="p">:</span> <span class="p">{</span><span class="n">ID</span><span class="p">:</span> <span class="s2">"cell:id"</span><span class="p">,</span> <span class="n">TYPE</span><span class="p">:</span> <span class="n">ID</span><span class="p">},</span>
                <span class="s2">"cell_type"</span><span class="p">:</span> <span class="s2">"cell:type"</span><span class="p">,</span>
                <span class="s2">"metadata"</span><span class="p">:</span> <span class="p">{</span>
                    <span class="n">ID</span><span class="p">:</span> <span class="s2">"cell:metadata"</span><span class="p">,</span>
                    <span class="n">CONTAINER</span><span class="p">:</span> <span class="n">GRAPH</span><span class="p">,</span>
                    <span class="n">CONTEXT</span><span class="p">:</span> <span class="p">{</span>
                        <span class="s2">"tags"</span><span class="p">:</span> <span class="s2">"rdf:name"</span>
                    <span class="p">}</span>
                <span class="p">},</span>
                
            <span class="p">}</span>
        <span class="p">},</span>
        <span class="s2">"@version"</span><span class="p">:</span> <span class="mf">1.1</span><span class="p">}</span>
</code></pre>
        </div>
       </div>
      </td>
      <td class="nb-metadata" hidden role="none">
       <button aria-controls="cell-25-metadata" aria-describedby="nb-metadata-desc" class="nb-metadata" form="cell-25" name="metadata" onclick="openDialog()">
        metadata
       </button>
       <dialog id="cell-25-metadata">
        <form>
         <button formmethod="dialog">
          Close
         </button>
         <pre><code>
        {}
        </code></pre>
        </form>
       </dialog>
      </td>
      <td class="nb-loc" hidden id="cell-25-loc" role="none">
       18
      </td>
      <td class="nb-outputs" hidden role="none">
       <span class="nb-outputs visually-hidden" id="cell-25-outputs-len">
        0 outputs.
       </span>
       <fieldset class="nb-outputs" data-outputs="0">
        <legend aria-describedby="nb-outputs-desc" hidden id="cell-25-outputs-label">
         <span>
          Out
         </span>
         <span aria-hidden="true">
          [
         </span>
         <span>
          10
         </span>
         <span aria-hidden="true">
          ]
         </span>
        </legend>
       </fieldset>
      </td>
     </tr>
     <tr aria-labelledby="nb-cell-label 26 cell-26-cell_type" class="cell code" data-index="26" data-loc="3" role="listitem">
      <th class="nb-anchor" role="none" scope="row">
       <a aria-describedby="nb-code-label nb-cell-label cell-26-loc nb-loc-label
    cell-26-outputs-len" aria-labelledby="nb-cell-label 26" class="nb-anchor visually-hidden" href="#26" id="26">
        26
       </a>
      </th>
      <td class="nb-execution_count" hidden role="none">
       <label class="nb-execution_count" id="cell-26-source-label">
        <span>
         In
        </span>
        <span aria-hidden="true">
         [
        </span>
        <span>
         11
        </span>
        <span aria-hidden="true">
         ]
        </span>
       </label>
      </td>
      <td class="nb-cell_type" hidden role="none">
       <label id="cell-26-cell_type">
        code
       </label>
      </td>
      <td class="nb-toolbar" hidden role="none">
       <form aria-labelledby="cell-26-source-label" class="nb-toolbar" hidden id="cell-26" name="cell-26">
        <fieldset>
         <legend>
          actions
         </legend>
         <button type="submit">
          Run Cell
         </button>
        </fieldset>
       </form>
      </td>
      <td class="nb-start" hidden id="cell-26-start" role="none">
      </td>
      <td class="nb-end" hidden id="cell-26-end" role="none">
      </td>
      <td class="nb-source" role="none">
       <textarea aria-labelledby="cell-26-source-label nb-source-label" class="nb-source" form="cell-26" id="cell-26-source" name="source" readonly rows="3">    if ACTIVE:
        file = Path("2022-10-29-metadata-formatter.ipynb")
        data = __import__("json").loads(file.read_text())</textarea>
       <div aria-labelledby="nb-source-label" aria-roledescription="highlighted" role="group">
        <div class="highlight">
         <pre><span></span><code>    <span class="k">if</span> <span class="n">ACTIVE</span><span class="p">:</span>
        <span class="n">file</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="s2">"2022-10-29-metadata-formatter.ipynb"</span><span class="p">)</span>
        <span class="n">data</span> <span class="o">=</span> <span class="nb">__import__</span><span class="p">(</span><span class="s2">"json"</span><span class="p">)</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">file</span><span class="o">.</span><span class="n">read_text</span><span class="p">())</span>
</code></pre>
        </div>
       </div>
      </td>
      <td class="nb-metadata" hidden role="none">
       <button aria-controls="cell-26-metadata" aria-describedby="nb-metadata-desc" class="nb-metadata" form="cell-26" name="metadata" onclick="openDialog()">
        metadata
       </button>
       <dialog id="cell-26-metadata">
        <form>
         <button formmethod="dialog">
          Close
         </button>
         <pre><code>
        {}
        </code></pre>
        </form>
       </dialog>
      </td>
      <td class="nb-loc" hidden id="cell-26-loc" role="none">
       3
      </td>
      <td class="nb-outputs" hidden role="none">
       <span class="nb-outputs visually-hidden" id="cell-26-outputs-len">
        0 outputs.
       </span>
       <fieldset class="nb-outputs" data-outputs="0">
        <legend aria-describedby="nb-outputs-desc" hidden id="cell-26-outputs-label">
         <span>
          Out
         </span>
         <span aria-hidden="true">
          [
         </span>
         <span>
          11
         </span>
         <span aria-hidden="true">
          ]
         </span>
        </legend>
       </fieldset>
      </td>
     </tr>
     <tr aria-labelledby="nb-cell-label 27 cell-27-cell_type" class="cell code" data-index="27" data-loc="6" role="listitem">
      <th class="nb-anchor" role="none" scope="row">
       <a aria-describedby="nb-code-label nb-cell-label cell-27-loc nb-loc-label
    cell-27-outputs-len" aria-labelledby="nb-cell-label 27" class="nb-anchor visually-hidden" href="#27" id="27">
        27
       </a>
      </th>
      <td class="nb-execution_count" hidden role="none">
       <label class="nb-execution_count" id="cell-27-source-label">
        <span>
         In
        </span>
        <span aria-hidden="true">
         [
        </span>
        <span>
         12
        </span>
        <span aria-hidden="true">
         ]
        </span>
       </label>
      </td>
      <td class="nb-cell_type" hidden role="none">
       <label id="cell-27-cell_type">
        code
       </label>
      </td>
      <td class="nb-toolbar" hidden role="none">
       <form aria-labelledby="cell-27-source-label" class="nb-toolbar" hidden id="cell-27" name="cell-27">
        <fieldset>
         <legend>
          actions
         </legend>
         <button type="submit">
          Run Cell
         </button>
        </fieldset>
       </form>
      </td>
      <td class="nb-start" hidden id="cell-27-start" role="none">
      </td>
      <td class="nb-end" hidden id="cell-27-end" role="none">
      </td>
      <td class="nb-source" role="none">
       <textarea aria-labelledby="cell-27-source-label nb-source-label" class="nb-source" form="cell-27" id="cell-27-source" name="source" readonly rows="6">    if ACTIVE:
        from pyld import jsonld
        from IPython.display import JSON
        from_local = jsonld.compact(data, {}, options=dict(expandContext=ctx))
        set_metadata(from_local, **{"rdf:description": "all of the things we can expand from the notebook metadata."})
        display(from_local)</textarea>
       <div aria-labelledby="nb-source-label" aria-roledescription="highlighted" role="group">
        <div class="highlight">
         <pre><span></span><code>    <span class="k">if</span> <span class="n">ACTIVE</span><span class="p">:</span>
        <span class="kn">from</span> <span class="nn">pyld</span> <span class="kn">import</span> <span class="n">jsonld</span>
        <span class="kn">from</span> <span class="nn">IPython.display</span> <span class="kn">import</span> <span class="n">JSON</span>
        <span class="n">from_local</span> <span class="o">=</span> <span class="n">jsonld</span><span class="o">.</span><span class="n">compact</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="p">{},</span> <span class="n">options</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">expandContext</span><span class="o">=</span><span class="n">ctx</span><span class="p">))</span>
        <span class="n">set_metadata</span><span class="p">(</span><span class="n">from_local</span><span class="p">,</span> <span class="o">**</span><span class="p">{</span><span class="s2">"rdf:description"</span><span class="p">:</span> <span class="s2">"all of the things we can expand from the notebook metadata."</span><span class="p">})</span>
        <span class="n">display</span><span class="p">(</span><span class="n">from_local</span><span class="p">)</span>
</code></pre>
        </div>
       </div>
      </td>
      <td class="nb-metadata" hidden role="none">
       <button aria-controls="cell-27-metadata" aria-describedby="nb-metadata-desc" class="nb-metadata" form="cell-27" name="metadata" onclick="openDialog()">
        metadata
       </button>
       <dialog id="cell-27-metadata">
        <form>
         <button formmethod="dialog">
          Close
         </button>
         <pre><code>
        {}
        </code></pre>
        </form>
       </dialog>
      </td>
      <td class="nb-loc" hidden id="cell-27-loc" role="none">
       6
      </td>
      <td class="nb-outputs" role="none">
       <span class="nb-outputs visually-hidden" id="cell-27-outputs-len">
        1 outputs.
       </span>
       <fieldset class="nb-outputs" data-outputs="1">
        <legend aria-describedby="nb-outputs-desc" hidden id="cell-27-outputs-label">
         <span>
          Out
         </span>
         <span aria-hidden="true">
          [
         </span>
         <span>
          12
         </span>
         <span aria-hidden="true">
          ]
         </span>
        </legend>
        <pre class="plain">{'nb:cell': {'@list': [{'cell:id': {'@id': 'b89d004a-233f-452e-9da7-84604f291174'},
    'cell:metadata': {'@graph': {}},
    'cell:type': 'markdown'},
   {'cell:id': {'@id': '1734421e-0762-47e6-8f5f-6f3468bf7b2f'},
    'cell:metadata': {'@graph': {}},
    'cell:type': 'markdown'},
   {'cell:id': {'@id': '2f97b27e-f363-4dce-a2d5-45927c92feba'},
    'cell:metadata': {'@graph': {'rdf:name': ['imports', 'constants']}},
    'cell:type': 'code'},
   {'cell:id': {'@id': 'd2ed9bc9-c426-4bb4-98fb-bf4f3d26c299'},
    'cell:metadata': {'@graph': {}},
    'cell:type': 'markdown'},
   {'cell:id': {'@id': '1ea5f698-7263-4dc2-b24f-232e9f1dcfcd'},
    'cell:metadata': {'@graph': {}},
    'cell:type': 'markdown'},
   {'cell:id': {'@id': 'cec19c6c-affe-4378-99d9-c927f8d2e726'},
    'cell:metadata': {'@graph': {}},
    'cell:type': 'code'},
   {'cell:id': {'@id': '55478faa-bcc6-4447-9e28-607b2b6bafa6'},
    'cell:metadata': {'@graph': {}},
    'cell:type': 'markdown'},
   {'cell:id': {'@id': '58291cbb-ce73-4bfa-b7ea-4c989090666a'},
    'cell:metadata': {'@graph': {}},
    'cell:type': 'markdown'},
   {'cell:id': {'@id': '2069ae29-068c-4f0b-ab52-68ea31169358'},
    'cell:metadata': {'@graph': {}},
    'cell:type': 'code'},
   {'cell:id': {'@id': '12548308-caf8-4760-8650-acc8fb13fa6d'},
    'cell:metadata': {'@graph': {}},
    'cell:type': 'markdown'},
   {'cell:id': {'@id': '0aa91bd4-ef7e-4447-8572-f8e5db6af7fd'},
    'cell:metadata': {'@graph': {}},
    'cell:type': 'code'},
   {'cell:id': {'@id': '22717127-56b3-4e8d-833e-21ba302cab49'},
    'cell:metadata': {'@graph': {}},
    'cell:type': 'markdown'},
   {'cell:id': {'@id': '131bd548-e951-4a6e-b759-c7630bc6e20e'},
    'cell:metadata': {'@graph': {}},
    'cell:type': 'code'},
   {'cell:id': {'@id': '4dc89ef5-0fd5-4510-9399-2a45ab27bef3'},
    'cell:metadata': {'@graph': {}},
    'cell:type': 'markdown'},
   {'cell:id': {'@id': 'f121d061-df1c-4a41-8dac-de2ffabc54db'},
    'cell:metadata': {'@graph': {}},
    'cell:type': 'code'},
   {'cell:id': {'@id': '01efe602-d5c1-4945-a3f7-fdae95ac4349'},
    'cell:metadata': {'@graph': {}},
    'cell:type': 'markdown'},
   {'cell:id': {'@id': '50d9dcf9-18f4-4eb7-9a9a-cc3e14b3b2e2'},
    'cell:metadata': {'@graph': {}},
    'cell:type': 'markdown'},
   {'cell:id': {'@id': 'f1227a1b-dbd7-4923-9f04-6b7db2e9828f'},
    'cell:metadata': {'@graph': {}},
    'cell:type': 'markdown'},
   {'cell:id': {'@id': '37e64bd4-d119-470b-b480-44778d33c549'},
    'cell:metadata': {'@graph': {}},
    'cell:type': 'code'},
   {'cell:id': {'@id': 'e3a8b43e-aaeb-4b7a-9ccb-4485ae0689a0'},
    'cell:metadata': [{'@graph': {}},
     {'@graph': [{'@id': '__main__:#df',
        '@type': 'pandas.io.xml:#DataFrame',
        'cell:id': 'e3a8b43e-aaeb-4b7a-9ccb-4485ae0689a0',
        'pandas.DataFrame:shape': [0, 0],
        'session:id': 'f96335f1-429c-4c08-a07e-9aa81224d66d'},
       {'@id': 'pandas',
        '@type': 'types:#ModuleType',
        'cell:id': 'e3a8b43e-aaeb-4b7a-9ccb-4485ae0689a0',
        'session:id': 'f96335f1-429c-4c08-a07e-9aa81224d66d'},
       {'@id': 'pandas.io.xml:#DataFrame',
        '@type': 'builtins:#type',
        'cell:id': 'e3a8b43e-aaeb-4b7a-9ccb-4485ae0689a0',
        'session:id': 'f96335f1-429c-4c08-a07e-9aa81224d66d'}]}],
    'cell:type': 'code'},
   {'cell:id': {'@id': 'e3dc5bdb-b499-4309-aa79-c0c333f97d56'},
    'cell:metadata': {'@graph': {}},
    'cell:type': 'markdown'},
   {'cell:id': {'@id': 'db25096c-b1bb-40a1-9330-e58c96f77a6c'},
    'cell:metadata': {'@graph': {}},
    'cell:type': 'markdown'},
   {'cell:id': {'@id': 'bc71a7c4-c872-454d-8616-64a741dee4f0'},
    'cell:metadata': [{'@graph': {}},
     {'@graph': {'@id': 'https://nbviewer.org/gist/tonyfast/16d3bc82d69890949212b46040bd86e1',
       '@type': 'builtins:#str',
       'cell:id': 'bc71a7c4-c872-454d-8616-64a741dee4f0',
       'session:id': 'f96335f1-429c-4c08-a07e-9aa81224d66d'}}],
    'cell:type': 'code'},
   {'cell:id': {'@id': '67ce52b5-20b8-4adf-8518-6368d3c24303'},
    'cell:metadata': {'@graph': {}},
    'cell:type': 'markdown'},
   {'cell:id': {'@id': 'c4377aed-7bb8-4fa1-8dd9-518ef22511a9'},
    'cell:metadata': {'@graph': {}},
    'cell:type': 'code'},
   {'cell:id': {'@id': '24ee56a0-829c-4be6-8194-88e648e6ac11'},
    'cell:metadata': {'@graph': {}},
    'cell:type': 'code'},
   {'cell:id': {'@id': 'fc202593-9a00-4f3b-9748-c5f48b7c475e'},
    'cell:metadata': [{'@graph': {}},
     {'@graph': [{'@id': '__main__:#from_local',
        '@type': 'builtins:#dict',
        'cell:id': 'fc202593-9a00-4f3b-9748-c5f48b7c475e',
        'rdf:description': 'all of the things we can expand from the notebook metadata.',
        'session:id': 'f96335f1-429c-4c08-a07e-9aa81224d66d'},
       {'@id': '__main__:#from_local',
        '@type': 'builtins:#dict',
        'cell:id': 'fc202593-9a00-4f3b-9748-c5f48b7c475e',
        'session:id': 'f96335f1-429c-4c08-a07e-9aa81224d66d'}]}],
    'cell:type': 'code'},
   {'cell:id': {'@id': '31d8a531-2334-4243-9c78-25137ce58637'},
    'cell:metadata': {'@graph': {}},
    'cell:type': 'markdown'},
   {'cell:id': {'@id': '55ba1060-beca-4342-a780-db7fd9c8b5ac'},
    'cell:metadata': {'@graph': {}},
    'cell:type': 'code'},
   {'cell:id': {'@id': '3e3d2b0b-81b5-4193-82d6-ec27bf37eaa2'},
    'cell:metadata': [{'@graph': {}},
     {'@graph': {'@id': '__main__:#from_remote',
       '@type': 'builtins:#dict',
       'cell:id': '3e3d2b0b-81b5-4193-82d6-ec27bf37eaa2',
       'session:id': 'f96335f1-429c-4c08-a07e-9aa81224d66d'}}],
    'cell:type': 'code'},
   {'cell:id': {'@id': 'aa2688dd-5237-41ec-981a-7e9b8e2a67b0'},
    'cell:metadata': {'@graph': {}},
    'cell:type': 'markdown'},
   {'cell:id': {'@id': 'b461d781-4ec6-4d4d-a49e-251e908421f5'},
    'cell:metadata': {'@graph': {}},
    'cell:type': 'markdown'},
   {'cell:id': {'@id': '30103d50-0741-4a56-95e1-d49c880ef6c3'},
    'cell:metadata': {'@graph': {}},
    'cell:type': 'markdown'}]}}</pre>
       </fieldset>
      </td>
     </tr>
     <tr aria-labelledby="nb-cell-label 28 cell-28-cell_type" class="cell markdown" data-index="28" data-loc="1" role="listitem">
      <th class="nb-anchor" role="none" scope="row">
       <a aria-describedby="nb-markdown-label nb-cell-label " aria-labelledby="nb-cell-label 28" class="nb-anchor visually-hidden" href="#28" id="28">
        28
       </a>
      </th>
      <td class="nb-execution_count" hidden role="none">
       <label class="nb-execution_count" id="cell-28-source-label">
        <span>
         In
        </span>
        <span aria-hidden="true">
         [
        </span>
        <span>
        </span>
        <span aria-hidden="true">
         ]
        </span>
       </label>
      </td>
      <td class="nb-cell_type" hidden role="none">
       <label id="cell-28-cell_type">
        markdown
       </label>
      </td>
      <td class="nb-toolbar" hidden role="none">
       <form aria-labelledby="cell-28-source-label" class="nb-toolbar" hidden id="cell-28" name="cell-28">
        <fieldset>
         <legend>
          actions
         </legend>
         <button type="submit">
          Run Cell
         </button>
        </fieldset>
       </form>
      </td>
      <td class="nb-start" hidden id="cell-28-start" role="none">
      </td>
      <td class="nb-end" hidden id="cell-28-end" role="none">
      </td>
      <td class="nb-source" hidden role="none">
       <textarea aria-labelledby="cell-28-source-label nb-source-label" class="nb-source" form="cell-28" id="cell-28-source" name="source" readonly rows="1">when the post is published we can condense the notation.</textarea>
       <div aria-labelledby="nb-source-label" aria-roledescription="highlighted" role="group">
        <div class="highlight">
         <pre><span></span><code>when the post is published we can condense the notation.
</code></pre>
        </div>
       </div>
      </td>
      <td class="nb-metadata" hidden role="none">
       <button aria-controls="cell-28-metadata" aria-describedby="nb-metadata-desc" class="nb-metadata" form="cell-28" name="metadata" onclick="openDialog()">
        metadata
       </button>
       <dialog id="cell-28-metadata">
        <form>
         <button formmethod="dialog">
          Close
         </button>
         <pre><code>
        {'data': {'text/html': '<p>when the post is published we can condense the notation.</p>\n'}}
        </code></pre>
        </form>
       </dialog>
      </td>
      <td class="nb-loc" hidden id="cell-28-loc" role="none">
       1
      </td>
      <td class="nb-outputs" role="none">
       <p>
        when the post is published we can condense the notation.
       </p>
      </td>
     </tr>
     <tr aria-labelledby="nb-cell-label 29 cell-29-cell_type" class="cell code" data-index="29" data-loc="1" role="listitem">
      <th class="nb-anchor" role="none" scope="row">
       <a aria-describedby="nb-code-label nb-cell-label cell-29-loc nb-loc-label
    cell-29-outputs-len" aria-labelledby="nb-cell-label 29" class="nb-anchor visually-hidden" href="#29" id="29">
        29
       </a>
      </th>
      <td class="nb-execution_count" hidden role="none">
       <label class="nb-execution_count" id="cell-29-source-label">
        <span>
         In
        </span>
        <span aria-hidden="true">
         [
        </span>
        <span>
         13
        </span>
        <span aria-hidden="true">
         ]
        </span>
       </label>
      </td>
      <td class="nb-cell_type" hidden role="none">
       <label id="cell-29-cell_type">
        code
       </label>
      </td>
      <td class="nb-toolbar" hidden role="none">
       <form aria-labelledby="cell-29-source-label" class="nb-toolbar" hidden id="cell-29" name="cell-29">
        <fieldset>
         <legend>
          actions
         </legend>
         <button type="submit">
          Run Cell
         </button>
        </fieldset>
       </form>
      </td>
      <td class="nb-start" hidden id="cell-29-start" role="none">
      </td>
      <td class="nb-end" hidden id="cell-29-end" role="none">
      </td>
      <td class="nb-source" role="none">
       <textarea aria-labelledby="cell-29-source-label nb-source-label" class="nb-source" form="cell-29" id="cell-29-source" name="source" readonly rows="1">    remote = "https://raw.githubusercontent.com/tonyfast/tonyfast/main/tonyfast/xxii/oct/2022-10-29-metadata-formatter.ipynb"; remote</textarea>
       <div aria-labelledby="nb-source-label" aria-roledescription="highlighted" role="group">
        <div class="highlight">
         <pre><span></span><code>    <span class="n">remote</span> <span class="o">=</span> <span class="s2">"https://raw.githubusercontent.com/tonyfast/tonyfast/main/tonyfast/xxii/oct/2022-10-29-metadata-formatter.ipynb"</span><span class="p">;</span> <span class="n">remote</span>
</code></pre>
        </div>
       </div>
      </td>
      <td class="nb-metadata" hidden role="none">
       <button aria-controls="cell-29-metadata" aria-describedby="nb-metadata-desc" class="nb-metadata" form="cell-29" name="metadata" onclick="openDialog()">
        metadata
       </button>
       <dialog id="cell-29-metadata">
        <form>
         <button formmethod="dialog">
          Close
         </button>
         <pre><code>
        {}
        </code></pre>
        </form>
       </dialog>
      </td>
      <td class="nb-loc" hidden id="cell-29-loc" role="none">
       1
      </td>
      <td class="nb-outputs" role="none">
       <span class="nb-outputs visually-hidden" id="cell-29-outputs-len">
        1 outputs.
       </span>
       <fieldset class="nb-outputs" data-outputs="1">
        <legend aria-describedby="nb-outputs-desc" hidden id="cell-29-outputs-label">
         <span>
          Out
         </span>
         <span aria-hidden="true">
          [
         </span>
         <span>
          13
         </span>
         <span aria-hidden="true">
          ]
         </span>
        </legend>
        <pre class="plain">'https://raw.githubusercontent.com/tonyfast/tonyfast/main/tonyfast/xxii/oct/2022-10-29-metadata-formatter.ipynb'</pre>
       </fieldset>
      </td>
     </tr>
     <tr aria-labelledby="nb-cell-label 30 cell-30-cell_type" class="cell code" data-index="30" data-loc="6" role="listitem">
      <th class="nb-anchor" role="none" scope="row">
       <a aria-describedby="nb-code-label nb-cell-label cell-30-loc nb-loc-label
    cell-30-outputs-len" aria-labelledby="nb-cell-label 30" class="nb-anchor visually-hidden" href="#30" id="30">
        30
       </a>
      </th>
      <td class="nb-execution_count" hidden role="none">
       <label class="nb-execution_count" id="cell-30-source-label">
        <span>
         In
        </span>
        <span aria-hidden="true">
         [
        </span>
        <span>
         14
        </span>
        <span aria-hidden="true">
         ]
        </span>
       </label>
      </td>
      <td class="nb-cell_type" hidden role="none">
       <label id="cell-30-cell_type">
        code
       </label>
      </td>
      <td class="nb-toolbar" hidden role="none">
       <form aria-labelledby="cell-30-source-label" class="nb-toolbar" hidden id="cell-30" name="cell-30">
        <fieldset>
         <legend>
          actions
         </legend>
         <button type="submit">
          Run Cell
         </button>
        </fieldset>
       </form>
      </td>
      <td class="nb-start" hidden id="cell-30-start" role="none">
      </td>
      <td class="nb-end" hidden id="cell-30-end" role="none">
      </td>
      <td class="nb-source" role="none">
       <textarea aria-labelledby="cell-30-source-label nb-source-label" class="nb-source" form="cell-30" id="cell-30-source" name="source" readonly rows="6">    if ACTIVE:
        from_remote = jsonld.compact(
            remote, {},
            options=dict(expandContext=ctx)
        )
        display(from_remote)</textarea>
       <div aria-labelledby="nb-source-label" aria-roledescription="highlighted" role="group">
        <div class="highlight">
         <pre><span></span><code>    <span class="k">if</span> <span class="n">ACTIVE</span><span class="p">:</span>
        <span class="n">from_remote</span> <span class="o">=</span> <span class="n">jsonld</span><span class="o">.</span><span class="n">compact</span><span class="p">(</span>
            <span class="n">remote</span><span class="p">,</span> <span class="p">{},</span>
            <span class="n">options</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">expandContext</span><span class="o">=</span><span class="n">ctx</span><span class="p">)</span>
        <span class="p">)</span>
        <span class="n">display</span><span class="p">(</span><span class="n">from_remote</span><span class="p">)</span>
</code></pre>
        </div>
       </div>
      </td>
      <td class="nb-metadata" hidden role="none">
       <button aria-controls="cell-30-metadata" aria-describedby="nb-metadata-desc" class="nb-metadata" form="cell-30" name="metadata" onclick="openDialog()">
        metadata
       </button>
       <dialog id="cell-30-metadata">
        <form>
         <button formmethod="dialog">
          Close
         </button>
         <pre><code>
        {}
        </code></pre>
        </form>
       </dialog>
      </td>
      <td class="nb-loc" hidden id="cell-30-loc" role="none">
       6
      </td>
      <td class="nb-outputs" role="none">
       <span class="nb-outputs visually-hidden" id="cell-30-outputs-len">
        1 outputs.
       </span>
       <fieldset class="nb-outputs" data-outputs="1">
        <legend aria-describedby="nb-outputs-desc" hidden id="cell-30-outputs-label">
         <span>
          Out
         </span>
         <span aria-hidden="true">
          [
         </span>
         <span>
          14
         </span>
         <span aria-hidden="true">
          ]
         </span>
        </legend>
        <pre class="plain">{'nb:cell': {'@list': [{'cell:id': {'@id': 'b89d004a-233f-452e-9da7-84604f291174'},
    'cell:metadata': {'@graph': {}},
    'cell:type': 'markdown'},
   {'cell:id': {'@id': '1734421e-0762-47e6-8f5f-6f3468bf7b2f'},
    'cell:metadata': {'@graph': {}},
    'cell:type': 'markdown'},
   {'cell:id': {'@id': '2f97b27e-f363-4dce-a2d5-45927c92feba'},
    'cell:metadata': {'@graph': {'rdf:name': ['imports', 'constants']}},
    'cell:type': 'code'},
   {'cell:id': {'@id': 'd2ed9bc9-c426-4bb4-98fb-bf4f3d26c299'},
    'cell:metadata': {'@graph': {}},
    'cell:type': 'markdown'},
   {'cell:id': {'@id': '1ea5f698-7263-4dc2-b24f-232e9f1dcfcd'},
    'cell:metadata': {'@graph': {}},
    'cell:type': 'markdown'},
   {'cell:id': {'@id': 'cec19c6c-affe-4378-99d9-c927f8d2e726'},
    'cell:metadata': {'@graph': {}},
    'cell:type': 'code'},
   {'cell:id': {'@id': '55478faa-bcc6-4447-9e28-607b2b6bafa6'},
    'cell:metadata': {'@graph': {}},
    'cell:type': 'markdown'},
   {'cell:id': {'@id': '58291cbb-ce73-4bfa-b7ea-4c989090666a'},
    'cell:metadata': {'@graph': {}},
    'cell:type': 'markdown'},
   {'cell:id': {'@id': '2069ae29-068c-4f0b-ab52-68ea31169358'},
    'cell:metadata': {'@graph': {}},
    'cell:type': 'code'},
   {'cell:id': {'@id': '12548308-caf8-4760-8650-acc8fb13fa6d'},
    'cell:metadata': {'@graph': {}},
    'cell:type': 'markdown'},
   {'cell:id': {'@id': '0aa91bd4-ef7e-4447-8572-f8e5db6af7fd'},
    'cell:metadata': {'@graph': {}},
    'cell:type': 'code'},
   {'cell:id': {'@id': '22717127-56b3-4e8d-833e-21ba302cab49'},
    'cell:metadata': {'@graph': {}},
    'cell:type': 'markdown'},
   {'cell:id': {'@id': '131bd548-e951-4a6e-b759-c7630bc6e20e'},
    'cell:metadata': {'@graph': {}},
    'cell:type': 'code'},
   {'cell:id': {'@id': '4dc89ef5-0fd5-4510-9399-2a45ab27bef3'},
    'cell:metadata': {'@graph': {}},
    'cell:type': 'markdown'},
   {'cell:id': {'@id': 'f121d061-df1c-4a41-8dac-de2ffabc54db'},
    'cell:metadata': {'@graph': {}},
    'cell:type': 'code'},
   {'cell:id': {'@id': '01efe602-d5c1-4945-a3f7-fdae95ac4349'},
    'cell:metadata': {'@graph': {}},
    'cell:type': 'markdown'},
   {'cell:id': {'@id': '50d9dcf9-18f4-4eb7-9a9a-cc3e14b3b2e2'},
    'cell:metadata': {'@graph': {}},
    'cell:type': 'markdown'},
   {'cell:id': {'@id': 'f1227a1b-dbd7-4923-9f04-6b7db2e9828f'},
    'cell:metadata': {'@graph': {}},
    'cell:type': 'markdown'},
   {'cell:id': {'@id': '37e64bd4-d119-470b-b480-44778d33c549'},
    'cell:metadata': {'@graph': {}},
    'cell:type': 'code'},
   {'cell:id': {'@id': 'e3a8b43e-aaeb-4b7a-9ccb-4485ae0689a0'},
    'cell:metadata': [{'@graph': {}},
     {'@graph': [{'@id': '#df',
        '@type': 'pandas.io.xml:#DataFrame',
        'cell:id': 'e3a8b43e-aaeb-4b7a-9ccb-4485ae0689a0',
        'pandas.DataFrame:shape': [0, 0],
        'session:id': 'f96335f1-429c-4c08-a07e-9aa81224d66d'},
       {'@id': 'pandas',
        '@type': 'types:#ModuleType',
        'cell:id': 'e3a8b43e-aaeb-4b7a-9ccb-4485ae0689a0',
        'session:id': 'f96335f1-429c-4c08-a07e-9aa81224d66d'},
       {'@id': 'pandas.io.xml:#DataFrame',
        '@type': 'builtins:#type',
        'cell:id': 'e3a8b43e-aaeb-4b7a-9ccb-4485ae0689a0',
        'session:id': 'f96335f1-429c-4c08-a07e-9aa81224d66d'}]}],
    'cell:type': 'code'},
   {'cell:id': {'@id': 'e3dc5bdb-b499-4309-aa79-c0c333f97d56'},
    'cell:metadata': {'@graph': {}},
    'cell:type': 'markdown'},
   {'cell:id': {'@id': 'db25096c-b1bb-40a1-9330-e58c96f77a6c'},
    'cell:metadata': {'@graph': {}},
    'cell:type': 'markdown'},
   {'cell:id': {'@id': 'bc71a7c4-c872-454d-8616-64a741dee4f0'},
    'cell:metadata': [{'@graph': {}},
     {'@graph': {'@id': 'https://nbviewer.org/gist/tonyfast/16d3bc82d69890949212b46040bd86e1',
       '@type': 'builtins:#str',
       'cell:id': 'bc71a7c4-c872-454d-8616-64a741dee4f0',
       'session:id': 'f96335f1-429c-4c08-a07e-9aa81224d66d'}}],
    'cell:type': 'code'},
   {'cell:id': {'@id': '67ce52b5-20b8-4adf-8518-6368d3c24303'},
    'cell:metadata': {'@graph': {}},
    'cell:type': 'markdown'},
   {'cell:id': {'@id': 'c4377aed-7bb8-4fa1-8dd9-518ef22511a9'},
    'cell:metadata': {'@graph': {}},
    'cell:type': 'code'},
   {'cell:id': {'@id': '24ee56a0-829c-4be6-8194-88e648e6ac11'},
    'cell:metadata': {'@graph': {}},
    'cell:type': 'code'},
   {'cell:id': {'@id': 'fc202593-9a00-4f3b-9748-c5f48b7c475e'},
    'cell:metadata': [{'@graph': {}},
     {'@graph': [{'@id': '#from_local',
        '@type': 'builtins:#dict',
        'cell:id': 'fc202593-9a00-4f3b-9748-c5f48b7c475e',
        'rdf:description': 'all of the things we can expand from the notebook metadata.',
        'session:id': 'f96335f1-429c-4c08-a07e-9aa81224d66d'},
       {'@id': '#from_local',
        '@type': 'builtins:#dict',
        'cell:id': 'fc202593-9a00-4f3b-9748-c5f48b7c475e',
        'session:id': 'f96335f1-429c-4c08-a07e-9aa81224d66d'}]}],
    'cell:type': 'code'},
   {'cell:id': {'@id': '31d8a531-2334-4243-9c78-25137ce58637'},
    'cell:metadata': {'@graph': {}},
    'cell:type': 'markdown'},
   {'cell:id': {'@id': '55ba1060-beca-4342-a780-db7fd9c8b5ac'},
    'cell:metadata': {'@graph': {}},
    'cell:type': 'code'},
   {'cell:id': {'@id': '3e3d2b0b-81b5-4193-82d6-ec27bf37eaa2'},
    'cell:metadata': [{'@graph': {}},
     {'@graph': {'@id': '#from_remote',
       '@type': 'builtins:#dict',
       'cell:id': '3e3d2b0b-81b5-4193-82d6-ec27bf37eaa2',
       'session:id': 'f96335f1-429c-4c08-a07e-9aa81224d66d'}}],
    'cell:type': 'code'},
   {'cell:id': {'@id': 'aa2688dd-5237-41ec-981a-7e9b8e2a67b0'},
    'cell:metadata': {'@graph': {}},
    'cell:type': 'markdown'},
   {'cell:id': {'@id': 'b461d781-4ec6-4d4d-a49e-251e908421f5'},
    'cell:metadata': {'@graph': {}},
    'cell:type': 'markdown'},
   {'cell:id': {'@id': '30103d50-0741-4a56-95e1-d49c880ef6c3'},
    'cell:metadata': {'@graph': {}},
    'cell:type': 'markdown'}]}}</pre>
       </fieldset>
      </td>
     </tr>
     <tr aria-labelledby="nb-cell-label 31 cell-31-cell_type" class="cell markdown" data-index="31" data-loc="1" role="listitem">
      <th class="nb-anchor" role="none" scope="row">
       <a aria-describedby="nb-markdown-label nb-cell-label " aria-labelledby="nb-cell-label 31" class="nb-anchor visually-hidden" href="#31" id="31">
        31
       </a>
      </th>
      <td class="nb-execution_count" hidden role="none">
       <label class="nb-execution_count" id="cell-31-source-label">
        <span>
         In
        </span>
        <span aria-hidden="true">
         [
        </span>
        <span>
        </span>
        <span aria-hidden="true">
         ]
        </span>
       </label>
      </td>
      <td class="nb-cell_type" hidden role="none">
       <label id="cell-31-cell_type">
        markdown
       </label>
      </td>
      <td class="nb-toolbar" hidden role="none">
       <form aria-labelledby="cell-31-source-label" class="nb-toolbar" hidden id="cell-31" name="cell-31">
        <fieldset>
         <legend>
          actions
         </legend>
         <button type="submit">
          Run Cell
         </button>
        </fieldset>
       </form>
      </td>
      <td class="nb-start" hidden id="cell-31-start" role="none">
      </td>
      <td class="nb-end" hidden id="cell-31-end" role="none">
      </td>
      <td class="nb-source" hidden role="none">
       <textarea aria-labelledby="cell-31-source-label nb-source-label" class="nb-source" form="cell-31" id="cell-31-source" name="source" readonly rows="1">this notebook is certified to have metadata</textarea>
       <div aria-labelledby="nb-source-label" aria-roledescription="highlighted" role="group">
        <div class="highlight">
         <pre><span></span><code>this notebook is certified to have metadata
</code></pre>
        </div>
       </div>
      </td>
      <td class="nb-metadata" hidden role="none">
       <button aria-controls="cell-31-metadata" aria-describedby="nb-metadata-desc" class="nb-metadata" form="cell-31" name="metadata" onclick="openDialog()">
        metadata
       </button>
       <dialog id="cell-31-metadata">
        <form>
         <button formmethod="dialog">
          Close
         </button>
         <pre><code>
        {'data': {'text/html': '<p>this notebook is certified to have metadata</p>\n'}}
        </code></pre>
        </form>
       </dialog>
      </td>
      <td class="nb-loc" hidden id="cell-31-loc" role="none">
       1
      </td>
      <td class="nb-outputs" role="none">
       <p>
        this notebook is certified to have metadata
       </p>
      </td>
     </tr>
     <tr aria-labelledby="nb-cell-label 32 cell-32-cell_type" class="cell markdown" data-index="32" data-loc="9" role="listitem">
      <th class="nb-anchor" role="none" scope="row">
       <a aria-describedby="nb-markdown-label nb-cell-label " aria-labelledby="nb-cell-label 32" class="nb-anchor visually-hidden" href="#32" id="32">
        32
       </a>
      </th>
      <td class="nb-execution_count" hidden role="none">
       <label class="nb-execution_count" id="cell-32-source-label">
        <span>
         In
        </span>
        <span aria-hidden="true">
         [
        </span>
        <span>
        </span>
        <span aria-hidden="true">
         ]
        </span>
       </label>
      </td>
      <td class="nb-cell_type" hidden role="none">
       <label id="cell-32-cell_type">
        markdown
       </label>
      </td>
      <td class="nb-toolbar" hidden role="none">
       <form aria-labelledby="cell-32-source-label" class="nb-toolbar" hidden id="cell-32" name="cell-32">
        <fieldset>
         <legend>
          actions
         </legend>
         <button type="submit">
          Run Cell
         </button>
        </fieldset>
       </form>
      </td>
      <td class="nb-start" hidden id="cell-32-start" role="none">
      </td>
      <td class="nb-end" hidden id="cell-32-end" role="none">
      </td>
      <td class="nb-source" hidden role="none">
       <textarea aria-labelledby="cell-32-source-label nb-source-label" class="nb-source" form="cell-32" id="cell-32-source" name="source" readonly rows="9">## things we capture

in this proof of concept we don't capture much, but we do expose machinery to test this concept further and extend.

we capture:

* kernel session id which can verify the outputs are generated in the same session
* each cell id that makes it possible link back to the source cells.
* some python variable information.</textarea>
       <div aria-labelledby="nb-source-label" aria-roledescription="highlighted" role="group">
        <div class="highlight">
         <pre><span></span><code><span class="gu">## things we capture</span>

in this proof of concept we don't capture much, but we do expose machinery to test this concept further and extend.

we capture:

<span class="k">*</span><span class="w"> </span>kernel session id which can verify the outputs are generated in the same session
<span class="k">*</span><span class="w"> </span>each cell id that makes it possible link back to the source cells.
<span class="k">*</span><span class="w"> </span>some python variable information.
</code></pre>
        </div>
       </div>
      </td>
      <td class="nb-metadata" hidden role="none">
       <button aria-controls="cell-32-metadata" aria-describedby="nb-metadata-desc" class="nb-metadata" form="cell-32" name="metadata" onclick="openDialog()">
        metadata
       </button>
       <dialog id="cell-32-metadata">
        <form>
         <button formmethod="dialog">
          Close
         </button>
         <pre><code>
        {'data': {'text/html': '<h2 id="things-we-capture"><a href="#things-we-capture">things we capture</a></h2>\n<p>in this proof of concept we don\'t capture much, but we do expose machinery to test this concept further and extend.</p>\n<p>we capture:</p>\n<ul>\n<li>kernel session id which can verify the outputs are generated in the same session</li>\n<li>each cell id that makes it possible link back to the source cells.</li>\n<li>some python variable information.</li>\n</ul>\n'}}
        </code></pre>
        </form>
       </dialog>
      </td>
      <td class="nb-loc" hidden id="cell-32-loc" role="none">
       9
      </td>
      <td class="nb-outputs" role="none">
       <h2 id="things-we-capture">
        <a href="#things-we-capture">
         things we capture
        </a>
       </h2>
       <p>
        in this proof of concept we don't capture much, but we do expose machinery to test this concept further and extend.
       </p>
       <p>
        we capture:
       </p>
       <ul>
        <li>
         kernel session id which can verify the outputs are generated in the same session
        </li>
        <li>
         each cell id that makes it possible link back to the source cells.
        </li>
        <li>
         some python variable information.
        </li>
       </ul>
      </td>
     </tr>
     <tr aria-labelledby="nb-cell-label 33 cell-33-cell_type" class="cell markdown" data-index="33" data-loc="6" role="listitem">
      <th class="nb-anchor" role="none" scope="row">
       <a aria-describedby="nb-markdown-label nb-cell-label " aria-labelledby="nb-cell-label 33" class="nb-anchor visually-hidden" href="#33" id="33">
        33
       </a>
      </th>
      <td class="nb-execution_count" hidden role="none">
       <label class="nb-execution_count" id="cell-33-source-label">
        <span>
         In
        </span>
        <span aria-hidden="true">
         [
        </span>
        <span>
        </span>
        <span aria-hidden="true">
         ]
        </span>
       </label>
      </td>
      <td class="nb-cell_type" hidden role="none">
       <label id="cell-33-cell_type">
        markdown
       </label>
      </td>
      <td class="nb-toolbar" hidden role="none">
       <form aria-labelledby="cell-33-source-label" class="nb-toolbar" hidden id="cell-33" name="cell-33">
        <fieldset>
         <legend>
          actions
         </legend>
         <button type="submit">
          Run Cell
         </button>
        </fieldset>
       </form>
      </td>
      <td class="nb-start" hidden id="cell-33-start" role="none">
      </td>
      <td class="nb-end" hidden id="cell-33-end" role="none">
      </td>
      <td class="nb-source" hidden role="none">
       <textarea aria-labelledby="cell-33-source-label nb-source-label" class="nb-source" form="cell-33" id="cell-33-source" name="source" readonly rows="6">## things we can capture in the graph.

* annotations are type to id mappings.
* we could trace function calls
* with could encode imports
* we could capture variable assignment</textarea>
       <div aria-labelledby="nb-source-label" aria-roledescription="highlighted" role="group">
        <div class="highlight">
         <pre><span></span><code><span class="gu">## things we can capture in the graph.</span>

<span class="k">*</span><span class="w"> </span>annotations are type to id mappings.
<span class="k">*</span><span class="w"> </span>we could trace function calls
<span class="k">*</span><span class="w"> </span>with could encode imports
<span class="k">*</span><span class="w"> </span>we could capture variable assignment
</code></pre>
        </div>
       </div>
      </td>
      <td class="nb-metadata" hidden role="none">
       <button aria-controls="cell-33-metadata" aria-describedby="nb-metadata-desc" class="nb-metadata" form="cell-33" name="metadata" onclick="openDialog()">
        metadata
       </button>
       <dialog id="cell-33-metadata">
        <form>
         <button formmethod="dialog">
          Close
         </button>
         <pre><code>
        {'data': {'text/html': '<h2 id="things-we-can-capture-in-the-graph"><a href="#things-we-can-capture-in-the-graph">things we can capture in the graph.</a></h2>\n<ul>\n<li>annotations are type to id mappings.</li>\n<li>we could trace function calls</li>\n<li>with could encode imports</li>\n<li>we could capture variable assignment</li>\n</ul>\n'}}
        </code></pre>
        </form>
       </dialog>
      </td>
      <td class="nb-loc" hidden id="cell-33-loc" role="none">
       6
      </td>
      <td class="nb-outputs" role="none">
       <h2 id="things-we-can-capture-in-the-graph">
        <a href="#things-we-can-capture-in-the-graph">
         things we can capture in the graph.
        </a>
       </h2>
       <ul>
        <li>
         annotations are type to id mappings.
        </li>
        <li>
         we could trace function calls
        </li>
        <li>
         with could encode imports
        </li>
        <li>
         we could capture variable assignment
        </li>
       </ul>
      </td>
     </tr>
    </tbody>
   </table>
  </main>
  <footer>
   <a href="2022-11-12-async-import.html" rel="prev&gt;&lt;span aria-hidden=" true">
    &lt;asynchronous imports in python
   </a>
   <br>
   <a href="2022-10-27-axe-core-playwright-python.html" rel="next">
    invoking axe-core from python playwright
    <span aria-hidden="true">
     &gt;
    </span>
   </a>
   <br>
   <form aria-labelledby="nb-notebook-label" hidden id="notebook" name="notebook">
    <label>
     <input id="nb-edit-mode" name="edit" type="checkbox">
     edit mode
    </label>
    <button type="submit">
     Run
    </button>
   </form>
   <button accesskey="-" aria-controls="nb-visibility-dialog" onclick="openDialog()">
    show/hide
   </button>
   <button accesskey="?" aria-controls="nb-help" onclick="openDialog()">
    help
   </button>
   <dialog id="nb-settings">
    <form name="settings">
     <h1 id="nb-accessibility-settings-label">
      <a href="#nb-accessibility-settings-label">
       accessibility settings
      </a>
     </h1>
     <button formmethod="dialog">
      Close
     </button>
     <ul aria-labelledby="nb-accessibility-settings-label">
      <li>
       <h2 id="nb-notebook-layout-label">
        <a href="#nb-notebook-layout-label">
         notebook layout
        </a>
       </h2>
       <ul aria-labelledby="nb-notebook-layout-label">
        <li>
         <label id="nb-color-scheme-select">
          color scheme
          <select name="color-scheme">
           <option selected value="light">
            light mode
           </option>
           <option value="dark">
            dark mode
           </option>
          </select>
         </label>
        </li>
        <li>
         <label>
          margin
          <input max="40" min="0" name="margin" step="5" type="number" value="5">
          %
         </label>
        </li>
        <li>
         <label>
          line height
          <input max="3" min="0.5" name="line-height" step="0.1" type="number" value="1.5">
         </label>
        </li>
        <li>
         <label id="nb-cell-navigation-select">
          cell navigation
          <select name="cell-navigation">
           <option selected value="list">
            list
           </option>
           <option value="table">
            table
           </option>
           <option value="region">
            region
           </option>
           <option value="presentation">
            presentation
           </option>
           <option disabled value="grid">
            grid
           </option>
           <option disabled value="treegrid">
            treegrid
           </option>
           <option disabled value="tree">
            tree
           </option>
          </select>
         </label>
        </li>
        <li>
         <label>
          <input checked name="scroll-overflow" type="checkbox">
          scroll overflow
         </label>
        </li>
        <li>
         <label id="nb-accessibility-priority-select">
          accessibility priority
          <select name="accessibility-priority">
           <option value="AAA">
            Triple A
           </option>
           <option value="AA">
            Double A
           </option>
           <option value="A">
            Single A
           </option>
          </select>
         </label>
        </li>
        <li>
         <label>
          <input checked name="accesskey-navigation" type="checkbox">
          accesskey navigation
         </label>
        </li>
       </ul>
      </li>
      <li>
       <h2 id="nb-font-settings-label">
        <a href="#nb-font-settings-label">
         font settings
        </a>
       </h2>
       <ul aria-labelledby="nb-font-settings-label">
        <li>
         <label id="nb-font-size-select">
          font size
          <select name="font-size">
           <option value="xx-small">
            xx-small
           </option>
           <option value="x-small">
            x-small
           </option>
           <option value="small">
            small
           </option>
           <option selected value="medium">
            medium
           </option>
           <option value="120%">
            large
           </option>
           <option value="150%">
            x-large
           </option>
           <option value="200%">
            xx-large
           </option>
           <option value="300%">
            xxx-large
           </option>
           <option value="400%">
            xxxx-large
           </option>
           <option value="500%">
            xxxxx-large
           </option>
          </select>
         </label>
        </li>
        <li>
         <label id="nb-font-family-select">
          font family
          <select name="font-family">
           <option selected value="serif">
            serif
           </option>
           <option value="sans-serif">
            sans-serif
           </option>
          </select>
         </label>
        </li>
       </ul>
      </li>
      <li>
       <h2 id="nb-sound-settings-label">
        <a href="#nb-sound-settings-label">
         sound settings
        </a>
       </h2>
       <ul aria-labelledby="nb-sound-settings-label">
        <li>
         <label>
          <input name="synthetic-speech" type="checkbox">
          synthetic speech
         </label>
        </li>
        <li>
         <label>
          <input checked name="aria-live" type="checkbox">
          aria live
         </label>
        </li>
       </ul>
      </li>
     </ul>
     <details class="log">
      <summary>
       <span>
        activity log
       </span>
      </summary>
     </details>
     <table aria-labelledby="nb-activity-log-label" aria-live="polite">
      <tbody>
       <tr>
        <th hidden>
         time
        </th>
        <td>
         message
        </td>
       </tr>
      </tbody>
     </table>
    </form>
   </dialog>
   <dialog id="nb-visibility-dialog">
    <form name="visibility">
     <button formmethod="dialog">
      Close
     </button>
     <label>
      <input name="visually-hide" type="checkbox">
      visually hide
     </label>
     <fieldset disabled>
      <legend>
       visibility
      </legend>
      <table aria-label="notebook cell visibility" role="grid">
       <tbody>
        <tr>
         <th>
         </th>
         <th>
          index
         </th>
         <th>
          execution_count
         </th>
         <th>
          cell_type
         </th>
         <th>
          source
         </th>
         <th>
          outputs
         </th>
         <th>
          metadata
         </th>
         <th>
          toolbar
         </th>
         <th>
          loc
         </th>
        </tr>
        <tr class="code">
         <td>
          code
         </td>
         <td>
          <input aria-labelledby="nb-code-label nb-index-label" checked name="index" type="checkbox">
         </td>
         <td>
          <input aria-labelledby="nb-code-label nb-execution_count-label" checked name="execution_count" type="checkbox">
         </td>
         <td>
          <input aria-labelledby="nb-code-label nb-cell_type-label" name="cell_type" type="checkbox">
         </td>
         <td>
          <input aria-labelledby="nb-code-label nb-source-label" checked name="source" type="checkbox">
         </td>
         <td>
          <input aria-labelledby="nb-code-label nb-outputs-label" checked name="outputs" type="checkbox">
         </td>
         <td>
          <input aria-labelledby="nb-code-label nb-metadata-label" name="metadata" type="checkbox">
         </td>
         <td>
          <input aria-labelledby="nb-code-label nb-toolbar-label" name="toolbar" type="checkbox">
         </td>
         <td>
          <input aria-labelledby="nb-code-label nb-loc-label" name="loc" type="checkbox">
         </td>
        </tr>
        <tr class="markdown">
         <td>
          markdown
         </td>
         <td>
          <input aria-labelledby="nb-markdown-label nb-index-label" checked name="index" type="checkbox">
         </td>
         <td>
          <input aria-labelledby="nb-markdown-label nb-execution_count-label" checked name="execution_count" type="checkbox">
         </td>
         <td>
          <input aria-labelledby="nb-markdown-label nb-cell_type-label" name="cell_type" type="checkbox">
         </td>
         <td>
          <input aria-labelledby="nb-markdown-label nb-source-label" checked name="source" type="checkbox">
         </td>
         <td>
          <input aria-labelledby="nb-markdown-label nb-outputs-label" checked name="outputs" type="checkbox">
         </td>
         <td>
          <input aria-labelledby="nb-markdown-label nb-metadata-label" name="metadata" type="checkbox">
         </td>
         <td>
          <input aria-labelledby="nb-markdown-label nb-toolbar-label" name="toolbar" type="checkbox">
         </td>
         <td>
          <input aria-labelledby="nb-markdown-label nb-loc-label" name="loc" type="checkbox">
         </td>
        </tr>
        <tr class="raw">
         <td>
          raw
         </td>
         <td>
          <input aria-labelledby="nb-raw-label nb-index-label" checked name="index" type="checkbox">
         </td>
         <td>
          <input aria-labelledby="nb-raw-label nb-execution_count-label" checked name="execution_count" type="checkbox">
         </td>
         <td>
          <input aria-labelledby="nb-raw-label nb-cell_type-label" name="cell_type" type="checkbox">
         </td>
         <td>
          <input aria-labelledby="nb-raw-label nb-source-label" checked name="source" type="checkbox">
         </td>
         <td>
          <input aria-labelledby="nb-raw-label nb-outputs-label" checked name="outputs" type="checkbox">
         </td>
         <td>
          <input aria-labelledby="nb-raw-label nb-metadata-label" name="metadata" type="checkbox">
         </td>
         <td>
          <input aria-labelledby="nb-raw-label nb-toolbar-label" name="toolbar" type="checkbox">
         </td>
         <td>
          <input aria-labelledby="nb-raw-label nb-loc-label" name="loc" type="checkbox">
         </td>
        </tr>
       </tbody>
      </table>
     </fieldset>
    </form>
    <form name="expanded">
     <fieldset disabled>
      <legend>
       expand/collapse
      </legend>
      <table role="grid">
       <tbody>
        <tr>
         <th>
         </th>
         <th>
          cell
         </th>
         <th>
          source
         </th>
         <th>
          outputs
         </th>
        </tr>
        <tr class="code">
         <td>
          code
         </td>
         <td>
          <input aria-labelledby="nb-code-label nb-cell-label" checked name="cell" type="checkbox">
         </td>
         <td>
          <input aria-labelledby="nb-code-label nb-source-label" checked name="source" type="checkbox">
         </td>
         <td>
          <input aria-labelledby="nb-code-label nb-outputs-label" checked name="outputs" type="checkbox">
         </td>
        </tr>
        <tr class="markdown">
         <td>
          markdown
         </td>
         <td>
          <input aria-labelledby="nb-markdown-label nb-cell-label" checked name="cell" type="checkbox">
         </td>
         <td>
          <input aria-labelledby="nb-markdown-label nb-source-label" checked name="source" type="checkbox">
         </td>
         <td>
          <input aria-labelledby="nb-markdown-label nb-outputs-label" checked name="outputs" type="checkbox">
         </td>
        </tr>
        <tr class="raw">
         <td>
          raw
         </td>
         <td>
          <input aria-labelledby="nb-raw-label nb-cell-label" checked name="cell" type="checkbox">
         </td>
         <td>
          <input aria-labelledby="nb-raw-label nb-source-label" checked name="source" type="checkbox">
         </td>
         <td>
          <input aria-labelledby="nb-raw-label nb-outputs-label" checked name="outputs" type="checkbox">
         </td>
        </tr>
       </tbody>
      </table>
     </fieldset>
    </form>
    <details class="log">
     <summary>
      <span>
       activity log
      </span>
     </summary>
    </details>
    <table aria-labelledby="nb-activity-log-label" aria-live="polite">
     <tbody>
      <tr>
       <th hidden>
        time
       </th>
       <td>
        message
       </td>
      </tr>
     </tbody>
    </table>
   </dialog>
   <dialog id="nb-help">
    <h1>
     <a href="#notebook-help">
      notebook help
     </a>
    </h1>
    <form>
     <button formmethod="dialog">
      close
     </button>
     <h2 id="nb-defs-label">
      <a href="#nb-defs-label">
       definitions
      </a>
     </h2>
     <dl aria-labelledby="nb-defs-label">
      <dt id="nb-notebook-label">
       notebook
      </dt>
      <dd>
       a collections of
       <a href="#nb-cells-label">
        cells
       </a>
      </dd>
      <dd>
       <dl aria-labelledby="nb-notebook-label nb-defs-label">
        <dt id="nb-root-metadata-label">
         metadata
        </dt>
        <dd id="nb-root-metadata-desc">
         Notebook root-level metadata.
        </dd>
        <dd>
         <dl>
          <dt id="nb-kernelspec-label">
           kernelspec
          </dt>
          <dd>
           Kernel information.
          </dd>
          <dd>
           <dl aria-labelledby="nb-kernelspec-label">
            <dt>
             kernel name
            </dt>
            <dd>
             Name of the kernel specification.
            </dd>
            <dt>
             display name
            </dt>
            <dd>
             Name to display in UI.
            </dd>
           </dl>
          </dd>
          <dt id="nb-language_info-label">
           language info
          </dt>
          <dd>
           Kernel information.
          </dd>
          <dd>
           <dl aria-labelledby="nb-language_info-label">
            <dt>
             programming language
            </dt>
            <dd>
             The programming language which this kernel runs.
            </dd>
            <dt>
             <a>
              codemirror mode
             </a>
            </dt>
            <dd>
             The codemirror mode to use for code in this language.
            </dd>
            <dt>
             file extension
            </dt>
            <dd>
             The file extension for files in this language.
            </dd>
            <dt>
             mimetype
            </dt>
            <dd>
             The mimetype corresponding to files in this language.
            </dd>
            <dt>
             pygments lexer
            </dt>
            <dd>
             The pygments lexer to use for code in this language.
            </dd>
           </dl>
          </dd>
          <dt>
           title
          </dt>
          <dd>
           The title of the notebook document
          </dd>
          <dt>
           authors
          </dt>
          <dd>
           The author(s) of the notebook document
          </dd>
         </dl>
        </dd>
        <dt id="nb-cells-label">
         cells
        </dt>
        <dd id="nb-cells-desc">
         Array of cells of the current notebook.
        </dd>
       </dl>
      </dd>
      <dt id="nb-cell-label">
       cell
      </dt>
      <dd>
       <dl aria-labelledby="nb-cell-label nb-defs-label">
        <dt id="nb-index-label">
         index
        </dt>
        <dd id="nb-index-desc">
         the ordinal location of the cell in the notebook, counting begins from 1.
        </dd>
        <dt id="nb-source-label">
         source
        </dt>
        <dd id="nb-source-desc">
         Contents of the cell, represented as an array of lines.
        </dd>
        <dt id="nb-metadata-label">
         metadata
        </dt>
        <dd id="nb-metadata-desc">
         Cell-level metadata.
        </dd>
        <dd>
         <dl aria-labelledby="nb-metadata-label">
          <dt>
           name
          </dt>
          <dd>
          </dd>
          <dt>
           tags
          </dt>
          <dd>
          </dd>
          <dt id="nb-jupyter-label">
           jupyter
          </dt>
          <dd id="nb-jupyter-desc">
           Official Jupyter Metadata for Raw Cells
          </dd>
          <dd>
           <dl>
            <dt>
             source hidden
            </dt>
            <dd>
             Whether the source is hidden.
            </dd>
            <dt>
             outputs hidden
            </dt>
            <dd>
             Whether the outputs are hidden.
            </dd>
            <dt id="nb-execution-label">
             execution
            </dt>
            <dd id="nb-execution-desc">
             Execution time for the code in the cell. This tracks time at which messages are received from iopub or shell channels
            </dd>
            <dd>
             <dl aria-labelledby="nb-execution-label">
              <dt>
               execute input
              </dt>
              <dd>
               {'description': "header.date (in ISO 8601 format) of iopub channel's execute_input message. It indicates the time at which the kernel broadcasts an execute_input message to connected frontends", 'type': 'string'}
              </dd>
              <dt>
               execute reply
              </dt>
              <dd>
              </dd>
             </dl>
            </dd>
            <dt>
             collapsed
            </dt>
            <dd>
             Whether the cell's output is collapsed/expanded.
            </dd>
            <dt>
             scrolled
            </dt>
            <dd>
             Whether the cell's output is scrolled, unscrolled, or autoscrolled.
            </dd>
           </dl>
          </dd>
         </dl>
        </dd>
        <dt id="nb-cell_type-label">
         cell type
        </dt>
        <dd>
         the are three kinds of cells
         <dl aria-labelledby="nb-cell_type-label">
          <dt id="nb-code-label">
           code
          </dt>
          <dd id="nb-code-desc">
           Notebook code cell.
          </dd>
          <dt id="nb-markdown-label">
           markdown
          </dt>
          <dd id="nb-markdown-desc">
           Notebook markdown cell.
          </dd>
          <dt id="nb-raw-label">
           raw
          </dt>
          <dd id="nb-raw-desc">
           Notebook raw nbconvert cell.
          </dd>
         </dl>
        </dd>
        <dd id="nb-cell_type-desc">
         String identifying the type of cell.
        </dd>
        <dt id="nb-execution_count-label">
         execution count
        </dt>
        <dd id="nb-execution_count-desc">
         The code cell's prompt number. Will be null if the cell has not been run.
        </dd>
        <dt id="nb-outputs-label">
         outputs
        </dt>
        <dd id="nb-outputs-desc">
         Execution, display, or stream outputs.
        </dd>
        <dt id="nb-attachments-label">
         attachments
        </dt>
        <dd id="nb-attachments-desc">
         Media attachments (e.g. inline images), stored as mimebundle keyed by filename.
        </dd>
        <dt>
         lines of code
        </dt>
        <dd>
         lines of code in the cell, including whitespace.
        </dd>
       </dl>
      </dd>
      <dt id="nb-toolbar-label">
       toolbar
      </dt>
      <dd>
       composite widgets that allow for arrow key navigation
      </dd>
     </dl>
    </form>
   </dialog>
   <details class="log">
    <summary>
     <span id="nb-activity-log-label">
      activity log
     </span>
    </summary>
   </details>
   <table aria-labelledby="nb-activity-log-label" aria-live="polite">
    <tbody>
     <tr>
      <th hidden>
       time
      </th>
      <td>
       message
      </td>
     </tr>
    </tbody>
   </table>
   <a accesskey="0" href="#TOP">
    skip to top
   </a>
  </footer>
  <script>
   const BODY = document.querySelector("body"), SELECTORS = {
    "table": "table#cells",
    "body": "table#cells>tbody",
    "row": "table#cells>tbody>tr",
    "header": "table#cells>tbody>tr>th",
    "cell": "table#cells>tbody>tr>td",
}, ROLES = {
    "list": {
        "table": "presentation",
        "body": "list",
        "row": "listitem",
        "header": "none",
        "cell": "none",
    }, "table": {
        "table": "table",
        "body": "rowgroup",
        "row": "row",
        "header": "rowheader",
        "cell": "cell",
    }, "region": {
        "table": "presentation",
        "body": "presentation",
        "row": "region",
        "header": "none",
        "cell": "none",
    }, "presentation": {
        "table": "presentation",
        "body": "none",
        "row": "none",
        "header": "none",
        "cell": "none",
    }
};

function toggleColorScheme() {
    let value = document.forms.settings.elements["color-scheme"].value;
    let opposite = value == "dark" ? "light" : "dark";
    document.getElementById(`nb-${value}-theme`).removeAttribute("media", "screen");
    document.getElementById(`nb-${opposite}-theme`).setAttribute("media", "not screen");
    document.querySelector(`head > meta[name="color-scheme"]`).setAttribute("content", value);
    activityLog(`${value} mode activated`)
}
function toggleRole() {
    let value = document.forms.settings["cell-navigation"].value;
    for (const [k, selector] of Object.entries(SELECTORS)) {
        document.querySelectorAll(selector).forEach(
            (x) => {
                if (ROLES[value][k] == null) {
                    x.removeAttribute("role")
                } else {
                    x.setAttribute("role", ROLES[value][k])
                }
            }
        );
    }
    activityLog(`notebook cell navigation set to ${event.target.value}.`);
}
function flattenCss(x) {
    return Object.entries(x).map(x => x.join(": ")).join("; ");
}
function getStyle() {
    return {
        "--nb-font-size": document.forms.settings["font-size"].value,
        "--nb-font-family": document.forms.settings["font-family"].value,
        "--nb-margin": `${document.forms.settings.elements.margin.value}%`,
        "--nb-line-height": `${document.forms.settings.elements["line-height"].value}`,
    }
}
function setStyle(msg) {
    BODY.setAttribute("style", flattenCss(getStyle()));
    setWCAG(); toggleColorScheme(); toggleColorScheme();
    activityLog(msg);
}
function changeFont() {
    document.forms.settings["font-size"].value;
    setStyle(`font size change`);
}
function changeFontFamily() {
    let value = document.forms.settings["font-family"].value;
    setStyle(value == "serif" ? `serifs included` : `serifs removed`)
}
function activityLog(msg, silent = false, first = false) {
    document.querySelectorAll("details.log+table").forEach(
        (body, i) => {
            let tr = document.createElement("tr"),
                th = document.createElement("th"),
                time = document.createElement("time"),
                td = document.createElement("td"),
                out = document.createElement("output"),
                now = Date.now();
            time.setAttribute("datetime", now), th.setAttribute("aria-live", "off"), th.setAttribute("hidden", null);
            time.textContent = now;
            body.append(tr), th.append(time), tr.append(th), tr.append(td), td.append(out);
            silent ? out.setAttribute("aria-live", "off") : null;
            out.textContent = msg;
            if (!i && document.forms.settings.elements["synthetic-speech"].checked) {
                // a non-screen reader solution for audible activity.
                speechSynthesis.speak(new SpeechSynthesisUtterance(msg));
            }
        }
    );
};
function openDialog() {
    event.preventDefault();
    document.getElementById(event.target.getAttribute("aria-controls")).showModal();
};
const L = 37, U = 38, R = 39, D = 40;
document.querySelectorAll("table[role=grid]").forEach(
    (x) => {
        x.addEventListener("keydown", (e) => {
            let target = document.activeElement;
            let i = Array.prototype.indexOf.call(target.parentElement.parentElement.childNodes, target.parentElement);
            switch (e.code) {
                case L:
                    break
                case U:
                    break
                case R:
                    break
                case D:
                    break
            };
        })
    }
);
document.forms.settings.elements["cell-navigation"].addEventListener("change", toggleRole)

document.forms.settings.elements["color-scheme"].addEventListener("change", toggleColorScheme);
document.forms.settings.elements["font-size"].addEventListener("change", (x) => {
    setStyle("change font size");
});
document.forms.settings.elements["font-family"].addEventListener("change", changeFontFamily);
document.forms.settings.elements["synthetic-speech"].addEventListener("change", (x) => {
    activityLog("speech on")
});
document.forms.settings.elements.margin.addEventListener("change", (x) => {
    setStyle("margin changed");
});
document.forms.settings.elements["line-height"].addEventListener("change", (x) => {
    setStyle("line height changed");
});
function setWCAG() {
    var priority = document.forms.settings["accessibility-priority"].value.toLowerCase();
    ["a", "aa", "aaa"].forEach(
        (x) => {
            if (x == priority) {
                BODY.classList.add(`wcag-${x}`)
            } else {
                BODY.classList.remove(`wcag-${x}`)
            }
        }
    );
}
document.forms.settings.elements["accessibility-priority"].addEventListener("change", setWCAG);
    function toggleActive() {
    if (document.forms.notebook.elements.edit.checked) {
        document.querySelectorAll("tr.cell>td>details>summary[inert]").forEach(
            x => x.removeAttribute("inert")
        );
        document.querySelectorAll("tr.cell>td>details>textarea[readonly]").forEach(
            x => x.removeAttribute("readonly")
        );
        document.querySelectorAll("tr.cell>td>form").forEach(
            x => x.removeAttribute("hidden")
        );
        activityLog("entering edit mode");
    } else {
        document.querySelectorAll("tr.cell>td>details>summary").forEach(
            x => x.setAttribute("inert", null)
        );
        document.querySelectorAll("tr.cell>td>details>textarea").forEach(
            x => x.setAttribute("readonly", null)
        );
        document.querySelectorAll("tr.cell>td>form").forEach(
            x => x.setAttribute("hidden", null)
        );
        activityLog("entering reading mode");
    }
}


document.forms.notebook.elements.edit.addEventListener("change", () => toggleActive())

function openDialogs() {
    let trigger = document.querySelector("#nb-dialogs > details");
    Array.from(
        document.querySelectorAll("#nb-dialogs dialog:not(.log)")
    ).reverse().forEach(
        x => {
            trigger.getAttribute("open") === null ? x.show() : x.close();
        }
    );
    event.target.focus();
}
document.forms.visibility['visually-hide'].addEventListener("change",
    (x) => {
        document.querySelector("main").classList.toggle("visually-hide");
        activityLog(`${event.target.checked ? "hiding" : "showing"} main content`);
    });
document.forms.settings['scroll-overflow'].addEventListener("change",
    (x) => {
        document.querySelector("main").classList.toggle("no-overflow");
        // activityLog(`${event.target.checked ? "overflow scrol" : "showing"} main content`);
    });

setStyle("initialize saved settings.")
// async function runSource(target) {
//     {
//         let pyodide = await loadPyodide();
//         pyodide.runPython(target.elements.source.value).then(
//             (x) => {
//                 console.log(x)
//             }, (x) => {
//                 console.log(x)
//             }
//         )
//         return false;
//     }
// }
// document.querySelectorAll("form.nb-toolbar").forEach((x) => {
//     x.addEventListener("submit", (event) => {
//         event.preventDefault();
//     })
// });
// document.querySelectorAll("textarea[name=source]").forEach(
//     (x) => {
//         x.addEventListener("keydown", (event) => {
//             if (event.ctrlKey && event.key === 'Enter') {
//                 runSource(event.target.form);
//             }
//         })
//     }
// );
  </script>
 </body>
</html>

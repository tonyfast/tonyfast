
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="tonyfast's stuff">
      
      
      
        <link rel="canonical" href="https://tonyfast.github.io/tonyfast/xxiv/2024-02-20-multiindex-html.html">
      
      
        <link rel="prev" href="2024-02-21-build-docs-pd.html">
      
      
        <link rel="next" href="2024-02-15-pandas-table-names.html">
      
      
        <link rel="alternate" type="application/rss+xml" title="RSS feed" href="../feed_rss_created.xml">
        <link rel="alternate" type="application/rss+xml" title="RSS feed of updated content" href="../feed_rss_updated.xml">
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.5.3, mkdocs-material-9.5.15">
    
    
      
        <title>proper html tables with multiple indexes - tonyfast</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.7e359304.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../assets/_mkdocstrings.css">
    
      <link rel="stylesheet" href="../style.css">
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
      
        <meta  property="og:type"  content="website" >
      
        <meta  property="og:title"  content="proper html tables with multiple indexes - tonyfast" >
      
        <meta  property="og:description"  content="tonyfast's stuff" >
      
        <meta  property="og:image"  content="https://tonyfast.github.io/tonyfast/assets/images/social/xxiv/2024-02-20-multiindex-html.png" >
      
        <meta  property="og:image:type"  content="image/png" >
      
        <meta  property="og:image:width"  content="1200" >
      
        <meta  property="og:image:height"  content="630" >
      
        <meta  property="og:url"  content="https://tonyfast.github.io/tonyfast/xxiv/2024-02-20-multiindex-html.html" >
      
        <meta  name="twitter:card"  content="summary_large_image" >
      
        <meta  name="twitter:title"  content="proper html tables with multiple indexes - tonyfast" >
      
        <meta  name="twitter:description"  content="tonyfast's stuff" >
      
        <meta  name="twitter:image"  content="https://tonyfast.github.io/tonyfast/assets/images/social/xxiv/2024-02-20-multiindex-html.png" >
      
    
    
  
<script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.1.10/require.min.js"></script>
<script>
(function() {
  function addWidgetsRenderer() {
    var mimeElement = document.querySelector('script[type="application/vnd.jupyter.widget-view+json"]');
    var scriptElement = document.createElement('script');
    
    var widgetRendererSrc = 'https://unpkg.com/@jupyter-widgets/html-manager@*/dist/embed-amd.js';
    
    var widgetState;

    // Fallback for older version:
    try {
      widgetState = mimeElement && JSON.parse(mimeElement.innerHTML);

      if (widgetState && (widgetState.version_major < 2 || !widgetState.version_major)) {
        
        var widgetRendererSrc = 'https://unpkg.com/@jupyter-js-widgets@*/dist/embed.js';
        
      }
    } catch(e) {}

    scriptElement.src = widgetRendererSrc;
    document.body.appendChild(scriptElement);
  }

  document.addEventListener('DOMContentLoaded', addWidgetsRenderer);
}());
</script></head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="slate" data-md-color-primary="black" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#proper-html-tables-with-multiple-indexes" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../index.html" title="tonyfast" class="md-header__button md-logo" aria-label="tonyfast" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            tonyfast
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              proper html tables with multiple indexes
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="black" data-md-color-accent="indigo"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12c0-2.42-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12 20 8.69Z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="black" data-md-color-accent="indigo"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12 20 8.69Z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var media,input,key,value,palette=__md_get("__palette");if(palette&&palette.color){"(prefers-color-scheme)"===palette.color.media&&(media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']"),palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent"));for([key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/tonyfast/tonyfast" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    tonyfast/tonyfast
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



  

<nav class="md-nav md-nav--primary md-nav--integrated" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../index.html" title="tonyfast" class="md-nav__button md-logo" aria-label="tonyfast" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    tonyfast
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/tonyfast/tonyfast" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    tonyfast/tonyfast
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../index.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Home
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="/tonyfast/run/index.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    run in jupyterlite
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" checked>
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    notes
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            notes
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="2024-03-23-updating-ipython-config.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ipython profile updates
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="2024-03-22-documentation-as-data.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    documentation as software and data
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="2024-03-22-itables-stream.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    screen reader experiences with static and interactive tables
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="2024-03-20-exec-mast-nb.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    executing the mast notebooks
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="2024-03-15-screen-tests.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    revisiting nbviewer/nbconvert screen reader experiences
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="2024-03-13-notebooks-for-all-march-call.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    notebooks for all community summary
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="2024-03-12-nbconvert-a11y-pres.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    semantically meaningful notebooks
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="2024-03-11-NOA.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Astronomy Notebooks for All
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="2024-03-06-mast-revisit.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    revisit building the mast notebooks
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="2024-03-05-traceback-figure-tables.ipynb.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    using tables to structure tracebacks
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="2024-03-05-astropy-table-repr.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    astropy tables as semantic tables
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="2024-03-04-semantic-outputs.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    improved output semantic for python objects
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="2024-03-01-a11y-list-string.ipynb.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    using microdata and semantic html to represent python objects
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="2024-03-01-notebook-accessibility-workshop.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    notebooks and accessibility workshop
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="2024-02-28-histograms-sucks.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    histograms suck
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="2024-02-26-lunr-search.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    creating accessible search
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="2024-02-26-multiindex-aria.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    adding aria to long or wide tables
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="2024-02-26-bash-midgy.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    adding shell and css fence directives to midgy
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="2024-02-21-build-docs-pd.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    build the site docs
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    proper html tables with multiple indexes
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="2024-02-20-multiindex-html.html" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    proper html tables with multiple indexes
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#accessibility-html-recommendations" class="md-nav__link">
    <span class="md-ellipsis">
      accessibility html recommendations
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#testing-an-actual-dataframe" class="md-nav__link">
    <span class="md-ellipsis">
      testing an actual dataframe
    </span>
  </a>
  
    <nav class="md-nav" aria-label="testing an actual dataframe">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#more-accessible-tables" class="md-nav__link">
    <span class="md-ellipsis">
      more accessible tables
    </span>
  </a>
  
    <nav class="md-nav" aria-label="more accessible tables">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#accessible-table-do-and-dont" class="md-nav__link">
    <span class="md-ellipsis">
      Accessible table do and don't
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#better-tables" class="md-nav__link">
    <span class="md-ellipsis">
      better tables
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#single-index-names" class="md-nav__link">
    <span class="md-ellipsis">
      single index names
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#one-named-index-spanning" class="md-nav__link">
    <span class="md-ellipsis">
      one named index spanning
    </span>
  </a>
  
    <nav class="md-nav" aria-label="one named index spanning">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#spanning-two-named-indexes" class="md-nav__link">
    <span class="md-ellipsis">
      spanning two named indexes
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#non-spanning-frames" class="md-nav__link">
    <span class="md-ellipsis">
      non-spanning frames
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#visual-and-nonvisual-shape" class="md-nav__link">
    <span class="md-ellipsis">
      visual and nonvisual shape
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#todo" class="md-nav__link">
    <span class="md-ellipsis">
      todo
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="2024-02-15-pandas-table-names.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    a study of pandas dataframes with different levels
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="2024-02-05-aiohttp-pandas-accessor.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    adding an http attribrute to pandas series
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="2024-01-25-mast-a11y-notebooks.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    transforming mast notebooks into nbconvert templates.
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="2024-01-20-colgroup-schema.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    semantic representation of columns based on schema
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="2024-01-05-docx-to-data.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    convertin a docx into a structured dataframe
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../xxiii/2023-12-20-interactive-html-validation.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    interactive w3c validation
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../xxiii/2023-12-15-a11y-testing-dimensions.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    slicing and dicing accessibility violations with exception groups
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../xxiii/2023-12-13-jupyter-community-call.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    It's the Community Call Y'all
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../xxiii/2023-12-08-vnu-validator-exceptions.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    generating higher resolution exceptions for the vnu validator
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../xxiii/2023-12-03-axe-rules-topology.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    axe testing codes as dataframes and exceptions
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../xxiii/2023-11-14-w3c-validator.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    running the w3c validator
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../xxiii/2023-08-24-semantically-meaningful-displays.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    semantically meaningful display outputs for notebooks
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../xxiii/2023-08-23-semantic-lits.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    semantically meaningful lists
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../xxiii/2023-08-10-semantic-code-blocks.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    accessibile semantics for python code
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../xxiii/2023-08-03-pandas-accessors.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    <code>pandas</code> accessors
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../xxiii/2023-07-17-accessible-string-representations.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    the string is a samp
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../xxiii/2023-06-26-dataframe-diagrams-figure-semantics.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    a semantic dataframe
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../xxiii/2023-06-21-v7-aom.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    jupyter notebook v7 remediations
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../xxiii/2023-03-18-ally-talk.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    A Crash Course in Digital Accessibility
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../xxiii/2023-03-18-pycascades-ally-talk.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    A Crash Course in Digital Accessibility
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../xxiii/2023-03-04-computational-notebooks-history.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    a sprint through history toward computional notebooks
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../xxiii/2023-02-28-community-demo.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    <code>pidgy</code> literate computing
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../xxiii/2023-02-19-semantic.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    semantic notebook structure
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../2023-02-05-pipings.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    pipes are common sugar
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../xxiii/2023-01-24-system-dependency-graphs.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    extracting a dependency graph from <code>importlib_metadata</code>
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../xxiii/2023-01-24-whoosh-search.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    use <code>whoosh</code> to search cells/articles on disk
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../xxiii/2023-01-24-lite-build.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    including development builds in jupyter lite
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../xxiii/2023-01-18-voila-pidgy-integration.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    cleaner integration of <code>pidgy</code> &amp; <code>voila</code>
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../xxiii/2023-01-16-inspector-hack.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    customizing the <code>IPython</code> contextual help
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../xxiii/2023-01-14-links-in-markdown-tokens.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    where do all the good links go?
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../xxiii/2023-01-12-tree-sitter.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    getting start with tree sitter
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../xxiii/2023-01-12-giscus-comments.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    adding giscus comments to this blog
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../xxiii/2023-01-11-duckdb-search.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    full text search for notebooks and files using duckdb
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../xxiii/2023-01-11-extensible-metadata.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    extensible metadata in the notebook format
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../xxiii/2023-01-10-rara-gtfo.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    restart and run all or it didn't happen
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../xxiii/2023-01-09-notebooks-states.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    three states of python in a notebook
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../xxiii/2023-01-07-pidgy-voila.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    running <code>pidgy</code> in <code>voila</code>
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../xxiii/2023-01-04-using-diagrams.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    diagrams in jupyter and mkdocs
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../xxiii/2023-01-04-tfoot-dataframe.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    using <code>tfoot</code> in dataframes for more information
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../xxiii/2023-01-02-accessible-dataframes-basic-indexes.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    rendering dataframes for screen readers with <code>pandas</code>
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../xxiii/2023-01-01-strawberry-server.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    WIP: strawberry jupyter server
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../xxii/2022-12-31-jupyter-config-files.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    configuration files
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../xxii/2022-12-31-markdownish-notebook.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    a template for exporting markdownish notebooks
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../xxii/2022-12-30-typer-magic.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    using <code>typer</code> in ipython magics
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../xxii/2022-12-23-mkdocs-plugin.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    <code>mkdocs</code> plugin for jupyter notebooks
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../xxii/2022-12-22-pyproject-analysis.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    analyzing <code>pyproject.toml</code> configurations of popular projects
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../xxii/2022-12-21-lite-build.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    <code>jupyterlite</code> blog integration
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../xxii/2022-12-20-pyscript-nbconvert.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    rendering a notebook with <code>pyscript</code>
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../xxii/2022-12-19-integrating-typer.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    integrating <code>typer</code> into the blog
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../xxii/2022-12-18-mkdocs-task.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    <code>doit</code> integration - a <code>mkdocs</code> example
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../xxii/2022-12-17-find-dependencies-in-content.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    automating blog posts to work with jupyter-lite
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../xxii/2022-12-16-issue-activity-graphql.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    retreiving my issue activity
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../xxii/2022-12-15-html-tags-study.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    all the tags i could be using
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../xxii/2022-12-13-github-api-stats.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    extracting info from the github statistics api
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../xxii/2022-12-09-pyproject-analysis.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    exploring many <code>pyproject.toml configs</code>
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../xxii/2022-12-05-markdown-to-doctest.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    formatting markdown it tokens as python <code>doctests</code>
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../xxii/2022-11-26-package-mimic-and-rel-imports.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    making <code>__main__</code> a <code>__package__</code>
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../xxii/2022-11-23-better-dask-shape.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    unravel directories of notebooks with <code>dask</code>
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../xxii/2022-11-17-assignment-expression-display.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    using assignment expressions to display and assign in <code>IPython</code>
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../xxii/oct/2022-11-17-assignment-expression-display.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    using assignment expressions to display and assign in <code>IPython</code>
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../xxii/2022-11-12-pluggy-experiments.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    fumbling around with <code>pluggy</code>
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../xxii/2022-11-12-async-import.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    asynchronous imports in python
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../xxii/oct/2022-10-29-metadata-formatter.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    inferring linked data from <code>IPython</code> run times.
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../xxii/oct/2022-10-27-axe-core-playwright-python.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    invoking axe-core from python playwright
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../xxii/oct/2022-10-25-static-notebook-tags.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    post processing html accessibility
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../xxii/oct/2022-10-21-pidgy-displays.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    literate computing - interactive literate programming
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../xxii/oct/2022-10-21-markdown-future.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    when markdown and python collide
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../xxii/oct/2022-10-20-meeting-link-widgets.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    making meeting links
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../xxii/oct/2022-10-19-mobius-text.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    turn some text into a mobius surface
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../xxii/oct/2022-10-05-dask-search.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    searching notebooks
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../xxii/oct/colormap-dataframes/2021-10-11-colorizing.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    what do we learn when we <em>make colormaps from dataframes</em><!-- TEASER_END -->
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  
  
  
  <a href="https://github.com/tonyfast/tonyfast/edit/master/docs/xxiv/2024-02-20-multiindex-html.ipynb" title="edit.link.title" class="md-content__button md-icon">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M10 20H6V4h7v5h5v3.1l2-2V8l-6-6H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h4v-2m10.2-7c.1 0 .3.1.4.2l1.3 1.3c.2.2.2.6 0 .8l-1 1-2.1-2.1 1-1c.1-.1.2-.2.4-.2m0 3.9L14.1 23H12v-2.1l6.1-6.1 2.1 2.1Z"/></svg>
  </a>
  <a href="https://raw.githubusercontent.com/tonyfast/tonyfast/master/docs/xxiv/2024-02-20-multiindex-html.ipynb" title="View source of this page" class="md-content__button md-icon">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 18c.56 0 1 .44 1 1s-.44 1-1 1-1-.44-1-1 .44-1 1-1m0-3c-2.73 0-5.06 1.66-6 4 .94 2.34 3.27 4 6 4s5.06-1.66 6-4c-.94-2.34-3.27-4-6-4m0 6.5a2.5 2.5 0 0 1-2.5-2.5 2.5 2.5 0 0 1 2.5-2.5 2.5 2.5 0 0 1 2.5 2.5 2.5 2.5 0 0 1-2.5 2.5M9.27 20H6V4h7v5h5v4.07c.7.08 1.36.25 2 .49V8l-6-6H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h4.5a8.15 8.15 0 0 1-1.23-2Z"/></svg>
  </a>
  <a href="/tonyfast/run/lab/index.html?path=xxiv/2024-02-20-multiindex-html.ipynb" title="Run in jupyter lite" class="md-content__button md-icon">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M14 2H6a2 2 0 0 0-2 2v16c0 1.11.89 2 2 2h12c1.11 0 2-.89 2-2V8l-6-6m4 18H6V4h7v5h5v11m-8.46-4.35 2.09 2.09L10.35 19 7 15.65l3.35-3.35 1.28 1.26-2.09 2.09m7.46 0L13.65 19l-1.27-1.26 2.09-2.09-2.09-2.09 1.27-1.26L17 15.65Z"/></svg>
  </a>


<h1 id="proper-html-tables-with-multiple-indexes">proper html tables with multiple indexes<a class="headerlink" href="#proper-html-tables-with-multiple-indexes" title="Permanent link">¤</a></h1>
<p>our goal is reduce the empty cells in tables, especially where headers should.
empty cells diminish the experience for assistive technology users.
through this study we'll design some accessible options we could generically use to represent dataframes.</p>
<div class="highlight"><pre><span></span><code>    <span class="kn">import</span> <span class="nn">pandas</span><span class="o">,</span> <span class="nn">bs4</span><span class="o">,</span> <span class="nn">enum</span><span class="o">,</span> <span class="nn">numpy</span><span class="o">,</span> <span class="nn">midgy</span>
    <span class="n">get_ipython</span><span class="p">()</span><span class="o">.</span><span class="n">display_formatter</span><span class="o">.</span><span class="n">formatters</span><span class="p">[</span><span class="s2">&quot;text/html&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">for_type</span><span class="p">(</span><span class="n">bs4</span><span class="o">.</span><span class="n">BeautifulSoup</span><span class="p">,</span> <span class="nb">str</span><span class="p">);</span>
</code></pre></div>
<div class="output_subarea output_stream output_stderr output_text">
<pre>/tmp/ipykernel_48634/2026141445.py:1: DeprecationWarning: 
Pyarrow will become a required dependency of pandas in the next major release of pandas (pandas 3.0),
(to allow more performant data types, such as the Arrow string type, and better interoperability with other libraries)
but was not found to be installed on your system.
If this would cause problems for you,
please provide us feedback at https://github.com/pandas-dev/pandas/issues/54466

  import pandas, bs4, enum, numpy, midgy
</pre>
</div>

<div class="highlight"><pre><span></span><code><span class="o">%%</span>
<span class="o">&lt;</span><span class="n">style</span><span class="o">&gt;</span>
<span class="p">:</span><span class="ow">is</span><span class="p">(</span><span class="o">.</span><span class="n">jp</span><span class="o">-</span><span class="n">OutputArea</span><span class="o">-</span><span class="n">output</span><span class="o">.</span><span class="n">jp</span><span class="o">-</span><span class="n">RenderedHTMLCommon</span><span class="p">,</span> <span class="o">.</span><span class="n">nb</span><span class="o">-</span><span class="n">outputs</span><span class="p">)</span> <span class="p">:</span><span class="ow">is</span><span class="p">(</span><span class="n">td</span><span class="p">,</span><span class="n">th</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">border</span><span class="p">:</span> <span class="mi">1</span><span class="n">px</span> <span class="n">solid</span><span class="p">;</span>
<span class="p">}</span>
<span class="o">&lt;/</span><span class="n">style</span><span class="o">&gt;</span>
</code></pre></div>
<style>
:is(.jp-OutputArea-output.jp-RenderedHTMLCommon, .nb-outputs) :is(td,th) {
    border: 1px solid;
}
</style>

<p>create a sample dataframe to work with that has multiple indexes on both axes.
this facilitates our study because it is easier to remove axes than add them later. the code snippet below provides our expected outcome.</p>
<div class="highlight"><pre><span></span><code>    <span class="n">index</span> <span class="o">=</span> <span class="n">pandas</span><span class="o">.</span><span class="n">MultiIndex</span><span class="o">.</span><span class="n">from_product</span><span class="p">([</span>
        <span class="p">[</span><span class="s2">&quot;A&quot;</span><span class="p">,</span> <span class="s2">&quot;Z&quot;</span><span class="p">],</span> <span class="p">[</span><span class="s2">&quot;M&quot;</span><span class="p">,</span> <span class="s2">&quot;N&quot;</span><span class="p">,</span> <span class="s2">&quot;O&quot;</span><span class="p">],</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span>
    <span class="p">],</span> <span class="n">names</span><span class="o">=</span><span class="p">[</span><span class="o">*</span><span class="s2">&quot;JKL&quot;</span><span class="p">])</span>
    <span class="p">(</span><span class="n">df</span> <span class="o">:=</span> <span class="n">pandas</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="n">index</span><span class="p">,</span> <span class="n">index</span><span class="o">=</span><span class="n">index</span><span class="p">)</span><span class="o">.</span><span class="n">rename_axis</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="mi">10</span><span class="p">,</span> <span class="mi">100</span><span class="p">,</span> <span class="mi">1000</span><span class="p">])</span><span class="o">.</span><span class="n">head</span><span class="p">())</span>
    <span class="n">single</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">droplevel</span><span class="p">((</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="mi">0</span><span class="p">)</span><span class="o">.</span><span class="n">droplevel</span><span class="p">((</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">rename_axis</span><span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">rename_axis</span><span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
    <span class="n">df</span>
</code></pre></div>
<div class="output_html rendered_html output_subarea output_execute_result"><div>
<style scoped="">
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead tr th {
        text-align: left;
    }

    .dataframe thead tr:last-of-type th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
<thead>
<tr>
<th></th>
<th></th>
<th>10</th>
<th colspan="9" halign="left">A</th>
<th colspan="9" halign="left">Z</th>
</tr>
<tr>
<th></th>
<th></th>
<th>100</th>
<th colspan="3" halign="left">M</th>
<th colspan="3" halign="left">N</th>
<th colspan="3" halign="left">O</th>
<th colspan="3" halign="left">M</th>
<th colspan="3" halign="left">N</th>
<th colspan="3" halign="left">O</th>
</tr>
<tr>
<th></th>
<th></th>
<th>1000</th>
<th>1</th>
<th>2</th>
<th>3</th>
<th>1</th>
<th>2</th>
<th>3</th>
<th>1</th>
<th>2</th>
<th>3</th>
<th>1</th>
<th>2</th>
<th>3</th>
<th>1</th>
<th>2</th>
<th>3</th>
<th>1</th>
<th>2</th>
<th>3</th>
</tr>
<tr>
<th>J</th>
<th>K</th>
<th>L</th>
<th></th>
<th></th>
<th></th>
<th></th>
<th></th>
<th></th>
<th></th>
<th></th>
<th></th>
<th></th>
<th></th>
<th></th>
<th></th>
<th></th>
<th></th>
<th></th>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<th rowspan="5" valign="top">A</th>
<th rowspan="3" valign="top">M</th>
<th>1</th>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
</tr>
<tr>
<th>2</th>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
</tr>
<tr>
<th>3</th>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
</tr>
<tr>
<th rowspan="2" valign="top">N</th>
<th>1</th>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
</tr>
<tr>
<th>2</th>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
</tr>
</tbody>
</table>
</div></div>

<h2 id="accessibility-html-recommendations">accessibility html recommendations<a class="headerlink" href="#accessibility-html-recommendations" title="Permanent link">¤</a></h2>
<p>there is a long <a href="http://www.tiernok.com/posts/history-of-html-table-layouts.html">history of html table layouts</a>, they have existed since <a href="http://www.w3.org/TR/REC-html32">html 3.2 in january 1997</a>, these standards precede a lot of the history of mass data literacy.
<code>table</code>s are introduced to present 2-D data structures </p>
<p>&gt; <a href="https://en.wikipedia.org/wiki/VisiCalc">VISICALC</a> represented a new idea of a way to use a computer and a new way of thinking about the world. Where conventional programming was thought of as a sequence of steps, this new thing was no longer sequential in effect: When you made a change in one place, all other things changed instantly and automatically.
&gt;&gt; Ted Nelson[13]</p>
<p>considering the accessibility of <code>table</code>s means we need extend the visual representation to the tactile and audible experiences.</p>
<p>let's start with some popular advice from <a href="https://racheleditullio.com">rachele ditullio</a> about <a href="https://racheleditullio.com/blog/2020/03/5-ways-to-improve-table-accessibility/">5 ways to improve table accessibility</a></p>
<ol>
<li>Caption that table</li>
<li>Include header text for every column</li>
<li>Use alt attributes meaningfully</li>
<li>Have data in every table cell</li>
<li>Check your (con)text</li>
</ol>
<p>this is where we start because these recommendations represent users needs before needs.
accessibility requires us to center a user's visual, audible, and tactile experience when working with data.</p>
<div class="highlight"><pre><span></span><code><span class="o">%%</span> <span class="o">-</span><span class="n">u</span>
<span class="c1">## testing an actual dataframe</span>

<span class="n">based</span> <span class="n">off</span> <span class="n">these</span> <span class="n">suggestions</span> <span class="n">we</span> <span class="n">can</span> <span class="n">connect</span> <span class="n">dataframe</span> <span class="n">parlance</span> <span class="n">to</span> <span class="n">the</span> <span class="n">consistent</span> <span class="n">standards</span> <span class="n">of</span> <span class="n">html</span><span class="o">.</span>
<span class="n">what</span> <span class="n">follows</span> <span class="n">are</span> <span class="n">comments</span> <span class="n">on</span> <span class="n">how</span> <span class="n">each</span> <span class="nb">all</span> <span class="mi">5</span> <span class="n">of</span> <span class="n">the</span> <span class="n">suggestions</span> <span class="n">apply</span> <span class="n">to</span> <span class="err">`</span><span class="n">pandas</span><span class="o">.</span><span class="n">DataFrame</span><span class="err">`</span> <span class="n">objects</span><span class="o">.</span>

<span class="mf">1.</span> <span class="err">`</span><span class="n">pandas</span><span class="err">`</span> <span class="n">tables</span> <span class="n">typically</span> <span class="n">lack</span> <span class="n">a</span> <span class="err">`</span><span class="n">caption</span><span class="err">`</span> <span class="n">unless</span> <span class="n">the</span> <span class="n">code</span> <span class="n">author</span> <span class="ow">is</span> <span class="n">aware</span> <span class="n">of</span> <span class="err">`</span><span class="n">df</span><span class="o">.</span><span class="n">style</span><span class="o">.</span><span class="n">set_caption</span><span class="err">`</span><span class="o">.</span>
<span class="n">the</span> <span class="err">`</span><span class="n">caption</span><span class="err">`</span> <span class="n">element</span> <span class="n">provides</span> <span class="n">an</span> <span class="n">aria</span> <span class="n">label</span> <span class="n">that</span><span class="err">`</span>  <span class="n">gives</span> <span class="n">assistive</span> <span class="n">technology</span> <span class="n">users</span> <span class="n">more</span> <span class="n">context</span> <span class="k">as</span> <span class="n">they</span> <span class="n">navigate</span> <span class="n">information</span><span class="o">.</span>

            <span class="n">df</span><span class="o">.</span><span class="n">style</span><span class="o">.</span><span class="n">set_caption</span><span class="p">(</span><span class="s2">&quot;the public api for adding a caption to a dataframe.&quot;</span><span class="p">)</span>

<span class="mf">2.</span> <span class="k">as</span> <span class="n">of</span> <span class="n">v2</span><span class="mf">.2</span><span class="p">,</span> <span class="n">there</span> <span class="n">are</span> <span class="n">conformations</span> <span class="n">pandas</span> <span class="n">columns</span> <span class="ow">and</span> <span class="n">indexes</span> <span class="n">that</span> <span class="n">generate</span> <span class="n">representations</span> <span class="n">containing</span> <span class="n">empty</span> <span class="n">headers</span><span class="o">.</span>
    <span class="n">an</span> <span class="n">accessible</span><span class="p">,</span> <span class="n">assistive</span> <span class="n">experience</span> <span class="n">will</span> <span class="n">avoid</span> <span class="n">empty</span> <span class="n">cells</span><span class="p">,</span> <span class="n">especially</span> <span class="n">header</span> <span class="n">cells</span><span class="o">.</span>
    <span class="n">the</span> <span class="n">first</span> <span class="n">cell</span> <span class="ow">in</span> <span class="n">the</span> <span class="n">table</span> <span class="ow">is</span> <span class="n">empty</span> <span class="k">for</span> <span class="n">the</span> <span class="n">cases</span> <span class="n">where</span> <span class="err">`</span><span class="n">count_empty_cell</span><span class="err">`</span> <span class="n">reveals</span> <span class="n">non</span><span class="o">-</span><span class="n">zero</span> <span class="n">results</span><span class="o">.</span>
    <span class="n">this</span> <span class="n">means</span> <span class="n">that</span> <span class="n">assistive</span> <span class="n">technology</span> <span class="n">users</span> <span class="n">will</span> <span class="n">find</span> <span class="n">empty</span> <span class="n">cells</span> <span class="ow">in</span> <span class="n">most</span> <span class="n">of</span> <span class="n">the</span> <span class="n">pandas</span> <span class="n">dataframe</span>
    <span class="n">representations</span> <span class="n">available</span> <span class="n">online</span><span class="o">.</span> <span class="n">this</span> <span class="n">oversight</span> <span class="ow">is</span> <span class="n">costly</span> <span class="n">because</span> <span class="n">technologies</span> <span class="n">like</span> <span class="n">screen</span> <span class="n">readers</span> 
    <span class="ow">and</span> <span class="n">braille</span> <span class="n">displays</span> <span class="n">require</span> <span class="n">parsing</span> <span class="n">information</span> <span class="n">serially</span> <span class="n">rather</span> <span class="n">than</span> <span class="n">our</span> <span class="n">parallel</span> <span class="n">vision</span> <span class="n">experience</span><span class="o">.</span>

            <span class="k">def</span> <span class="nf">count_empty_cell</span><span class="p">(</span><span class="n">df</span><span class="p">):</span>
    <span class="err">`</span><span class="n">count_empty_cell</span><span class="err">`</span> <span class="n">will</span> <span class="n">count</span> <span class="n">the</span> <span class="n">empty</span> <span class="err">`</span><span class="n">th</span><span class="err">`</span> <span class="ow">and</span> <span class="err">`</span><span class="n">td</span><span class="err">`</span> <span class="n">elements</span> <span class="ow">in</span> <span class="n">a</span> <span class="n">rendered</span> <span class="n">dataframe</span><span class="o">.</span>
    <span class="n">it</span> <span class="n">was</span> <span class="n">created</span> <span class="n">to</span> <span class="n">demonstrate</span> <span class="n">the</span> <span class="n">different</span> <span class="n">conditions</span> <span class="n">on</span> <span class="n">dataframe</span> <span class="n">indexes</span> <span class="ow">and</span> <span class="n">columns</span>
    <span class="n">that</span> <span class="n">influence</span> <span class="n">the</span> <span class="n">current</span> <span class="n">visual</span> <span class="n">form</span> <span class="n">of</span> <span class="n">the</span> <span class="n">dataframe</span><span class="o">.</span>

    <span class="o">*</span> <span class="n">our</span> <span class="n">test</span> <span class="n">dataframe</span> <span class="n">has</span> <span class="n">empty</span> <span class="n">cells</span> <span class="n">because</span> <span class="n">the</span> <span class="n">index</span> <span class="ow">and</span> <span class="n">columns</span> <span class="n">are</span> <span class="n">unnamed</span><span class="o">.</span>

            <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="k">assert</span> <span class="n">count_empty_cell</span><span class="p">(</span><span class="n">df</span><span class="p">)</span> <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="mi">0</span> 

    <span class="o">*</span> <span class="n">a</span> <span class="n">dataframe</span> <span class="k">with</span> <span class="n">a</span> <span class="n">named</span> <span class="n">column</span> <span class="n">index</span> <span class="n">has</span> <span class="n">no</span> <span class="n">empty</span> <span class="n">cells</span><span class="o">.</span>

            <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="k">assert</span> <span class="n">count_empty_cell</span><span class="p">(</span><span class="n">single</span><span class="o">.</span><span class="n">rename_axis</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="s2">&quot;upper&quot;</span><span class="p">))</span> <span class="o">==</span> <span class="mi">0</span>

    <span class="o">*</span> <span class="n">there</span> <span class="n">are</span> <span class="n">empty</span> <span class="n">cells</span> <span class="n">when</span> <span class="n">the</span> <span class="n">index</span> <span class="ow">is</span> <span class="n">named</span> <span class="n">because</span> <span class="n">the</span> <span class="n">index</span> <span class="n">name</span> <span class="ow">is</span> <span class="n">given</span> <span class="n">its</span> <span class="n">own</span> <span class="n">row</span><span class="o">.</span>

            <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span><span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="k">assert</span> <span class="n">count_empty_cell</span><span class="p">(</span><span class="n">single</span><span class="o">.</span><span class="n">rename_axis</span><span class="p">(</span><span class="n">index</span><span class="o">=</span><span class="s2">&quot;lower&quot;</span><span class="p">))</span> <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="mi">0</span>

                <span class="n">table_cells</span> <span class="o">=</span> <span class="n">pandas</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="n">bs4</span><span class="o">.</span><span class="n">BeautifulSoup</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">to_html</span><span class="p">(),</span> <span class="n">features</span><span class="o">=</span><span class="s2">&quot;lxml&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="s2">&quot;th,td&quot;</span><span class="p">))</span>
                <span class="k">return</span> <span class="n">table_cells</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="nb">any</span><span class="p">)</span><span class="o">.</span><span class="fm">__invert__</span><span class="p">()</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>

<span class="mf">4.</span> <span class="n">adding</span> <span class="n">alt</span> <span class="n">text</span> <span class="n">to</span> <span class="n">images</span> <span class="ow">is</span> <span class="n">out</span> <span class="n">of</span> <span class="n">scope</span> <span class="k">for</span> <span class="n">this</span> <span class="n">investigation</span><span class="o">.</span> <span class="n">it</span> <span class="ow">is</span> <span class="n">very</span> <span class="n">valid</span><span class="o">.</span> <span class="n">pandas</span> <span class="n">dataframes</span> 
    <span class="n">may</span> <span class="n">contain</span> <span class="n">various</span> <span class="n">mimetypes</span> <span class="n">of</span> <span class="n">content</span> <span class="ow">and</span> <span class="n">their</span> <span class="n">representations</span> <span class="n">should</span> <span class="n">be</span> <span class="n">assistive</span><span class="o">.</span> 
    <span class="n">however</span><span class="p">,</span> <span class="k">for</span> <span class="n">this</span> <span class="n">study</span><span class="p">,</span> <span class="n">the</span> <span class="n">index</span> <span class="ow">and</span> <span class="n">columns</span> <span class="n">are</span> <span class="n">the</span> <span class="n">primary</span> <span class="n">axes</span> <span class="k">for</span> <span class="n">building</span> <span class="n">an</span> <span class="n">accessible</span> <span class="n">table</span> <span class="n">substrate</span><span class="o">.</span>

<span class="mf">5.</span> <span class="err">`</span><span class="n">null</span><span class="err">`</span> <span class="ow">and</span> <span class="err">`</span><span class="n">Nan</span><span class="err">`</span> <span class="n">need</span> <span class="n">semantically</span> <span class="n">meaningful</span> <span class="n">representations</span><span class="o">.</span>
    <span class="n">the</span> <span class="n">programming</span> <span class="n">collquialisms</span> <span class="k">for</span> <span class="n">empty</span> <span class="n">content</span> <span class="n">may</span> <span class="ow">not</span> <span class="n">translate</span> <span class="n">to</span> <span class="n">assistive</span> <span class="n">technology</span><span class="o">.</span>
    <span class="n">_what</span> <span class="n">about</span> <span class="n">braille_</span><span class="err">?</span>
    <span class="n">it</span> <span class="ow">is</span> <span class="n">unlikely</span> <span class="n">there</span> <span class="ow">is</span> <span class="n">a</span> <span class="n">best</span> <span class="n">placeholder</span> <span class="k">for</span> <span class="n">this</span> <span class="n">values</span> <span class="n">so</span> <span class="n">this</span> <span class="n">value</span> <span class="n">should</span> <span class="n">be</span> <span class="n">configurable</span><span class="o">.</span>

            <span class="n">placeholder</span> <span class="o">=</span> <span class="s2">&quot;not a number&quot;</span>
            <span class="n">df</span><span class="o">.</span><span class="n">fillna</span><span class="p">(</span><span class="sa">F</span><span class="s2">&quot;&lt;span class=&quot;</span><span class="n">sro</span><span class="s2">&quot;&gt;</span><span class="si">{placeholder}</span><span class="s2">&lt;/span&gt;&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">style</span>

<span class="mf">6.</span> <span class="n">yes</span> <span class="n">abbreviations</span> <span class="ow">and</span> <span class="n">punctuation</span> <span class="n">should</span> <span class="n">be</span> <span class="n">considered</span><span class="p">,</span> 
    <span class="n">but</span> <span class="n">this</span> <span class="ow">is</span> <span class="n">an</span> <span class="n">advanced</span> <span class="n">technique</span> <span class="n">that</span> <span class="n">requires</span> <span class="n">manually</span> <span class="n">screen</span> <span class="n">reader</span> <span class="n">testing</span> <span class="n">literacies</span><span class="o">.</span>

<span class="n">the</span> <span class="n">comparison</span> <span class="n">between</span> <span class="n">rachel</span><span class="s1">&#39;s advice and `pandas` dataframes is just a start down the rabbit hole.</span>
<span class="n">we</span><span class="s1">&#39;ll begin to bring in other articles, standards, and specifications to design ARIA first rule implementations</span>
<span class="n">of</span> <span class="n">pandas</span> <span class="n">tidy</span> <span class="n">frames</span><span class="o">.</span>
</code></pre></div>
<h2 id="testing-an-actual-dataframe">testing an actual dataframe<a class="headerlink" href="#testing-an-actual-dataframe" title="Permanent link">¤</a></h2>
<p>based off these suggestions we can connect dataframe parlance to the consistent standards of html.
what follows are comments on how each all 5 of the suggestions apply to <code>pandas.DataFrame</code> objects.</p>
<ol>
<li>
<p><code>pandas</code> tables typically lack a <code>caption</code> unless the code author is aware of <code>df.style.set_caption</code>.
the <code>caption</code> element provides an aria label that`  gives assistive technology users more context as they navigate information.</p>
<pre><code>    df.style.set_caption("the public api for adding a caption to a dataframe.")
</code></pre>
</li>
<li>
<p>as of v2.2, there are conformations pandas columns and indexes that generate representations containing empty headers.
    an accessible, assistive experience will avoid empty cells, especially header cells.
    the first cell in the table is empty for the cases where <code>count_empty_cell</code> reveals non-zero results.
    this means that assistive technology users will find empty cells in most of the pandas dataframe
    representations available online. this oversight is costly because technologies like screen readers 
    and braille displays require parsing information serially rather than our parallel vision experience.</p>
<pre><code>    def count_empty_cell(df):
</code></pre>
<p><code>count_empty_cell</code> will count the empty <code>th</code> and <code>td</code> elements in a rendered dataframe.
it was created to demonstrate the different conditions on dataframe indexes and columns
that influence the current visual form of the dataframe.</p>
<ul>
<li>
<p>our test dataframe has empty cells because the index and columns are unnamed.</p>
<pre><code>&amp;gt;&amp;gt;&amp;gt; assert count_empty_cell(df) &amp;gt; 0
</code></pre>
</li>
<li>
<p>a dataframe with a named column index has no empty cells.</p>
<pre><code>&amp;gt;&amp;gt;&amp;gt; assert count_empty_cell(single.rename_axis(columns="upper")) == 0
</code></pre>
</li>
<li>
<p>there are empty cells when the index is named because the index name is given its own row.</p>
<pre><code>&amp;gt;&amp;gt;&amp;gt; assert count_empty_cell(single.rename_axis(index="lower")) &amp;gt; 0

    table_cells = pandas.Series(bs4.BeautifulSoup(df.to_html(), features="lxml").select("th,td"))
    return table_cells.apply(any).__invert__().sum()
</code></pre>
</li>
</ul>
</li>
<li>
<p>adding alt text to images is out of scope for this investigation. it is very valid. pandas dataframes 
    may contain various mimetypes of content and their representations should be assistive. 
    however, for this study, the index and columns are the primary axes for building an accessible table substrate.</p>
</li>
<li>
<p><code>null</code> and <code>Nan</code> need semantically meaningful representations.
    the programming collquialisms for empty content may not translate to assistive technology.
    <em>what about braille</em>?
    it is unlikely there is a best placeholder for this values so this value should be configurable.</p>
<pre><code>    placeholder = "not a number"
    df.fillna(F"&lt;span class="sro"&gt;{placeholder}&lt;/span&gt;").style
</code></pre>
</li>
<li>
<p>yes abbreviations and punctuation should be considered, 
    but this is an advanced technique that requires manually screen reader testing literacies.</p>
</li>
</ol>
<p>the comparison between rachel's advice and <code>pandas</code> dataframes is just a start down the rabbit hole.
we'll begin to bring in other articles, standards, and specifications to design ARIA first rule implementations
of pandas tidy frames.</p>
<h3 id="more-accessible-tables">more accessible tables<a class="headerlink" href="#more-accessible-tables" title="Permanent link">¤</a></h3>
<p>our next resource provides more dos and don'ts that correspond to accessible table experiences.</p>
<ul>
<li>
<p>✅ Designate at least one row and/or column header using the table formatting tools in your web content management system or document creation software.</p>
<p><code>pandas</code> dataframes should be represented with a named index or column.</p>
</li>
<li>
<p>✅ Use the <code>&lt;th&gt;</code> element to mark up table headers in HTML.</p>
</li>
<li>
<p>❌ Table headers should never be empty. This is particularly of concern for the top-left cell of some tables.</p>
<p>our primary task is to remove empty cells from the <code>thead</code> porition of the dataframe representation.
currently, it is very common for screen reader users to find empty first cells in a table.
imagine how much it sucks.</p>
</li>
<li>
<p>✅ If you do create a complex data table on a webpage, use the <code>&lt;scope&gt;</code> tag to programmatically associate the data cells with the appropriate headers.</p>
</li>
<li>
<p>❌ Don't merge cells.</p>
<p>merging cells creates ambiguities. <code>td</code>s in dataframes will NEVER be spanned.</p>
</li>
</ul>
<h4 id="accessible-table-do-and-dont">Accessible table do and don't<a class="headerlink" href="#accessible-table-do-and-dont" title="Permanent link">¤</a></h4>
<p><a href="https://accessibility.umn.edu/what-you-can-do/start-7-core-skills/tables">https://accessibility.umn.edu/what-you-can-do/start-7-core-skills/tables</a></p>
<details><summary>Use Tables to Display Data</summary>

* ✅ Use tables to present information in a grid, or matrix, with columns or rows that show the meaning of the information.
- ❌ Don't use tables to make your webpage look a particular way. Layout tables on webpages do not pose inherent accessibility issues, but it is more difficult to make sure screen reader software reads the cells in the proper order.
- ❌ Never use tables as a means of laying out a page in a Google or Microsoft Word document. While these tables can be hidden from visual users by simply eliminating the borders between cells, they cannot be hidden from screen readers.

</details>
<details><summary>Designate Row and/or Column Headers</summary>

* ✅ Designate at least one row and/or column header using the table formatting tools in your web content management system or document creation software. 
* ✅ Use the `<th>` element to mark up table headers in HTML.
- ❌ Don't create tables without table headers.
- ❌ Don't just change the visual formatting of the text, such as the font size or color, to visually indicate table header rows and/or columns. Screen readers will not be able to associate the headers with the correct cells.
- ❌ Table headers should never be empty. This is particularly of concern for the top-left cell of some tables.

</th></details>
<details><summary>Avoid or Simplify Complex Tables</summary>

* ✅ Include a maximum of one header row and one header column.
* ✅ Spell out abbreviations or acronyms, or use the `<abbr>` or `<acronym>` tags in HTML to ensure accessibility.
* ✅ If your table has multiple header rows, merged cells, or another table embedded in it, split it into two or more simple tables. 
* ✅ If you do create a complex data table on a webpage, use the `<scope>` tag to programmatically associate the data cells with the appropriate headers.
- ❌ Don't merge cells.
- ❌ Don't include a table within another table.

</scope></acronym></abbr></details>
<details><summary>Provide Contextual Information</summary>

* ✅ Associate descriptive text about a table with its respective table by including a `<caption>` element in HTML or alt text in Microsoft Word. Captions are not necessary for each table, but can helpful for screen reader users. The caption can be visually formatted and positioned above or below the table as needed, but on webpages, the `<caption>` element must be the first one after the opening `<table>` tag.
* ✅ You may use `<thead>`, `<tfoot>`, and `<tbody>` tags in HTML tables so that the head and/or foot rows repeat at the top or bottom of the table when it is printed, but these do not provide any additional accessibility benefits. 
- ❌ Don't repeat the same text in the caption that appears in a heading preceding the table.
- ❌ You may provide a summary of the structure of the data table (not of the content) using the `<summary>` attribute, but screen reader support for it varies, and it is not part of the HTML5 specification, so WebAim does not recommend it.
- ❌ If both a caption and summary are provided for one table, the summary should not duplicate information present in the caption.

</summary></tbody></tfoot></thead></table></caption></caption></details>
<details><summary>Include Content in All Cells</summary>

* ✅ Include text such as "not applicable," "none," etc. to indicate that there is no data in empty cells.
- ❌ Don't leave any table cells empty.

</details>

<h2 id="better-tables">better tables<a class="headerlink" href="#better-tables" title="Permanent link">¤</a></h2>
<div class="highlight"><pre><span></span><code><span class="o">%%</span>
    <span class="k">def</span> <span class="nf">index_span</span><span class="p">(</span><span class="n">index</span><span class="p">:</span> <span class="n">pandas</span><span class="o">.</span><span class="n">Index</span><span class="p">)</span> <span class="o">-&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">pandas</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">:</span> 
<span class="n">we</span> <span class="n">need</span> <span class="n">to</span> <span class="n">tidy</span> <span class="n">our</span> <span class="n">indexes</span> <span class="n">that</span> <span class="n">may</span> <span class="n">have</span> <span class="n">grouped</span> <span class="n">indexes</span><span class="o">.</span> 
<span class="err">`</span><span class="n">index_span</span><span class="err">`</span> <span class="n">defines</span> <span class="n">the</span> <span class="n">logic</span> <span class="k">for</span> <span class="n">diffing</span> <span class="ow">and</span> <span class="n">labelling</span> <span class="n">the</span> <span class="n">index</span> <span class="n">to</span> <span class="n">measure</span> <span class="n">the</span> <span class="n">column</span>
<span class="ow">and</span> <span class="n">row</span> <span class="n">spans</span> <span class="k">for</span> <span class="n">an</span> <span class="n">index</span><span class="o">.</span>

        <span class="k">return</span> <span class="n">pandas</span><span class="o">.</span><span class="n">concat</span><span class="p">(</span>
            <span class="nb">dict</span><span class="p">(</span>
                <span class="n">diff</span><span class="o">=</span><span class="p">(</span><span class="n">diff</span> <span class="o">:=</span> <span class="n">index</span><span class="o">.</span><span class="n">to_frame</span><span class="p">()</span><span class="o">.</span><span class="n">pipe</span><span class="p">(</span><span class="n">diff_shift</span><span class="p">)),</span>
                <span class="n">label</span><span class="o">=</span><span class="p">(</span><span class="n">label</span> <span class="o">:=</span> <span class="n">diff</span><span class="o">.</span><span class="n">cumsum</span><span class="p">()),</span>
                <span class="n">span</span><span class="o">=</span><span class="n">label</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span>
                    <span class="k">lambda</span> <span class="n">s</span><span class="p">:</span> <span class="n">s</span><span class="o">.</span><span class="n">drop_duplicates</span><span class="p">()</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="n">s</span><span class="o">.</span><span class="n">value_counts</span><span class="p">()</span><span class="o">.</span><span class="n">get</span><span class="p">),</span> <span class="n">axis</span><span class="o">=</span><span class="mi">0</span>
                <span class="p">)</span>
            <span class="p">),</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span>
        <span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">({</span><span class="n">numpy</span><span class="o">.</span><span class="n">nan</span><span class="p">:</span> <span class="kc">None</span><span class="p">})</span>

    <span class="k">def</span> <span class="nf">diff_shift</span><span class="p">(</span><span class="n">df</span><span class="p">:</span> <span class="n">pandas</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">)</span> <span class="o">-&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">pandas</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">:</span>
<span class="n">shift</span> <span class="n">a</span> <span class="n">data</span> <span class="n">by</span> <span class="n">a</span> <span class="n">row</span> <span class="n">to</span> <span class="n">determine</span> <span class="n">the</span> <span class="n">nearest</span> <span class="n">change</span> <span class="ow">in</span> <span class="n">the</span> <span class="n">index</span> <span class="n">when</span> <span class="n">determining</span> <span class="n">spanning</span> <span class="n">metrics</span><span class="o">.</span>

        <span class="k">return</span> <span class="n">pandas</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span>
            <span class="n">numpy</span><span class="o">.</span><span class="n">concatenate</span><span class="p">((</span><span class="n">numpy</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="kc">True</span><span class="p">]</span><span class="o">*</span><span class="n">df</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">]]),</span> <span class="n">df</span><span class="o">.</span><span class="n">values</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">!=</span> <span class="n">df</span><span class="o">.</span><span class="n">values</span><span class="p">[</span><span class="mi">1</span><span class="p">:]),</span> <span class="mi">0</span><span class="p">),</span> 
            <span class="n">columns</span><span class="o">=</span><span class="n">df</span><span class="o">.</span><span class="n">columns</span>
        <span class="p">)</span>
</code></pre></div>
<pre><code>def index_span(index: pandas.Index) -&amp;gt; pandas.DataFrame:
</code></pre>
<p>we need to tidy our indexes that may have grouped indexes. 
<code>index_span</code> defines the logic for diffing and labelling the index to measure the column
and row spans for an index.</p>
<pre><code>    return pandas.concat(
        dict(
            diff=(diff := index.to_frame().pipe(diff_shift)),
            label=(label := diff.cumsum()),
            span=label.apply(
                lambda s: s.drop_duplicates().apply(s.value_counts().get), axis=0
            )
        ), axis=1
    ).replace({numpy.nan: None})

def diff_shift(df: pandas.DataFrame) -&amp;gt; pandas.DataFrame:
</code></pre>
<p>shift a data by a row to determine the nearest change in the index when determining spanning metrics.</p>
<pre><code>    return pandas.DataFrame(
        numpy.concatenate((numpy.array([[True]*df.shape[1]]), df.values[:-1] != df.values[1:]), 0), 
        columns=df.columns
    )
</code></pre>
<div class="highlight"><pre><span></span><code><span class="o">%%</span>
    <span class="k">def</span> <span class="nf">column_major</span><span class="p">(</span><span class="n">df</span><span class="p">:</span> <span class="n">pandas</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">,</span> <span class="n">caption</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">SPAN</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span> <span class="o">-&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="n">bs4</span><span class="o">.</span><span class="n">BeautifulSoup</span><span class="p">:</span>
<span class="n">convert</span> <span class="n">a</span> <span class="n">dataframe</span> <span class="n">to</span> <span class="n">a</span> <span class="err">`</span><span class="n">column_major</span><span class="err">`</span> <span class="n">html</span> <span class="n">representation</span> <span class="n">that</span> <span class="n">presents</span> <span class="n">the</span> <span class="n">column</span> <span class="n">index</span> <span class="n">names</span> <span class="n">first</span><span class="o">.</span>

        <span class="n">soup</span> <span class="o">=</span> <span class="n">bs4</span><span class="o">.</span><span class="n">BeautifulSoup</span><span class="p">(</span><span class="n">features</span><span class="o">=</span><span class="s2">&quot;html.parser&quot;</span><span class="p">)</span>
        <span class="n">soup</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">table</span> <span class="o">:=</span> <span class="n">soup</span><span class="o">.</span><span class="n">new_tag</span><span class="p">(</span><span class="s2">&quot;table&quot;</span><span class="p">))</span>
        <span class="k">if</span> <span class="n">caption</span><span class="p">:</span>
            <span class="n">table</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">cap</span> <span class="o">:=</span> <span class="n">soup</span><span class="o">.</span><span class="n">new_tag</span><span class="p">(</span><span class="s2">&quot;caption&quot;</span><span class="p">))</span>
            <span class="n">cap</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">caption</span><span class="p">)</span>
        <span class="n">ROWS</span><span class="p">,</span> <span class="n">COLS</span> <span class="o">=</span> <span class="nb">any</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">names</span><span class="p">),</span> <span class="nb">any</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">columns</span><span class="o">.</span><span class="n">names</span><span class="p">)</span>

<span class="n">pre</span><span class="o">-</span><span class="n">compute</span> <span class="n">the</span> <span class="n">grouping</span> <span class="n">structure</span> <span class="n">of</span> <span class="n">the</span> <span class="n">indexes</span>

        <span class="n">row_span</span><span class="p">,</span> <span class="n">col_span</span> <span class="o">=</span> <span class="n">index_span</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">index</span><span class="p">),</span> <span class="n">index_span</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">columns</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">col_level</span><span class="p">,</span> <span class="n">col_name</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">columns</span><span class="o">.</span><span class="n">names</span><span class="p">):</span>
<span class="mf">1.</span> <span class="n">show</span> <span class="n">the</span> <span class="n">column</span> <span class="n">index</span> <span class="n">names</span>

            <span class="n">table</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">tr</span> <span class="o">:=</span> <span class="n">soup</span><span class="o">.</span><span class="n">new_tag</span><span class="p">(</span><span class="s2">&quot;tr&quot;</span><span class="p">))</span>
            <span class="k">if</span> <span class="n">COLS</span><span class="p">:</span>
                <span class="n">attrs</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">scope</span><span class="o">=</span><span class="s2">&quot;row&quot;</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">df</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">nlevels</span> <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="mi">1</span><span class="p">:</span>
                    <span class="n">attrs</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">colspan</span><span class="o">=</span><span class="n">df</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">nlevels</span><span class="p">)</span>
                <span class="n">tr</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">th</span> <span class="o">:=</span> <span class="n">soup</span><span class="o">.</span><span class="n">new_tag</span><span class="p">(</span><span class="s2">&quot;th&quot;</span><span class="p">,</span> <span class="n">attrs</span><span class="o">=</span><span class="n">attrs</span><span class="p">))</span>
                <span class="n">th</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">col_name</span><span class="p">)</span> <span class="ow">or</span> <span class="sa">F</span><span class="s2">&quot;level </span><span class="si">{</span><span class="n">col_level</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

            <span class="k">for</span> <span class="n">col_index</span><span class="p">,</span> <span class="n">col_value</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">columns</span><span class="o">.</span><span class="n">get_level_values</span><span class="p">(</span><span class="n">col_level</span><span class="p">)):</span>
<span class="mf">1.</span> <span class="n">show</span> <span class="n">the</span> <span class="n">column</span> <span class="n">index</span> <span class="n">values</span>

                <span class="n">attrs</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">scope</span><span class="o">=</span><span class="s2">&quot;col&quot;</span><span class="p">)</span>
                <span class="n">span</span> <span class="o">=</span> <span class="n">col_span</span><span class="p">[</span><span class="s2">&quot;span&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="n">col_index</span><span class="p">,</span> <span class="n">col_level</span><span class="p">]</span> <span class="k">if</span> <span class="n">SPAN</span> <span class="k">else</span> <span class="mi">1</span>
                <span class="k">if</span> <span class="n">span</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">span</span> <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="mi">1</span><span class="p">:</span>
                        <span class="n">attrs</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">colspan</span><span class="o">=</span><span class="nb">int</span><span class="p">(</span><span class="n">span</span><span class="p">))</span>
                    <span class="n">tr</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">th</span> <span class="o">:=</span> <span class="n">soup</span><span class="o">.</span><span class="n">new_tag</span><span class="p">(</span><span class="s2">&quot;th&quot;</span><span class="p">,</span> <span class="n">attrs</span><span class="o">=</span><span class="n">attrs</span><span class="p">))</span>
                    <span class="n">th</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">col_value</span><span class="p">))</span>
        <span class="k">if</span> <span class="n">ROWS</span><span class="p">:</span>
<span class="mf">1.</span> <span class="n">insert</span> <span class="n">the</span> <span class="n">row</span> <span class="n">names</span> <span class="n">below</span> <span class="n">the</span> <span class="n">column</span> <span class="n">names</span> 

            <span class="n">table</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">tr</span> <span class="o">:=</span> <span class="n">soup</span><span class="o">.</span><span class="n">new_tag</span><span class="p">(</span><span class="s2">&quot;tr&quot;</span><span class="p">))</span>
            <span class="n">attrs</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">scope</span><span class="o">=</span><span class="s2">&quot;col&quot;</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">row_level</span><span class="p">,</span> <span class="n">row_name</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">names</span><span class="p">):</span>
                <span class="n">tr</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">th</span> <span class="o">:=</span> <span class="n">soup</span><span class="o">.</span><span class="n">new_tag</span><span class="p">(</span><span class="s2">&quot;th&quot;</span><span class="p">,</span> <span class="n">attrs</span><span class="o">=</span><span class="n">attrs</span><span class="p">))</span>
                <span class="n">th</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">row_name</span><span class="p">)</span> <span class="ow">or</span> <span class="sa">F</span><span class="s2">&quot;index </span><span class="si">{</span><span class="n">row_level</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

            <span class="k">for</span> <span class="n">col_value</span> <span class="ow">in</span> <span class="n">df</span><span class="o">.</span><span class="n">columns</span><span class="o">.</span><span class="n">get_level_values</span><span class="p">(</span><span class="n">col_level</span><span class="p">):</span>
   <span class="n">followed</span> <span class="n">by</span> <span class="n">a</span> <span class="n">blank</span> <span class="n">row</span><span class="p">,</span> <span class="n">a</span> <span class="n">blank</span> <span class="n">row</span> <span class="ow">is</span> <span class="n">suboptimal</span> <span class="k">for</span> <span class="n">assistive</span> <span class="n">technology</span><span class="o">.</span>

                <span class="n">attrs</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">scope</span><span class="o">=</span><span class="s2">&quot;col&quot;</span><span class="p">)</span>
                <span class="n">tr</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">td</span> <span class="o">:=</span> <span class="n">soup</span><span class="o">.</span><span class="n">new_tag</span><span class="p">(</span><span class="s2">&quot;td&quot;</span><span class="p">))</span>

        <span class="k">for</span> <span class="n">row_index</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]):</span>
<span class="mf">1.</span> <span class="n">write</span> <span class="n">the</span> <span class="n">row</span> <span class="n">index</span> <span class="n">headers</span>

            <span class="n">table</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">tr</span> <span class="o">:=</span> <span class="n">soup</span><span class="o">.</span><span class="n">new_tag</span><span class="p">(</span><span class="s2">&quot;tr&quot;</span><span class="p">))</span>
            <span class="k">for</span> <span class="n">row_level</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">nlevels</span><span class="p">):</span>
                <span class="n">span</span> <span class="o">=</span> <span class="n">row_span</span><span class="p">[</span><span class="s2">&quot;span&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="n">row_index</span><span class="p">,</span> <span class="n">row_level</span><span class="p">]</span> <span class="k">if</span> <span class="n">SPAN</span> <span class="k">else</span> <span class="mi">1</span>
                <span class="k">if</span> <span class="n">span</span><span class="p">:</span>
                    <span class="n">attrs</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">scope</span><span class="o">=</span><span class="s2">&quot;row&quot;</span><span class="p">)</span>
                    <span class="k">if</span> <span class="n">span</span> <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="mi">1</span><span class="p">:</span>
                        <span class="n">attrs</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">rowspan</span><span class="o">=</span><span class="nb">int</span><span class="p">(</span><span class="n">span</span><span class="p">))</span>
                    <span class="n">tr</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">th</span> <span class="o">:=</span> <span class="n">soup</span><span class="o">.</span><span class="n">new_tag</span><span class="p">(</span><span class="s2">&quot;th&quot;</span><span class="p">,</span> <span class="n">attrs</span><span class="o">=</span><span class="n">attrs</span><span class="p">))</span>
                    <span class="n">th</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">get_level_values</span><span class="p">(</span><span class="n">row_level</span><span class="p">)[</span><span class="n">row_index</span><span class="p">]))</span>

            <span class="k">for</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">df</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="n">row_index</span><span class="p">]</span><span class="o">.</span><span class="n">values</span><span class="p">:</span>
<span class="mf">1.</span> <span class="n">write</span> <span class="n">the</span> <span class="n">values</span> <span class="n">of</span> <span class="n">the</span> <span class="n">dataframe</span>

                <span class="n">tr</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">td</span> <span class="o">:=</span> <span class="n">soup</span><span class="o">.</span><span class="n">new_tag</span><span class="p">(</span><span class="s2">&quot;td&quot;</span><span class="p">))</span>
                <span class="n">td</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">value</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">soup</span>
</code></pre></div>
<pre><code>def column_major(df: pandas.DataFrame, caption=None, SPAN=True) -&amp;gt; bs4.BeautifulSoup:
</code></pre>
<p>convert a dataframe to a <code>column_major</code> html representation that presents the column index names first.</p>
<pre><code>    soup = bs4.BeautifulSoup(features="html.parser")
    soup.append(table := soup.new_tag("table"))
    if caption:
        table.append(cap := soup.new_tag("caption"))
        cap.append(caption)
    ROWS, COLS = any(df.index.names), any(df.columns.names)
</code></pre>
<p>pre-compute the grouping structure of the indexes</p>
<pre><code>    row_span, col_span = index_span(df.index), index_span(df.columns)

    for col_level, col_name in enumerate(df.columns.names):
</code></pre>
<ol>
<li>show the column index names<pre><code>    table.append(tr := soup.new_tag("tr"))
    if COLS:
        attrs = dict(scope="row")
        if df.index.nlevels &amp;gt; 1:
            attrs.update(colspan=df.index.nlevels)
        tr.append(th := soup.new_tag("th", attrs=attrs))
        th.append(str(col_name) or F"level {col_level}")

    for col_index, col_value in enumerate(df.columns.get_level_values(col_level)):
</code></pre>
<ol>
<li>
<p>show the column index values</p>
<pre><code>    attrs = dict(scope="col")
    span = col_span["span"].iloc[col_index, col_level] if SPAN else 1
    if span:
        if span &amp;gt; 1:
            attrs.update(colspan=int(span))
        tr.append(th := soup.new_tag("th", attrs=attrs))
        th.append(str(col_value))
</code></pre>
<p>if ROWS:
1. insert the row names below the column names </p>
<pre><code>table.append(tr := soup.new_tag("tr"))
attrs = dict(scope="col")
for row_level, row_name in enumerate(df.index.names):
    tr.append(th := soup.new_tag("th", attrs=attrs))
    th.append(str(row_name) or F"index {row_level}")

for col_value in df.columns.get_level_values(col_level):
</code></pre>
<p>followed by a blank row, a blank row is suboptimal for assistive technology.</p>
<pre><code>    attrs = dict(scope="col")
    tr.append(td := soup.new_tag("td"))
</code></pre>
<p>for row_index in range(df.shape[0]):
1. write the row index headers</p>
<pre><code>table.append(tr := soup.new_tag("tr"))
for row_level in range(df.index.nlevels):
    span = row_span["span"].iloc[row_index, row_level] if SPAN else 1
    if span:
        attrs = dict(scope="row")
        if span &amp;gt; 1:
            attrs.update(rowspan=int(span))
        tr.append(th := soup.new_tag("th", attrs=attrs))
        th.append(str(df.index.get_level_values(row_level)[row_index]))

for value in df.iloc[row_index].values:
</code></pre>
<ol>
<li>write the values of the dataframe<pre><code>tr.append(td := soup.new_tag("td"))
td.append(str(value))
    return soup
</code></pre>
</li>
</ol>
</li>
</ol>
</li>
</ol>
<div class="highlight"><pre><span></span><code><span class="o">%%</span>
    <span class="k">def</span> <span class="nf">row_major</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">caption</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">SPAN</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
<span class="n">a</span> <span class="err">`</span><span class="n">row_major</span><span class="err">`</span> <span class="n">representation</span> <span class="n">that</span> <span class="n">presents</span> <span class="n">the</span> <span class="n">row</span> <span class="n">index</span> <span class="n">names</span> <span class="n">first</span><span class="o">.</span>

        <span class="n">soup</span> <span class="o">=</span> <span class="n">bs4</span><span class="o">.</span><span class="n">BeautifulSoup</span><span class="p">(</span><span class="n">features</span><span class="o">=</span><span class="s2">&quot;lxml&quot;</span><span class="p">)</span>
        <span class="n">soup</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">table</span> <span class="o">:=</span> <span class="n">soup</span><span class="o">.</span><span class="n">new_tag</span><span class="p">(</span><span class="s2">&quot;table&quot;</span><span class="p">))</span>

        <span class="k">if</span> <span class="n">caption</span><span class="p">:</span>
            <span class="n">table</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">cap</span> <span class="o">:=</span> <span class="n">soup</span><span class="o">.</span><span class="n">new_tag</span><span class="p">(</span><span class="s2">&quot;caption&quot;</span><span class="p">))</span>
            <span class="n">cap</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">caption</span><span class="p">)</span>

        <span class="n">ROWS</span><span class="p">,</span> <span class="n">COLS</span> <span class="o">=</span> <span class="nb">any</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">names</span><span class="p">),</span> <span class="nb">any</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">columns</span><span class="o">.</span><span class="n">names</span><span class="p">)</span>
<span class="mf">1.</span> <span class="n">precompute</span> <span class="n">the</span> <span class="n">row</span> <span class="ow">and</span> <span class="n">column</span> <span class="n">index</span> <span class="n">spans</span>

        <span class="n">row_span</span><span class="p">,</span> <span class="n">col_span</span> <span class="o">=</span> <span class="n">index_span</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">index</span><span class="p">),</span> <span class="n">index_span</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">columns</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">col_level</span><span class="p">,</span> <span class="n">col_name</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">columns</span><span class="o">.</span><span class="n">names</span><span class="p">):</span>
            <span class="n">table</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">tr</span> <span class="o">:=</span> <span class="n">soup</span><span class="o">.</span><span class="n">new_tag</span><span class="p">(</span><span class="s2">&quot;tr&quot;</span><span class="p">))</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">col_level</span><span class="p">:</span>
<span class="mf">1.</span> <span class="n">write</span> <span class="n">the</span> <span class="n">index</span> <span class="n">names</span> <span class="n">on</span> <span class="n">the</span> <span class="n">first</span> <span class="k">pass</span> <span class="n">of</span> <span class="n">the</span> <span class="n">header</span> <span class="n">rows</span><span class="o">.</span>

                <span class="k">if</span> <span class="n">ROWS</span> <span class="ow">or</span> <span class="ow">not</span> <span class="n">COLS</span><span class="p">:</span>
                    <span class="n">attrs</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">scope</span><span class="o">=</span><span class="s2">&quot;col&quot;</span><span class="p">)</span>
                    <span class="k">if</span> <span class="n">df</span><span class="o">.</span><span class="n">columns</span><span class="o">.</span><span class="n">nlevels</span> <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="mi">1</span><span class="p">:</span>
                        <span class="n">attrs</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">rowspan</span><span class="o">=</span><span class="n">df</span><span class="o">.</span><span class="n">columns</span><span class="o">.</span><span class="n">nlevels</span><span class="p">)</span> 
                    <span class="k">for</span> <span class="n">row_level</span><span class="p">,</span> <span class="n">row_name</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">names</span><span class="p">):</span>
                        <span class="n">tr</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">th</span> <span class="o">:=</span> <span class="n">soup</span><span class="o">.</span><span class="n">new_tag</span><span class="p">(</span><span class="s2">&quot;th&quot;</span><span class="p">,</span> <span class="n">attrs</span><span class="o">=</span><span class="n">attrs</span><span class="p">))</span>
                        <span class="n">th</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">row_name</span><span class="p">)</span> <span class="ow">or</span> <span class="sa">F</span><span class="s2">&quot;index </span><span class="si">{</span><span class="n">row_level</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

            <span class="k">if</span> <span class="n">COLS</span><span class="p">:</span>
<span class="mf">1.</span> <span class="n">include</span> <span class="n">the</span> <span class="n">column</span> <span class="n">index</span> <span class="n">names</span> <span class="k">if</span> <span class="n">they</span> <span class="n">exist</span>

                <span class="n">attrs</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">scope</span><span class="o">=</span><span class="s2">&quot;row&quot;</span><span class="p">)</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="n">ROWS</span> <span class="ow">and</span> <span class="n">df</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">nlevels</span> <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="mi">1</span><span class="p">:</span>
                    <span class="n">attrs</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">colspan</span><span class="o">=</span><span class="n">df</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">nlevels</span><span class="p">)</span>
                <span class="n">tr</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">th</span> <span class="o">:=</span> <span class="n">soup</span><span class="o">.</span><span class="n">new_tag</span><span class="p">(</span><span class="s2">&quot;th&quot;</span><span class="p">,</span> <span class="n">attrs</span><span class="o">=</span><span class="n">attrs</span><span class="p">))</span>
                <span class="n">th</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">col_name</span><span class="p">)</span> <span class="ow">or</span> <span class="sa">F</span><span class="s2">&quot;level </span><span class="si">{</span><span class="n">col_level</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

            <span class="k">for</span> <span class="n">col_index</span><span class="p">,</span> <span class="n">col_value</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">columns</span><span class="o">.</span><span class="n">get_level_values</span><span class="p">(</span><span class="n">col_level</span><span class="p">)):</span>
<span class="mf">1.</span>  <span class="n">write</span> <span class="n">the</span> <span class="n">values</span> <span class="k">for</span> <span class="n">the</span> <span class="n">column</span> <span class="n">index</span>

                <span class="n">attrs</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">scope</span><span class="o">=</span><span class="s2">&quot;col&quot;</span><span class="p">)</span>
                <span class="n">span</span> <span class="o">=</span> <span class="n">col_span</span><span class="p">[</span><span class="s2">&quot;span&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="n">col_index</span><span class="p">,</span> <span class="n">col_level</span><span class="p">]</span> <span class="k">if</span> <span class="n">SPAN</span> <span class="k">else</span> <span class="mi">1</span>
                <span class="k">if</span> <span class="n">span</span><span class="p">:</span>
                    <span class="n">attrs</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">scope</span><span class="o">=</span><span class="s2">&quot;col&quot;</span><span class="p">)</span>
                    <span class="k">if</span> <span class="n">span</span> <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="mi">1</span><span class="p">:</span>
                        <span class="n">attrs</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">colspan</span><span class="o">=</span><span class="nb">int</span><span class="p">(</span><span class="n">span</span><span class="p">))</span>
                    <span class="n">tr</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">th</span> <span class="o">:=</span> <span class="n">soup</span><span class="o">.</span><span class="n">new_tag</span><span class="p">(</span><span class="s2">&quot;th&quot;</span><span class="p">,</span> <span class="n">attrs</span><span class="o">=</span><span class="n">attrs</span><span class="p">))</span>
                    <span class="n">th</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">col_value</span><span class="p">))</span>


        <span class="k">for</span> <span class="n">row_index</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]):</span>
<span class="mf">1.</span>  <span class="n">write</span> <span class="n">the</span> <span class="n">index</span> <span class="n">header</span> <span class="n">values</span>

            <span class="n">table</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">tr</span> <span class="o">:=</span> <span class="n">soup</span><span class="o">.</span><span class="n">new_tag</span><span class="p">(</span><span class="s2">&quot;tr&quot;</span><span class="p">))</span>
            <span class="k">for</span> <span class="n">row_level</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">nlevels</span><span class="p">):</span>
                <span class="n">span</span> <span class="o">=</span> <span class="n">row_span</span><span class="p">[</span><span class="s2">&quot;span&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="n">row_index</span><span class="p">,</span> <span class="n">row_level</span><span class="p">]</span> <span class="k">if</span> <span class="n">SPAN</span> <span class="k">else</span> <span class="mi">1</span>
                <span class="k">if</span> <span class="n">span</span><span class="p">:</span>
                    <span class="n">attrs</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">scope</span><span class="o">=</span><span class="s2">&quot;row&quot;</span><span class="p">)</span>
                    <span class="k">if</span> <span class="n">span</span> <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="mi">1</span><span class="p">:</span>
                        <span class="n">attrs</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">rowspan</span><span class="o">=</span><span class="nb">int</span><span class="p">(</span><span class="n">span</span><span class="p">))</span>
                    <span class="n">tr</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">th</span> <span class="o">:=</span> <span class="n">soup</span><span class="o">.</span><span class="n">new_tag</span><span class="p">(</span><span class="s2">&quot;th&quot;</span><span class="p">,</span> <span class="n">attrs</span><span class="o">=</span><span class="n">attrs</span><span class="p">))</span>
                    <span class="n">th</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">get_level_values</span><span class="p">(</span><span class="n">row_level</span><span class="p">)[</span><span class="n">row_index</span><span class="p">]))</span>

            <span class="k">if</span> <span class="n">ROWS</span> <span class="ow">and</span> <span class="n">COLS</span><span class="p">:</span>
<span class="mf">1.</span>  <span class="n">insert</span> <span class="n">an</span> <span class="n">empty</span> <span class="n">column</span> <span class="k">if</span> <span class="n">we</span> <span class="n">have</span> <span class="n">column</span> <span class="n">names</span>

                <span class="n">tr</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">td</span> <span class="o">:=</span> <span class="n">soup</span><span class="o">.</span><span class="n">new_tag</span><span class="p">(</span><span class="s2">&quot;td&quot;</span><span class="p">))</span>

            <span class="k">for</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">df</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="n">row_index</span><span class="p">]</span><span class="o">.</span><span class="n">values</span><span class="p">:</span>
<span class="mf">1.</span>  <span class="n">write</span> <span class="n">the</span> <span class="n">data</span>

                <span class="n">tr</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">td</span> <span class="o">:=</span> <span class="n">soup</span><span class="o">.</span><span class="n">new_tag</span><span class="p">(</span><span class="s2">&quot;td&quot;</span><span class="p">))</span>
                <span class="n">td</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">value</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">soup</span>
</code></pre></div>
<pre><code>def row_major(df, caption=None, SPAN=True):
</code></pre>
<p>a <code>row_major</code> representation that presents the row index names first.</p>
<pre><code>    soup = bs4.BeautifulSoup(features="lxml")
    soup.append(table := soup.new_tag("table"))

    if caption:
        table.append(cap := soup.new_tag("caption"))
        cap.append(caption)

    ROWS, COLS = any(df.index.names), any(df.columns.names)
</code></pre>
<ol>
<li>precompute the row and column index spans<pre><code>row_span, col_span = index_span(df.index), index_span(df.columns)

for col_level, col_name in enumerate(df.columns.names):
    table.append(tr := soup.new_tag("tr"))
    if not col_level:
</code></pre>
<ol>
<li>
<p>write the index names on the first pass of the header rows.</p>
<pre><code>    if ROWS or not COLS:
        attrs = dict(scope="col")
        if df.columns.nlevels &amp;gt; 1:
            attrs.update(rowspan=df.columns.nlevels) 
        for row_level, row_name in enumerate(df.index.names):
            tr.append(th := soup.new_tag("th", attrs=attrs))
            th.append(str(row_name) or F"index {row_level}")

if COLS:
</code></pre>
<ol>
<li>
<p>include the column index names if they exist</p>
<pre><code>attrs = dict(scope="row")
if not ROWS and df.index.nlevels &amp;gt; 1:
    attrs.update(colspan=df.index.nlevels)
tr.append(th := soup.new_tag("th", attrs=attrs))
th.append(str(col_name) or F"level {col_level}")
</code></pre>
<p>for col_index, col_value in enumerate(df.columns.get_level_values(col_level)):
1.  write the values for the column index</p>
<pre><code>attrs = dict(scope="col")
span = col_span["span"].iloc[col_index, col_level] if SPAN else 1
if span:
    attrs = dict(scope="col")
    if span &amp;gt; 1:
        attrs.update(colspan=int(span))
    tr.append(th := soup.new_tag("th", attrs=attrs))
    th.append(str(col_value))
</code></pre>
</li>
</ol>
<p>for row_index in range(df.shape[0]):
1.  write the index header values</p>
<pre><code>table.append(tr := soup.new_tag("tr"))
for row_level in range(df.index.nlevels):
    span = row_span["span"].iloc[row_index, row_level] if SPAN else 1
    if span:
        attrs = dict(scope="row")
        if span &amp;gt; 1:
            attrs.update(rowspan=int(span))
        tr.append(th := soup.new_tag("th", attrs=attrs))
        th.append(str(df.index.get_level_values(row_level)[row_index]))

if ROWS and COLS:
</code></pre>
<ol>
<li>
<p>insert an empty column if we have column names</p>
<pre><code>tr.append(td := soup.new_tag("td"))
</code></pre>
<p>for value in df.iloc[row_index].values:
1.  write the data</p>
<pre><code>tr.append(td := soup.new_tag("td"))
td.append(str(value))
    return soup
</code></pre>
</li>
</ol>
</li>
</ol>
</li>
</ol>
<h2 id="single-index-names">single index names<a class="headerlink" href="#single-index-names" title="Permanent link">¤</a></h2>
<div class="highlight"><pre><span></span><code>    <span class="n">row_major</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">head</span><span class="p">()</span><span class="o">.</span><span class="n">rename_axis</span><span class="p">((</span><span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">),</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">droplevel</span><span class="p">((</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">droplevel</span><span class="p">((</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">),</span> <span class="n">axis</span><span class="o">=</span><span class="mi">0</span><span class="p">),</span>
             <span class="s2">&quot;a single index row major&quot;</span><span class="p">)</span>
</code></pre></div>
<div class="output_html rendered_html output_subarea output_execute_result"><table><caption>a single index row major</caption><tr><th scope="col">L</th><th scope="col">1</th><th scope="col">2</th><th scope="col">3</th><th scope="col">1</th><th scope="col">2</th><th scope="col">3</th><th scope="col">1</th><th scope="col">2</th><th scope="col">3</th><th scope="col">1</th><th scope="col">2</th><th scope="col">3</th><th scope="col">1</th><th scope="col">2</th><th scope="col">3</th><th scope="col">1</th><th scope="col">2</th><th scope="col">3</th></tr><tr><th scope="row">1</th><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td></tr><tr><th scope="row">2</th><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td></tr><tr><th scope="row">3</th><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td></tr><tr><th scope="row">1</th><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td></tr><tr><th scope="row">2</th><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td></tr></table></div>

<div class="highlight"><pre><span></span><code>    <span class="n">column_major</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">head</span><span class="p">()</span><span class="o">.</span><span class="n">rename_axis</span><span class="p">((</span><span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">),</span> <span class="n">axis</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span><span class="o">.</span><span class="n">droplevel</span><span class="p">((</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="n">axis</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span><span class="o">.</span><span class="n">droplevel</span><span class="p">((</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">),</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">),</span>
             <span class="s2">&quot;a single index column major&quot;</span><span class="p">)</span>
</code></pre></div>
<div class="output_html rendered_html output_subarea output_execute_result"><table><caption>a single index column major</caption><tr><th scope="row">1000</th><th scope="col">1</th><th scope="col">2</th><th scope="col">3</th><th scope="col">1</th><th scope="col">2</th><th scope="col">3</th><th scope="col">1</th><th scope="col">2</th><th scope="col">3</th><th scope="col">1</th><th scope="col">2</th><th scope="col">3</th><th scope="col">1</th><th scope="col">2</th><th scope="col">3</th><th scope="col">1</th><th scope="col">2</th><th scope="col">3</th></tr><tr><th scope="row">1</th><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td></tr><tr><th scope="row">2</th><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td></tr><tr><th scope="row">3</th><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td></tr><tr><th scope="row">1</th><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td></tr><tr><th scope="row">2</th><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td></tr></table></div>

<div class="highlight"><pre><span></span><code>    <span class="n">row_major</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">head</span><span class="p">()</span><span class="o">.</span><span class="n">rename_axis</span><span class="p">((</span><span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">),</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">droplevel</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">droplevel</span><span class="p">((</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">),</span> <span class="n">axis</span><span class="o">=</span><span class="mi">0</span><span class="p">),</span>
             <span class="s2">&quot;a multi index row major&quot;</span><span class="p">)</span>
</code></pre></div>
<div class="output_html rendered_html output_subarea output_execute_result"><table><caption>a multi index row major</caption><tr><th rowspan="2" scope="col">L</th><th colspan="3" scope="col">M</th><th colspan="3" scope="col">N</th><th colspan="3" scope="col">O</th><th colspan="3" scope="col">M</th><th colspan="3" scope="col">N</th><th colspan="3" scope="col">O</th></tr><tr><th scope="col">1</th><th scope="col">2</th><th scope="col">3</th><th scope="col">1</th><th scope="col">2</th><th scope="col">3</th><th scope="col">1</th><th scope="col">2</th><th scope="col">3</th><th scope="col">1</th><th scope="col">2</th><th scope="col">3</th><th scope="col">1</th><th scope="col">2</th><th scope="col">3</th><th scope="col">1</th><th scope="col">2</th><th scope="col">3</th></tr><tr><th scope="row">1</th><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td></tr><tr><th scope="row">2</th><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td></tr><tr><th scope="row">3</th><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td></tr><tr><th scope="row">1</th><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td></tr><tr><th scope="row">2</th><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td></tr></table></div>

<div class="highlight"><pre><span></span><code>    <span class="n">row_major</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">head</span><span class="p">()</span><span class="o">.</span><span class="n">rename_axis</span><span class="p">((</span><span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">),</span> <span class="n">axis</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span><span class="o">.</span><span class="n">droplevel</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span><span class="o">.</span><span class="n">droplevel</span><span class="p">((</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">),</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">),</span>
             <span class="s2">&quot;a multi index column major&quot;</span><span class="p">)</span>
</code></pre></div>
<div class="output_html rendered_html output_subarea output_execute_result"><table><caption>a multi index column major</caption><tr><th colspan="2" scope="row">1000</th><th scope="col">1</th><th scope="col">2</th><th scope="col">3</th><th scope="col">1</th><th scope="col">2</th><th scope="col">3</th><th scope="col">1</th><th scope="col">2</th><th scope="col">3</th><th scope="col">1</th><th scope="col">2</th><th scope="col">3</th><th scope="col">1</th><th scope="col">2</th><th scope="col">3</th><th scope="col">1</th><th scope="col">2</th><th scope="col">3</th></tr><tr><th rowspan="3" scope="row">M</th><th scope="row">1</th><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td></tr><tr><th scope="row">2</th><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td></tr><tr><th scope="row">3</th><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td></tr><tr><th rowspan="2" scope="row">N</th><th scope="row">1</th><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td></tr><tr><th scope="row">2</th><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td></tr></table></div>

<h2 id="one-named-index-spanning">one named index spanning<a class="headerlink" href="#one-named-index-spanning" title="Permanent link">¤</a></h2>
<div class="highlight"><pre><span></span><code>    <span class="n">row_major</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">head</span><span class="p">()</span><span class="o">.</span><span class="n">rename_axis</span><span class="p">((</span><span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">),</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">),</span> <span class="s2">&quot;spanning multiple index row major&quot;</span><span class="p">)</span>
</code></pre></div>
<div class="output_html rendered_html output_subarea output_execute_result"><table><caption>spanning multiple index row major</caption><tr><th rowspan="3" scope="col">J</th><th rowspan="3" scope="col">K</th><th rowspan="3" scope="col">L</th><th colspan="9" scope="col">A</th><th colspan="9" scope="col">Z</th></tr><tr><th colspan="3" scope="col">M</th><th colspan="3" scope="col">N</th><th colspan="3" scope="col">O</th><th colspan="3" scope="col">M</th><th colspan="3" scope="col">N</th><th colspan="3" scope="col">O</th></tr><tr><th scope="col">1</th><th scope="col">2</th><th scope="col">3</th><th scope="col">1</th><th scope="col">2</th><th scope="col">3</th><th scope="col">1</th><th scope="col">2</th><th scope="col">3</th><th scope="col">1</th><th scope="col">2</th><th scope="col">3</th><th scope="col">1</th><th scope="col">2</th><th scope="col">3</th><th scope="col">1</th><th scope="col">2</th><th scope="col">3</th></tr><tr><th rowspan="5" scope="row">A</th><th rowspan="3" scope="row">M</th><th scope="row">1</th><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td></tr><tr><th scope="row">2</th><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td></tr><tr><th scope="row">3</th><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td></tr><tr><th rowspan="2" scope="row">N</th><th scope="row">1</th><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td></tr><tr><th scope="row">2</th><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td></tr></table></div>

<div class="highlight"><pre><span></span><code>    <span class="n">column_major</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">head</span><span class="p">()</span><span class="o">.</span><span class="n">rename_axis</span><span class="p">((</span><span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">),</span> <span class="n">axis</span><span class="o">=</span><span class="mi">0</span><span class="p">),</span> <span class="s2">&quot;spanning multiple index column major&quot;</span><span class="p">)</span>
</code></pre></div>
<div class="output_html rendered_html output_subarea output_execute_result"><table><caption>spanning multiple index column major</caption><tr><th colspan="3" scope="row">10</th><th colspan="9" scope="col">A</th><th colspan="9" scope="col">Z</th></tr><tr><th colspan="3" scope="row">100</th><th colspan="3" scope="col">M</th><th colspan="3" scope="col">N</th><th colspan="3" scope="col">O</th><th colspan="3" scope="col">M</th><th colspan="3" scope="col">N</th><th colspan="3" scope="col">O</th></tr><tr><th colspan="3" scope="row">1000</th><th scope="col">1</th><th scope="col">2</th><th scope="col">3</th><th scope="col">1</th><th scope="col">2</th><th scope="col">3</th><th scope="col">1</th><th scope="col">2</th><th scope="col">3</th><th scope="col">1</th><th scope="col">2</th><th scope="col">3</th><th scope="col">1</th><th scope="col">2</th><th scope="col">3</th><th scope="col">1</th><th scope="col">2</th><th scope="col">3</th></tr><tr><th rowspan="5" scope="row">A</th><th rowspan="3" scope="row">M</th><th scope="row">1</th><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td></tr><tr><th scope="row">2</th><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td></tr><tr><th scope="row">3</th><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td></tr><tr><th rowspan="2" scope="row">N</th><th scope="row">1</th><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td></tr><tr><th scope="row">2</th><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td></tr></table></div>

<h3 id="spanning-two-named-indexes">spanning two named indexes<a class="headerlink" href="#spanning-two-named-indexes" title="Permanent link">¤</a></h3>
<div class="highlight"><pre><span></span><code>    <span class="n">row_major</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">head</span><span class="p">(),</span> <span class="s2">&quot;spanning multiple indexes row major&quot;</span><span class="p">)</span>
</code></pre></div>
<div class="output_html rendered_html output_subarea output_execute_result"><table><caption>spanning multiple indexes row major</caption><tr><th rowspan="3" scope="col">J</th><th rowspan="3" scope="col">K</th><th rowspan="3" scope="col">L</th><th scope="row">10</th><th colspan="9" scope="col">A</th><th colspan="9" scope="col">Z</th></tr><tr><th scope="row">100</th><th colspan="3" scope="col">M</th><th colspan="3" scope="col">N</th><th colspan="3" scope="col">O</th><th colspan="3" scope="col">M</th><th colspan="3" scope="col">N</th><th colspan="3" scope="col">O</th></tr><tr><th scope="row">1000</th><th scope="col">1</th><th scope="col">2</th><th scope="col">3</th><th scope="col">1</th><th scope="col">2</th><th scope="col">3</th><th scope="col">1</th><th scope="col">2</th><th scope="col">3</th><th scope="col">1</th><th scope="col">2</th><th scope="col">3</th><th scope="col">1</th><th scope="col">2</th><th scope="col">3</th><th scope="col">1</th><th scope="col">2</th><th scope="col">3</th></tr><tr><th rowspan="5" scope="row">A</th><th rowspan="3" scope="row">M</th><th scope="row">1</th><td></td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td></tr><tr><th scope="row">2</th><td></td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td></tr><tr><th scope="row">3</th><td></td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td></tr><tr><th rowspan="2" scope="row">N</th><th scope="row">1</th><td></td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td></tr><tr><th scope="row">2</th><td></td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td></tr></table></div>

<div class="highlight"><pre><span></span><code>    <span class="n">column_major</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">head</span><span class="p">(),</span> <span class="s2">&quot;spanning multiple index column major&quot;</span><span class="p">)</span>
</code></pre></div>
<div class="output_html rendered_html output_subarea output_execute_result"><table><caption>spanning multiple index column major</caption><tr><th colspan="3" scope="row">10</th><th colspan="9" scope="col">A</th><th colspan="9" scope="col">Z</th></tr><tr><th colspan="3" scope="row">100</th><th colspan="3" scope="col">M</th><th colspan="3" scope="col">N</th><th colspan="3" scope="col">O</th><th colspan="3" scope="col">M</th><th colspan="3" scope="col">N</th><th colspan="3" scope="col">O</th></tr><tr><th colspan="3" scope="row">1000</th><th scope="col">1</th><th scope="col">2</th><th scope="col">3</th><th scope="col">1</th><th scope="col">2</th><th scope="col">3</th><th scope="col">1</th><th scope="col">2</th><th scope="col">3</th><th scope="col">1</th><th scope="col">2</th><th scope="col">3</th><th scope="col">1</th><th scope="col">2</th><th scope="col">3</th><th scope="col">1</th><th scope="col">2</th><th scope="col">3</th></tr><tr><th scope="col">J</th><th scope="col">K</th><th scope="col">L</th><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td></tr><tr><th rowspan="5" scope="row">A</th><th rowspan="3" scope="row">M</th><th scope="row">1</th><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td></tr><tr><th scope="row">2</th><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td></tr><tr><th scope="row">3</th><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td></tr><tr><th rowspan="2" scope="row">N</th><th scope="row">1</th><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td></tr><tr><th scope="row">2</th><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td></tr></table></div>

<p>it is hard to imagine a way to constructing a dataframe with two named indexes without empty cells.
we'll likely include an empty row or column. this might seem like this is authoring choice, but we can't know our viewers intent when they interrogate data. the most flexible, compromising approach would be allow for this to change on the client, where the only author choice represents the steady state.</p>
<h3 id="non-spanning-frames">non-spanning frames<a class="headerlink" href="#non-spanning-frames" title="Permanent link">¤</a></h3>
<p>so far we have only illustrated spanning examples meaning that the row/column index may span multiple rows;
only headers will span for dataframes while data will not.
this experience can really suck for assistive technology introducing navigation ambiguities and complications.</p>
<div class="highlight"><pre><span></span><code>    <span class="n">row_major</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">head</span><span class="p">(),</span> <span class="s2">&quot;non-spanning multiple indexes row major&quot;</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>
</code></pre></div>
<div class="output_html rendered_html output_subarea output_execute_result"><table><caption>non-spanning multiple indexes row major</caption><tr><th rowspan="3" scope="col">J</th><th rowspan="3" scope="col">K</th><th rowspan="3" scope="col">L</th><th scope="row">10</th><th scope="col">A</th><th scope="col">A</th><th scope="col">A</th><th scope="col">A</th><th scope="col">A</th><th scope="col">A</th><th scope="col">A</th><th scope="col">A</th><th scope="col">A</th><th scope="col">Z</th><th scope="col">Z</th><th scope="col">Z</th><th scope="col">Z</th><th scope="col">Z</th><th scope="col">Z</th><th scope="col">Z</th><th scope="col">Z</th><th scope="col">Z</th></tr><tr><th scope="row">100</th><th scope="col">M</th><th scope="col">M</th><th scope="col">M</th><th scope="col">N</th><th scope="col">N</th><th scope="col">N</th><th scope="col">O</th><th scope="col">O</th><th scope="col">O</th><th scope="col">M</th><th scope="col">M</th><th scope="col">M</th><th scope="col">N</th><th scope="col">N</th><th scope="col">N</th><th scope="col">O</th><th scope="col">O</th><th scope="col">O</th></tr><tr><th scope="row">1000</th><th scope="col">1</th><th scope="col">2</th><th scope="col">3</th><th scope="col">1</th><th scope="col">2</th><th scope="col">3</th><th scope="col">1</th><th scope="col">2</th><th scope="col">3</th><th scope="col">1</th><th scope="col">2</th><th scope="col">3</th><th scope="col">1</th><th scope="col">2</th><th scope="col">3</th><th scope="col">1</th><th scope="col">2</th><th scope="col">3</th></tr><tr><th scope="row">A</th><th scope="row">M</th><th scope="row">1</th><td></td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td></tr><tr><th scope="row">A</th><th scope="row">M</th><th scope="row">2</th><td></td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td></tr><tr><th scope="row">A</th><th scope="row">M</th><th scope="row">3</th><td></td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td></tr><tr><th scope="row">A</th><th scope="row">N</th><th scope="row">1</th><td></td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td></tr><tr><th scope="row">A</th><th scope="row">N</th><th scope="row">2</th><td></td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td></tr></table></div>

<div class="highlight"><pre><span></span><code>    <span class="n">column_major</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">head</span><span class="p">(),</span> <span class="s2">&quot;non-spanning multiple index column major&quot;</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>
</code></pre></div>
<div class="output_html rendered_html output_subarea output_execute_result"><table><caption>non-spanning multiple index column major</caption><tr><th colspan="3" scope="row">10</th><th scope="col">A</th><th scope="col">A</th><th scope="col">A</th><th scope="col">A</th><th scope="col">A</th><th scope="col">A</th><th scope="col">A</th><th scope="col">A</th><th scope="col">A</th><th scope="col">Z</th><th scope="col">Z</th><th scope="col">Z</th><th scope="col">Z</th><th scope="col">Z</th><th scope="col">Z</th><th scope="col">Z</th><th scope="col">Z</th><th scope="col">Z</th></tr><tr><th colspan="3" scope="row">100</th><th scope="col">M</th><th scope="col">M</th><th scope="col">M</th><th scope="col">N</th><th scope="col">N</th><th scope="col">N</th><th scope="col">O</th><th scope="col">O</th><th scope="col">O</th><th scope="col">M</th><th scope="col">M</th><th scope="col">M</th><th scope="col">N</th><th scope="col">N</th><th scope="col">N</th><th scope="col">O</th><th scope="col">O</th><th scope="col">O</th></tr><tr><th colspan="3" scope="row">1000</th><th scope="col">1</th><th scope="col">2</th><th scope="col">3</th><th scope="col">1</th><th scope="col">2</th><th scope="col">3</th><th scope="col">1</th><th scope="col">2</th><th scope="col">3</th><th scope="col">1</th><th scope="col">2</th><th scope="col">3</th><th scope="col">1</th><th scope="col">2</th><th scope="col">3</th><th scope="col">1</th><th scope="col">2</th><th scope="col">3</th></tr><tr><th scope="col">J</th><th scope="col">K</th><th scope="col">L</th><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td></tr><tr><th scope="row">A</th><th scope="row">M</th><th scope="row">1</th><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td></tr><tr><th scope="row">A</th><th scope="row">M</th><th scope="row">2</th><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td></tr><tr><th scope="row">A</th><th scope="row">M</th><th scope="row">3</th><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td></tr><tr><th scope="row">A</th><th scope="row">N</th><th scope="row">1</th><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td></tr><tr><th scope="row">A</th><th scope="row">N</th><th scope="row">2</th><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td><td>nan</td></tr></table></div>

<div class="highlight"><pre><span></span><code><span class="o">%%</span>
<span class="c1">## visual and nonvisual shape</span>

<span class="n">rows</span> <span class="ow">and</span> <span class="n">columns</span> <span class="n">references</span> <span class="ow">in</span> <span class="n">a</span> <span class="err">`</span><span class="n">table</span><span class="err">`</span> <span class="n">are</span> <span class="n">the</span> <span class="ow">not</span> <span class="n">the</span> <span class="n">same</span> <span class="k">as</span> <span class="n">a</span> <span class="n">dataframe</span><span class="o">.</span>
<span class="n">convention</span> <span class="n">holds</span> <span class="n">that</span> <span class="n">dataframes</span> <span class="n">show</span> <span class="n">their</span> <span class="n">shape</span><span class="p">,</span> <span class="n">the</span> <span class="n">shape</span> <span class="n">of</span> <span class="n">the</span> <span class="n">data</span><span class="o">.</span>
<span class="n">the</span> <span class="n">nominal</span> <span class="n">references</span> <span class="n">we</span> <span class="n">use</span> <span class="k">for</span> <span class="n">dataframes</span> <span class="n">are</span> <span class="n">shifted</span> <span class="n">ordinal</span> <span class="n">references</span>
<span class="n">when</span> <span class="n">the</span> <span class="n">shape</span> <span class="ow">is</span> <span class="n">shared</span> <span class="n">along</span> <span class="n">side</span> <span class="n">a</span> <span class="n">screen</span> <span class="n">reader</span><span class="o">.</span>
<span class="n">the</span> <span class="n">shape</span> <span class="n">of</span> <span class="n">the</span> <span class="n">table</span> <span class="n">to</span> <span class="n">the</span> <span class="n">screen</span> <span class="n">reader</span> <span class="n">inclused</span> <span class="n">the</span> <span class="n">rows</span> <span class="ow">and</span> <span class="n">columns</span><span class="o">.</span>
<span class="n">to</span> <span class="n">assistive</span> <span class="n">technology</span><span class="p">,</span> <span class="n">the</span> <span class="n">shape</span> <span class="n">of</span> <span class="n">the</span> <span class="n">dataframe</span> <span class="ow">is</span> <span class="n">computed</span> <span class="n">by</span><span class="p">:</span>

    <span class="n">df</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="n">df</span><span class="o">.</span><span class="n">columns</span><span class="o">.</span><span class="n">nlevels</span><span class="p">,</span> <span class="n">df</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="n">df</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">nlevels</span>

<span class="n">this</span> <span class="n">naive</span> <span class="n">heuristic</span> <span class="ow">is</span> <span class="n">only</span> <span class="n">true</span> <span class="k">for</span> <span class="n">certain</span> <span class="n">combinations</span> <span class="n">of</span> <span class="n">multi</span> <span class="n">indexes</span><span class="o">.</span> <span class="n">a</span> <span class="n">more</span> <span class="n">rigorous</span> <span class="n">implementation</span> <span class="n">would</span> <span class="n">handle</span> <span class="n">these</span> <span class="n">edge</span> <span class="n">cases</span><span class="o">.</span>

<span class="n">these</span> <span class="n">inconsistencies</span> <span class="n">mean</span> <span class="n">that</span> <span class="n">screen</span> <span class="n">reader</span> <span class="n">users</span> <span class="n">may</span> <span class="n">be</span> <span class="n">referencing</span> <span class="n">an</span> <span class="n">different</span> <span class="n">indexing</span> <span class="n">system</span> <span class="n">than</span> <span class="n">sighted</span> <span class="n">users</span><span class="o">.</span>

<span class="n">we</span> <span class="n">improve</span> <span class="n">the</span> <span class="n">captioning</span> <span class="k">with</span> <span class="n">the</span> <span class="n">nominal</span> <span class="n">shape</span> <span class="n">vs</span> <span class="n">the</span> <span class="n">actual</span> <span class="n">shape</span><span class="o">.</span> 
<span class="n">mentioning</span> <span class="n">the</span> <span class="n">row</span> <span class="ow">and</span> <span class="n">columns</span> <span class="n">levels</span> <span class="n">would</span> <span class="n">help</span> <span class="n">parse</span> <span class="n">this</span> <span class="n">content</span><span class="o">.</span>
<span class="k">if</span> <span class="n">we</span> <span class="n">are</span> <span class="n">requiring</span> <span class="n">folks</span> <span class="n">to</span> <span class="n">do</span> <span class="n">math</span> <span class="ow">in</span> <span class="n">their</span> <span class="n">heads</span> <span class="n">then</span> <span class="n">we</span><span class="s1">&#39;ll want an adaptive approach to discussing shape.</span>
</code></pre></div>
<h2 id="visual-and-nonvisual-shape">visual and nonvisual shape<a class="headerlink" href="#visual-and-nonvisual-shape" title="Permanent link">¤</a></h2>
<p>rows and columns references in a <code>table</code> are the not the same as a dataframe.
convention holds that dataframes show their shape, the shape of the data.
the nominal references we use for dataframes are shifted ordinal references
when the shape is shared along side a screen reader.
the shape of the table to the screen reader inclused the rows and columns.
to assistive technology, the shape of the dataframe is computed by:</p>
<pre><code>df.shape[0] + df.columns.nlevels, df.shape[1] + df.index.nlevels
</code></pre>
<p>this naive heuristic is only true for certain combinations of multi indexes. a more rigorous implementation would handle these edge cases.</p>
<p>these inconsistencies mean that screen reader users may be referencing an different indexing system than sighted users.</p>
<p>we improve the captioning with the nominal shape vs the actual shape. 
mentioning the row and columns levels would help parse this content.
if we are requiring folks to do math in their heads then we'll want an adaptive approach to discussing shape.</p>
<h2 id="todo">todo<a class="headerlink" href="#todo" title="Permanent link">¤</a></h2>
<ul>
<li>AT shape vs nominal shape information</li>
<li>dataframes larger than trunacted thresholds where we will have to introduce aria</li>
</ul>
<script type="application/vnd.jupyter.widget-state+json">
{"state": {}, "version_major": 2, "version_minor": 0}
</script>
<p></scope></th></p>







  
  






<script src="https://giscus.app/client.js"
        data-repo="tonyfast/tonyfast"
        data-repo-id="MDEwOlJlcG9zaXRvcnkyOTg2OTcxNjg="
        data-category-id="DIC_kwDOEc3B0M4CTmKy"
        data-mapping="pathname"
        data-strict="0"
        data-reactions-enabled="1"
        data-emit-metadata="0"
        data-input-position="bottom"
        data-theme="preferred_color_scheme"
        data-lang="en"
        crossorigin="anonymous"
        async>
</script>

                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "..", "features": ["navigation.tracking", "navigation.top", "toc.integrate", "navigation.expand", "toc.follow"], "search": "../assets/javascripts/workers/search.b8dbb3d2.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../assets/javascripts/bundle.bd41221c.min.js"></script>
      
    
  </body>
</html>